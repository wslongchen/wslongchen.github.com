<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Android自定义控件浅谈]]></title>
      <url>http://blog.mrpann.com/2016/08/04/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6%E6%B5%85%E8%B0%88/</url>
      <content type="html"><![CDATA[<h2 id="&#x7B80;&#x8FF0;"><a href="#&#x7B80;&#x8FF0;" class="headerlink" title="&#x7B80;&#x8FF0;"></a>&#x7B80;&#x8FF0;</h2><p>&#x5B9E;&#x9645;&#x7684;&#x5B89;&#x5353;&#x5F00;&#x53D1;&#x4E2D;&#x9700;&#x8981;&#x7528;&#x5230;&#x8BB8;&#x8BB8;&#x591A;&#x591A;&#x7684;&#x9177;&#x70AB;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#xFF0C;&#x624D;&#x80FD;&#x5145;&#x5206;&#x5438;&#x5F15;&#x7528;&#x6237;&#x7684;&#x773C;&#x7403;&#x548C;&#x6EE1;&#x8DB3;&#x5BA2;&#x6237;&#x7684;&#x9700;&#x6C42;&#x3002;<br><a id="more"></a></p>
<h2 id="&#x6B65;&#x9AA4;"><a href="#&#x6B65;&#x9AA4;" class="headerlink" title="&#x6B65;&#x9AA4;"></a>&#x6B65;&#x9AA4;</h2><ul>
<li>&#x4E86;&#x89E3;view&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</li>
<li>&#x7F16;&#x5199;&#x7EE7;&#x627F;view&#x7684;&#x5B50;&#x7C7B;</li>
<li>&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;view&#x7C7B;&#x7684;&#x5C5E;&#x6027;</li>
<li>&#x7ED8;&#x5236;&#x63A7;&#x4EF6;</li>
<li>&#x54CD;&#x5E94;&#x7528;&#x6237;&#x6D88;&#x606F;</li>
<li>&#x81EA;&#x5B9A;&#x4E49;&#x56DE;&#x8C03;&#x51FD;&#x6570;</li>
</ul>
<h2 id="view&#x539F;&#x7406;"><a href="#view&#x539F;&#x7406;" class="headerlink" title="view&#x539F;&#x7406;"></a>view&#x539F;&#x7406;</h2><p>&#x53EF;&#x53C2;&#x8003;&#x4EE5;&#x524D;&#x5199;&#x7684;&#x6587;&#x7AE0;<a href="http://blog.mrpann.com/2016/06/14/Android-view&#x7ED8;&#x753B;&#x673A;&#x5236;/">Android view&#x7ED8;&#x753B;&#x673A;&#x5236;</a>&#x3002;</p>
<p>Android&#x7CFB;&#x7EDF;&#x7684;&#x89C6;&#x56FE;&#x7ED3;&#x6784;&#x7684;&#x8BBE;&#x8BA1;&#x4E5F;&#x91C7;&#x7528;&#x4E86;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#xFF0C;&#x5373;View&#x4F5C;&#x4E3A;&#x6240;&#x6709;&#x56FE;&#x5F62;&#x7684;&#x57FA;&#x7C7B;&#xFF0C;Viewgroup&#x5BF9;View&#x7EE7;&#x627F;&#x6269;&#x5C55;&#x4E3A;&#x89C6;&#x56FE;&#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>View&#x5B9A;&#x4E49;&#x4E86;&#x7ED8;&#x56FE;&#x7684;&#x57FA;&#x672C;&#x64CD;&#x4F5C;<br>&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#x7531;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x5B8C;&#x6210;&#xFF1A;measure()&#x3001;layout()&#x3001;draw()&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x53C8;&#x5206;&#x522B;&#x5305;&#x542B;&#x4E86;onMeasure()&#x3001;onLayout()&#x3001;onDraw()&#x4E09;&#x4E2A;&#x5B50;&#x65B9;&#x6CD5;&#x3002;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><p>measure&#x64CD;&#x4F5C;<br>measure&#x64CD;&#x4F5C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5373;&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x957F;&#x5EA6;&#x3002;&#x5728;view&#x4E2D;&#x5B9A;&#x4E49;&#x4E3A;final&#x7C7B;&#x578B;&#xFF0C;&#x8981;&#x6C42;&#x5B50;&#x7C7B;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x3002;measure()&#x51FD;&#x6570;&#x4E2D;&#x53C8;&#x4F1A;&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x51FD;&#x6570;&#xFF1A;<br>&#xFF08;1&#xFF09;onMeasure()&#xFF0C;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x7684;&#x5C06;&#x5728;&#x8FD9;&#x91CC;&#x6700;&#x7EC8;&#x786E;&#x5B9A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;measure&#x53EA;&#x662F;&#x5BF9;onMeasure&#x7684;&#x4E00;&#x4E2A;&#x5305;&#x88C5;&#xFF0C;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x8986;&#x5199;onMeasure()&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x8BA1;&#x7B97;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;setMeasuredDimension(width, height)&#x4FDD;&#x5B58;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;</p>
</li>
<li><p>layout&#x64CD;&#x4F5C;<br>layout&#x64CD;&#x4F5C;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x89C6;&#x56FE;&#x5728;&#x5C4F;&#x5E55;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x5728;view&#x4E2D;&#x5B9A;&#x4E49;&#x4E3A;final&#x7C7B;&#x578B;&#xFF0C;&#x8981;&#x6C42;&#x5B50;&#x7C7B;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x3002;layout()&#x51FD;&#x6570;&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#xFF1A;<br>&#xFF08;1&#xFF09;setFrame&#xFF08;l,t,r,b&#xFF09;&#xFF0C;l,t,r,b&#x5373;&#x5B50;&#x89C6;&#x56FE;&#x5728;&#x7236;&#x89C6;&#x56FE;&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x4F4D;&#x7F6E;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x5C06;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF1B;<br>&#xFF08;2&#xFF09;onLayout()&#xFF0C;&#x5728;View&#x4E2D;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x4F1A;&#x505A;&#xFF0C;&#x63D0;&#x4F9B;&#x8BE5;&#x51FD;&#x6570;&#x4E3B;&#x8981;&#x662F;&#x4E3A;viewGroup&#x7C7B;&#x578B;&#x5E03;&#x5C40;&#x5B50;&#x89C6;&#x56FE;&#x7528;&#x7684;&#xFF1B;</p>
</li>
<li><p>draw&#x64CD;&#x4F5C;<br>draw&#x64CD;&#x4F5C;&#x5229;&#x7528;&#x524D;&#x4E24;&#x90E8;&#x5F97;&#x5230;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#xFF0C;&#x5230;&#x8FD9;&#x91CC;&#x4E5F;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x7684;&#x89C6;&#x56FE;&#x7ED8;&#x5236;&#x5DE5;&#x4F5C;&#x3002;&#x5B50;&#x7C7B;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x4FEE;&#x6539;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x4E86;&#x7ED8;&#x56FE;&#x7684;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#xFF1A;<br>&#xFF08;1&#xFF09;&#x7ED8;&#x5236;&#x80CC;&#x666F;&#xFF1B;<br>&#xFF08;2&#xFF09;&#x5982;&#x679C;&#x8981;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x6E10;&#x53D8;&#x6846;&#xFF0C;&#x8FD9;&#x91CC;&#x4F1A;&#x505A;&#x4E00;&#x4E9B;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#xFF1B;<br>&#xFF08;3&#xFF09;&#x7ED8;&#x5236;&#x89C6;&#x56FE;&#x672C;&#x8EAB;&#xFF0C;&#x5373;&#x8C03;&#x7528;onDraw()&#x51FD;&#x6570;&#x3002;&#x5728;view&#x4E2D;onDraw()&#x662F;&#x4E2A;&#x7A7A;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5177;&#x4F53;&#x7684;&#x89C6;&#x56FE;&#x90FD;&#x8981;&#x8986;&#x5199;&#x8BE5;&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x663E;&#x793A;&#xFF08;&#x6BD4;&#x5982;TextView&#x5728;&#x8FD9;&#x91CC;&#x5B9E;&#x73B0;&#x4E86;&#x7ED8;&#x5236;&#x6587;&#x5B57;&#x7684;&#x8FC7;&#x7A0B;&#xFF09;&#x3002;&#x800C;&#x5BF9;&#x4E8E;ViewGroup&#x5219;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x8BE5;&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x662F;&#x201C;&#x6CA1;&#x6709;&#x5185;&#x5BB9;&#x201C;&#x7684;&#xFF0C;&#x5176;&#x5305;&#x542B;&#x4E86;&#x591A;&#x4E2A;&#x5B50;view&#xFF0C;&#x800C;&#x5B50;View&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x7ED8;&#x5236;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x9700;&#x8981;&#x544A;&#x8BC9;&#x5B50;view&#x7ED8;&#x5236;&#x81EA;&#x5DF1;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0B;&#x9762;&#x7684;dispatchDraw()&#x65B9;&#x6CD5;;<br>&#xFF08;4&#xFF09;&#x7ED8;&#x5236;&#x5B50;&#x89C6;&#x56FE;&#xFF0C;&#x5373;dispatchDraw()&#x51FD;&#x6570;&#x3002;&#x5728;view&#x4E2D;&#x8FD9;&#x662F;&#x4E2A;&#x7A7A;&#x51FD;&#x6570;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x89C6;&#x56FE;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x662F;&#x4E13;&#x95E8;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#x51C6;&#x5907;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5BB9;&#x5668;&#x7C7B;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#xFF1B;<br>&#xFF08;5&#xFF09;&#x5982;&#x679C;&#x9700;&#x8981;&#xFF08;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x4E86;setVerticalFadingEdge&#x6216;&#x8005;setHorizontalFadingEdge&#xFF09;&#xFF0C;&#x5F00;&#x59CB;&#x7ED8;&#x5236;&#x6E10;&#x53D8;&#x6846;&#xFF1B;<br>&#xFF08;6&#xFF09;&#x7ED8;&#x5236;&#x6EDA;&#x52A8;&#x6761;&#xFF1B;<br>&#x4ECE;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x81EA;&#x5B9A;&#x4E49;View&#x9700;&#x8981;&#x6700;&#x5C11;&#x8986;&#x5199;onMeasure()&#x548C;onDraw()&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
</ul>
<h2 id="view&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a href="#view&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="headerlink" title="view&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"></a>view&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</h2><p>&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x7684;3&#x79CD;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;:<br>1&#xFF09;&#x7EE7;&#x627F;&#x5DF2;&#x6709;&#x7684;&#x63A7;&#x4EF6;&#x6765;&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;: &#x4E3B;&#x8981;&#x662F;&#x5F53;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x63A7;&#x4EF6;&#x548C;&#x5DF2;&#x6709;&#x7684;&#x63A7;&#x4EF6;&#x5728;&#x5F88;&#x591A;&#x65B9;&#x9762;&#x6BD4;&#x8F83;&#x7C7B;&#x4F3C;, &#x901A;&#x8FC7;&#x5BF9;&#x5DF2;&#x6709;&#x63A7;&#x4EF6;&#x7684;&#x6269;&#x5C55;&#x6765;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#x3002;<br>2&#xFF09;&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x505A;&#x7EC4;&#x5408;&#x63A7;&#x4EF6;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x3002;<br>&#x6CE8;&#x610F;&#x6B64;&#x65F6;&#x4E0D;&#x7528;onDraw&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x6784;&#x9020;&#x5E7F;&#x544A;&#x4E2D;&#x901A;&#x8FC7;inflater&#x52A0;&#x8F7D;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x518D;addView(view)&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x7684;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x5C31;&#x52A0;&#x8F7D;&#x8FDB;&#x6765;&#x4E86;&#x3002;<br>3&#xFF09;&#x901A;&#x8FC7;&#x7EE7;&#x627F;view&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;GDI&#x7ED8;&#x5236;&#x51FA;&#x7EC4;&#x4EF6;&#x754C;&#x9762;&#xFF0C;&#x4E00;&#x822C;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x4E0A;&#x8FF0;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x65F6;&#x7528;&#x8BE5;&#x65B9;&#x5F0F;&#x3002;</p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;View&#x589E;&#x52A0;&#x5C5E;&#x6027;"><a href="#&#x81EA;&#x5B9A;&#x4E49;View&#x589E;&#x52A0;&#x5C5E;&#x6027;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;View&#x589E;&#x52A0;&#x5C5E;&#x6027;"></a>&#x81EA;&#x5B9A;&#x4E49;View&#x589E;&#x52A0;&#x5C5E;&#x6027;</h2><p>1&#xFF09;&#x5728;View&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x3002;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#x5F15;&#x5165;&#x7684;AttributeSet &#x53BB;&#x67E5;&#x627E;XML&#x5E03;&#x5C40;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x79F0;&#xFF0C;&#x7136;&#x540E;&#x627E;&#x5230;&#x5B83;&#x5BF9;&#x5E94;&#x5F15;&#x7528;&#x7684;&#x8D44;&#x6E90;ID&#x53BB;&#x627E;&#x503C;&#x3002;<br>demo&#xFF1A;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5E26;&#x6587;&#x5B57;&#x7684;&#x56FE;&#x7247;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String mtext;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> msrc;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        <span class="keyword">int</span> resourceId = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> textId = attrs.getAttributeResourceValue(<span class="keyword">null</span>, <span class="string">&quot;Text&quot;</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> srcId = attrs.getAttributeResourceValue(<span class="keyword">null</span>, <span class="string">&quot;Src&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        mtext = context.getResources().getText(textId).toString();</span><br><span class="line">        msrc = srcId;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>{</span><br><span class="line">        Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">        paint.setColor(Color.RED);</span><br><span class="line">        InputStream is = getResources().openRawResource(msrc); </span><br><span class="line">                Bitmap mBitmap = BitmapFactory.decodeStream(is);</span><br><span class="line">                <span class="keyword">int</span> bh = mBitmap.getHeight();</span><br><span class="line">                <span class="keyword">int</span> bw = mBitmap.getWidth();</span><br><span class="line">            canvas.drawBitmap(mBitmap, <span class="number">0</span>,<span class="number">0</span>, paint);</span><br><span class="line">        <span class="comment">//canvas.drawCircle(40, 90, 15, paint);</span></span><br><span class="line">        canvas.drawText(mtext, bw/<span class="number">2</span>, <span class="number">30</span>, paint);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot; &gt;</span><br><span class="line">    &lt;com.example.demo.MyView</span><br><span class="line">        android:id=&quot;@+id/myView1&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot; </span><br><span class="line">        Text=&quot;@string/hello_world&quot;</span><br><span class="line">        Src=&quot;@drawable/xh&quot;/&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>2&#xFF09;&#x901A;&#x8FC7;XML&#x4E3A;View&#x6CE8;&#x518C;&#x5C5E;&#x6027;&#x3002;&#x4E0E;Android&#x63D0;&#x4F9B;&#x7684;&#x6807;&#x51C6;&#x5C5E;&#x6027;&#x5199;&#x6CD5;&#x4E00;&#x6837;&#x3002;<br>demo:&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5E26;&#x6587;&#x5B57;&#x8BF4;&#x660E;&#x7684;ImageView(ImageView+TextView&#x7EC4;&#x5408;&#xFF0C;&#x6587;&#x5B57;&#x8BF4;&#x660E;&#xFF0C;&#x53EF;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x8BBE;&#x7F6E;&#x4F4D;&#x7F6E;)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImageView</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyImageView</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyImageView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        <span class="keyword">int</span> resourceId = -<span class="number">1</span>;</span><br><span class="line">        TypedArray typedArray = context.obtainStyledAttributes(attrs,</span><br><span class="line">                R.styleable.MyImageView);</span><br><span class="line">        ImageView iv = <span class="keyword">new</span> ImageView(context);</span><br><span class="line">        TextView tv = <span class="keyword">new</span> TextView(context);</span><br><span class="line">        <span class="keyword">int</span> N = typedArray.getIndexCount();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) {</span><br><span class="line">            <span class="keyword">int</span> attr = typedArray.getIndex(i);</span><br><span class="line">            <span class="keyword">switch</span> (attr) {</span><br><span class="line">            <span class="keyword">case</span> R.styleable.MyImageView_Oriental:</span><br><span class="line">                resourceId = typedArray.getInt(</span><br><span class="line">                        R.styleable.MyImageView_Oriental, <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">this</span>.setOrientation(resourceId == <span class="number">1</span> ? LinearLayout.HORIZONTAL</span><br><span class="line">                        : LinearLayout.VERTICAL);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.styleable.MyImageView_Text:</span><br><span class="line">                resourceId = typedArray.getResourceId(</span><br><span class="line">                        R.styleable.MyImageView_Text, <span class="number">0</span>);</span><br><span class="line">                tv.setText(resourceId &gt; <span class="number">0</span> ? typedArray.getResources().getText(</span><br><span class="line">                        resourceId) : typedArray</span><br><span class="line">                        .getString(R.styleable.MyImageView_Text));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.styleable.MyImageView_Src:</span><br><span class="line">                resourceId = typedArray.getResourceId(</span><br><span class="line">                        R.styleable.MyImageView_Src, <span class="number">0</span>);</span><br><span class="line">                iv.setImageResource(resourceId &gt; <span class="number">0</span> ?resourceId:R.drawable.ic_launcher);</span><br><span class="line">                <span class="keyword">break</span>;   </span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        addView(iv);</span><br><span class="line">        addView(tv);</span><br><span class="line">        typedArray.recycle();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>attrs.xml&#x8FDB;&#x884C;&#x5C5E;&#x6027;&#x58F0;&#x660E;&#xFF0C; &#x6587;&#x4EF6;&#x653E;&#x5728;values&#x76EE;&#x5F55;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;declare-styleable name=&quot;MyImageView&quot;&gt;</span><br><span class="line">        &lt;attr name=&quot;Text&quot; format=&quot;reference|string&quot;&gt;&lt;/attr&gt;</span><br><span class="line">        &lt;attr name=&quot;Oriental&quot; &gt;</span><br><span class="line">            &lt;enum name=&quot;Horizontal&quot; value=&quot;1&quot;&gt;&lt;/enum&gt;</span><br><span class="line">            &lt;enum name=&quot;Vertical&quot; value=&quot;0&quot;&gt;&lt;/enum&gt;</span><br><span class="line">        &lt;/attr&gt;</span><br><span class="line">        &lt;attr name=&quot;Src&quot; format=&quot;reference|integer&quot;&gt;&lt;/attr&gt;</span><br><span class="line">    &lt;/declare-styleable&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<p>MainActivity&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF1A;&#x5148;&#x5B9A;&#x4E49;&#x547D;&#x540D;&#x7A7A;&#x95F4; xmlns:uview=&#x201D;<a href="http://schemas.android.com/apk/res/com.example.myimageview2" target="_blank" rel="external">http://schemas.android.com/apk/res/com.example.myimageview2</a>&#x201C; &#xFF08;com.example.myimageview2&#x4E3A;&#x4F60;<br>&#x5728;manifest&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5305;&#x540D;&#xFF09;<br>&#x7136;&#x540E;&#x53EF;&#x4EE5;&#x50CF;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7684;&#x5C5E;&#x6027;&#x4E00;&#x6837;&#x4F7F;&#x7528;&#xFF1A;uview:Oriental=&#x201D;Vertical&#x201D;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:uview=&quot;http://schemas.android.com/apk/res/com.example.myimageview2&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;</span><br><span class="line">    tools:context=&quot;.MainActivity&quot; &gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;@string/hello_world&quot; /&gt;</span><br><span class="line">    &lt;com.example.myimageview2.MyImageView</span><br><span class="line">        android:id=&quot;@+id/myImageView1&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        uview:Text=&quot;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x8BF4;&#x660E;&quot; </span><br><span class="line">        uview:Src=&quot;@drawable/tw&quot;</span><br><span class="line">        uview:Oriental=&quot;Vertical&quot;&gt;</span><br><span class="line">    &lt;/com.example.myimageview2.MyImageView&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;View&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x81EA;&#x5B9A;&#x4E49;View&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;View&#x7684;&#x65B9;&#x6CD5;"></a>&#x81EA;&#x5B9A;&#x4E49;View&#x7684;&#x65B9;&#x6CD5;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onFinishInflate() &#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#xFF0C;&#x5F53;&#x5E94;&#x7528;&#x4ECE;XML&#x52A0;&#x8F7D;&#x8BE5;&#x7EC4;&#x4EF6;&#x5E76;&#x7528;&#x5B83;&#x6784;&#x5EFA;&#x754C;&#x9762;&#x4E4B;&#x540E;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;</span><br><span class="line">	onMeasure() &#x68C0;&#x6D4B;View&#x7EC4;&#x4EF6;&#x53CA;&#x5176;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">	onLayout() &#x5F53;&#x8BE5;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x5206;&#x914D;&#x5176;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3001;&#x5927;&#x5C0F;&#x65F6;</span><br><span class="line">	onSizeChange() &#x5F53;&#x8BE5;&#x7EC4;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x88AB;&#x6539;&#x53D8;&#x65F6;</span><br><span class="line">	onDraw() &#x5F53;&#x7EC4;&#x4EF6;&#x5C06;&#x8981;&#x7ED8;&#x5236;&#x5B83;&#x7684;&#x5185;&#x5BB9;&#x65F6;</span><br><span class="line">	onKeyDown &#x5F53;&#x6309;&#x4E0B;&#x67D0;&#x4E2A;&#x952E;&#x76D8;&#x65F6;</span><br><span class="line">	onKeyUp  &#x5F53;&#x677E;&#x5F00;&#x67D0;&#x4E2A;&#x952E;&#x76D8;&#x65F6;</span><br><span class="line">	onTrackballEvent &#x5F53;&#x53D1;&#x751F;&#x8F68;&#x8FF9;&#x7403;&#x4E8B;&#x4EF6;&#x65F6;</span><br><span class="line">	onTouchEvent &#x5F53;&#x53D1;&#x751F;&#x89E6;&#x5C4F;&#x4E8B;&#x4EF6;&#x65F6;</span><br><span class="line">	onWindowFocusChanged(boolean)  &#x5F53;&#x8BE5;&#x7EC4;&#x4EF6;&#x5F97;&#x5230;&#x3001;&#x5931;&#x53BB;&#x7126;&#x70B9;&#x65F6;</span><br><span class="line">	onAtrrachedToWindow() &#x5F53;&#x628A;&#x8BE5;&#x7EC4;&#x4EF6;&#x653E;&#x5165;&#x5230;&#x67D0;&#x4E2A;&#x7A97;&#x53E3;&#x65F6;</span><br><span class="line">	onDetachedFromWindow() &#x5F53;&#x628A;&#x8BE5;&#x7EC4;&#x4EF6;&#x4ECE;&#x67D0;&#x4E2A;&#x7A97;&#x53E3;&#x4E0A;&#x5206;&#x79BB;&#x65F6;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;</span><br><span class="line">	onWindowVisibilityChanged(int): &#x5F53;&#x5305;&#x542B;&#x8BE5;&#x7EC4;&#x4EF6;&#x7684;&#x7A97;&#x53E3;&#x7684;&#x53EF;&#x89C1;&#x6027;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x89E6;&#x53D1;&#x7684;&#x65B9;&#x6CD5;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android UI性能优化（渲染）]]></title>
      <url>http://blog.mrpann.com/2016/08/04/Android-UI%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h2 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h2><p>&#x8C37;&#x6B4C;05&#x5E74;&#x521D;&#x53D1;&#x5E03;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5178;&#x8303;&#xFF0C;&#x662F;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x53BB;&#x8BC6;&#x522B;&#x3001;&#x8BCA;&#x65AD;&#x3001;&#x89E3;&#x51B3;&#x5B89;&#x5353;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x4E2D;&#x6240;&#x5B58;&#x5728;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3002;&#x9996;&#x5F53;&#x5176;&#x51B2;&#x7684;&#x4FBF;&#x662F;&#x6E32;&#x67D3;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x3002;<br><a id="more"></a></p>
<h2 id="&#x6E32;&#x67D3;&#x673A;&#x5236;"><a href="#&#x6E32;&#x67D3;&#x673A;&#x5236;" class="headerlink" title="&#x6E32;&#x67D3;&#x673A;&#x5236;"></a>&#x6E32;&#x67D3;&#x673A;&#x5236;</h2><p>&#x4E00;&#x822C;&#x539F;&#x751F;app&#x5F00;&#x53D1;&#x65F6;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;view&#x65F6;&#xFF0C;&#x56E0;&#x4E3A;&#x5E03;&#x5C40;&#x7684;&#x5C42;&#x6B21;&#x8FC7;&#x591A;&#xFF0C;&#x5BFC;&#x81F4;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#xFF0C;&#x6216;&#x8005;&#x56E0;&#x4E3A;onDraw&#x7B49;&#x65B9;&#x6CD5;&#x4E2D;&#x6709;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#x4ECE;&#x800C;&#x4F7F;&#x7684;&#x754C;&#x9762;&#x5361;&#x987F;&#x3002;<br>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5B89;&#x5353;&#x7CFB;&#x7EDF;&#x7F8E;16ms&#x4F1A;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#xFF0C;&#x89E6;&#x53D1;&#x5BF9;ui&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x65E6;&#x64CD;&#x4F5C;&#x8D85;&#x8FC7;&#x4E86;16ms&#x9152;&#x4F1A;&#x53D1;&#x751F;&#x5361;&#x987F;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x5176;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x5C31;&#x662F;&#x7CFB;&#x7EDF;&#x53D1;&#x51FA;&#x4FE1;&#x53F7;&#x65F6;&#xFF0C;ui&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x8FD8;&#x5728;&#x8FDB;&#x884C;&#x522B;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x4E22;&#x5E27;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x5728;&#x7F51;&#x4E0A;&#x770B;&#x4E86;&#x770B;&#xFF0C;16ms&#x7684;&#x539F;&#x56E0;&#x5C31;&#x662F;&#x610F;&#x5473;1000/60 hz&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;60fps&#xFF0C;&#x4EBA;&#x773C;&#x611F;&#x77E5;&#x7684;&#x4E00;&#x822C;&#x65E0;&#x6CD5;&#x8D85;&#x8FC7;60fps&#x3002;<br>&#x6240;&#x4EE5;&#xFF0C;&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x5B89;&#x5353;&#x754C;&#x9762;&#x7684;&#x5361;&#x987F;&#x539F;&#x56E0;&#x5C31;&#x5728;&#x4E8E;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x5E03;&#x5C40;&#x3001;invalidations&#x5931;&#x6548;&#x4EE5;&#x53CA;Overdraw&#x91CD;&#x65B0;&#x7ED8;&#x5236;&#x5C4F;&#x5E55;&#x3002;<br>&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#xFF1A;</p>
<ul>
<li>&#x901A;&#x8FC7;Hierarchy Viewer&#x53BB;&#x68C0;&#x6D4B;&#x6E32;&#x67D3;&#x6548;&#x7387;&#xFF0C;&#x53BB;&#x9664;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5D4C;&#x5957;</li>
<li>&#x901A;&#x8FC7;Show GPU Overdraw&#x53BB;&#x68C0;&#x6D4B;Overdraw&#xFF0C;&#x6700;&#x7EC8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x79FB;&#x9664;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x80CC;&#x666F;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;canvas.clipRect&#x89E3;&#x51B3;&#x5927;&#x591A;&#x6570;&#x95EE;&#x9898;&#x3002;<h2 id="Overdraw&#x68C0;&#x6D4B;"><a href="#Overdraw&#x68C0;&#x6D4B;" class="headerlink" title="Overdraw&#x68C0;&#x6D4B;"></a>Overdraw&#x68C0;&#x6D4B;</h2></li>
</ul>
<p>&#x5B89;&#x5353;4.2&#x91CC;&#x9762;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x9009;&#x9879;&#x83DC;&#x5355;&#x6709;Debug GPU Overdraw&#xFF0C;&#x6216;&#x8005;&#x4EE5;&#x4E0A;&#x7684;&#x8BDD;&#x5728;&#x5C4F;&#x5E55;&#x5DE6;&#x4E0B;&#x89D2;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5C55;&#x793A;&#x5C4F;&#x5E55;overdraw&#x7684;&#x7A0B;&#x5EA6;&#x3002;<br>&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x5219;&#x662F;&#x5728;Debug GPU overdraw&#x83DC;&#x5355;&#x91CC;&#x9009;&#x62E9;&#x201C;Show Overdraw areas&#x201D;&#x9009;&#x9879;&#x3002;&#x9009;&#x62E9;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x5728;app&#x7684;&#x4E0D;&#x540C;&#x533A;&#x57DF;&#x8986;&#x76D6;&#x4E0D;&#x540C;&#x7684;&#x989C;&#x8272;&#x6765;&#x8868;&#x793A;overdraw&#x7684;&#x6B21;&#x6570;&#x3002;&#x6BD4;&#x8F83;&#x5C4F;&#x5E55;&#x4E0A;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;&#x989C;&#x8272;&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x65B9;&#x4FBF;&#x7684;&#x5B9A;&#x4F4D;overdraw&#x95EE;&#x9898;&#xFF1A;<br>&#x767D;&#x8272;&#xFF1A;&#x6CA1;&#x6709;overdraw &#x84DD;&#x8272;&#xFF1A;1x overdraw&#xFF08;&#x5C4F;&#x5E55;&#x7ED8;&#x5236;&#x4E86;2&#x6B21;&#xFF09; &#x7EFF;&#x8272;&#xFF1A;2x overdraw &#x6D45;&#x7EA2;&#x8272;&#xFF1A;3x overdraw &#x6DF1;&#x7EA2;&#x8272;&#xFF1A;4x&#x6216;&#x8005;&#x66F4;&#x591A;overdraw</p>
<p>&#x603B;&#x7ED3;&#x901A;&#x8FC7;&#x51CF;&#x5C11;view&#x7684;&#x6570;&#x91CF;&#x6D3B;&#x7740;&#x53BB;&#x9664;&#x91CD;&#x590D;&#x7ED8;&#x5236;&#x7684;view&#xFF0C;app&#x7684;&#x6E32;&#x67D3;&#x4F1A;&#x66F4;&#x5FEB;&#x3002;</p>
<h2 id="Overdraw&#x5904;&#x7406;&#x65B9;&#x6848;"><a href="#Overdraw&#x5904;&#x7406;&#x65B9;&#x6848;" class="headerlink" title="Overdraw&#x5904;&#x7406;&#x65B9;&#x6848;"></a>Overdraw&#x5904;&#x7406;&#x65B9;&#x6848;</h2><h3 id="&#x79FB;&#x9664;&#x4E0D;&#x8981;&#x7684;background"><a href="#&#x79FB;&#x9664;&#x4E0D;&#x8981;&#x7684;background" class="headerlink" title="&#x79FB;&#x9664;&#x4E0D;&#x8981;&#x7684;background"></a>&#x79FB;&#x9664;&#x4E0D;&#x8981;&#x7684;background</h3><p>&#x5728;&#x6B63;&#x5E38;&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x79FB;&#x9664;&#x4E0D;&#x5FC5;&#x8981;&#x7684;background&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x7ED8;&#x5236;&#x7684;&#x7A0B;&#x5EA6;&#x3002;<br>&#x5982;&#x8BBE;&#x7F6E;&#x4E86;&#x4E3B;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x79FB;&#x9664;listview&#x4EE5;&#x53CA;listview&#x7684;items&#x4E2D;&#x7684;&#x4E00;&#x4E9B;background&#x3002;<br>&#x4EE5;&#x53CA;&#x5F53;&#x6211;&#x4EEC;&#x5728;layout&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;&#x80CC;&#x666F;&#x8272;&#xFF0C;activity&#x7684;view&#x4E2D;&#x7684;&#x80CC;&#x666F;&#x5C31;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x7528;getWindow().setBackgroundDrawable(null);&#x8BBE;&#x7F6E;&#x3002;</p>
<h3 id="&#x4F7F;&#x7528;clipRect"><a href="#&#x4F7F;&#x7528;clipRect" class="headerlink" title="&#x4F7F;&#x7528;clipRect"></a>&#x4F7F;&#x7528;clipRect</h3><p>&#x5F53;&#x6211;&#x4EEC;&#x7ED8;&#x5236;&#x4E86;&#x591A;&#x4E2A;view&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x6BCF;&#x4E00;&#x4E2A;view&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x7ED8;&#x5236;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;onDraw&#x65B9;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;canvas.clipRect(0, 0, 0,0);&#x65B9;&#x6CD5;</p>
<h2 id="Hierarchy-Viewer"><a href="#Hierarchy-Viewer" class="headerlink" title="Hierarchy Viewer"></a>Hierarchy Viewer</h2><p>&#x5B89;&#x5353;sdk&#x4E2D;&#x5305;&#x542B;&#x7740;&#x6B4C;&#x5DE5;&#x5177;&#xFF0C;&#x5728;android studio&#x4E2D;tools&#x4E0B;&#x9762;&#x7684;android&#x4E0B;&#x7684;android device monitor&#x5C31;&#x80FD;&#x770B;&#x5230;&#x3002;Hierarchy Viewer&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x67E5;&#x770B;&#x5C4F;&#x5E55;&#x4E0A;&#x5957;&#x5D4C;view&#x7ED3;&#x6784;&#xFF0C;&#x662F;&#x67E5;&#x770B;&#x4F60;&#x7684;view&#x7ED3;&#x6784;&#x7684;&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[android蓝牙编程牛刀小试]]></title>
      <url>http://blog.mrpann.com/2016/08/03/android%E8%93%9D%E7%89%99%E7%BC%96%E7%A8%8B%E7%89%9B%E5%88%80%E5%B0%8F%E8%AF%95/</url>
      <content type="html"><![CDATA[<h2 id="&#x7B80;&#x8FF0;"><a href="#&#x7B80;&#x8FF0;" class="headerlink" title="&#x7B80;&#x8FF0;"></a>&#x7B80;&#x8FF0;</h2><p>&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x4E5F;&#x66FE;&#x7528;&#x5230;&#x5B89;&#x5353;&#x84DD;&#x7259;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E0E;&#x84DD;&#x7259;&#x6A21;&#x5757;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x8FDB;&#x884C;&#x603B;&#x7ED3;&#xFF0C;&#x505A;&#x4E0B;&#x7B14;&#x8BB0;&#xFF0C;&#x4EE5;&#x5907;&#x4E0D;&#x65F6;&#x4E4B;&#x9700;&#x3002;<br><a id="more"></a></p>
<h2 id="&#x5F00;&#x542F;&#x4E0E;&#x8BBE;&#x7F6E;&#x84DD;&#x7259;"><a href="#&#x5F00;&#x542F;&#x4E0E;&#x8BBE;&#x7F6E;&#x84DD;&#x7259;" class="headerlink" title="&#x5F00;&#x542F;&#x4E0E;&#x8BBE;&#x7F6E;&#x84DD;&#x7259;"></a>&#x5F00;&#x542F;&#x4E0E;&#x8BBE;&#x7F6E;&#x84DD;&#x7259;</h2><p>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;BluetoothAdapter&#xFF0C;&#x901A;&#x8FC7;getDefaultAdapter()&#x83B7;&#x53D6;&#x9ED8;&#x8BA4;&#x84DD;&#x7259;&#x9002;&#x914D;&#x5668;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x6307;&#x5B9A;&#x3002;&#x5176;&#x6B21;&#x68C0;&#x6D4B;&#x84DD;&#x7259;&#x662F;&#x5426;&#x6253;&#x5F00;&#xFF0C;&#x5982;&#x82E5;&#x6CA1;&#x6709;&#x6253;&#x5F00;&#xFF0C;&#x5219;&#x901A;&#x8FC7;&#x9002;&#x914D;&#x5668;&#x7684;.enable()&#x5F00;&#x542F;&#x3002;&#x8FD8;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x84DD;&#x7259;&#x8BBE;&#x5907;&#x7684;&#x53EF;&#x89C1;&#x6027;&#x4EE5;&#x53CA;&#x5176;&#x65F6;&#x95F4;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">search</span><span class="params">()</span> </span>{</span><br><span class="line">        BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();</span><br><span class="line">        <span class="keyword">if</span> (!adapter.isEnabled()) {</span><br><span class="line">            adapter.enable();</span><br><span class="line">        }</span><br><span class="line">        Intent enable = <span class="keyword">new</span> Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);</span><br><span class="line">        enable.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, <span class="number">3600</span>); <span class="comment">//3600&#x4E3A;&#x84DD;&#x7259;&#x8BBE;&#x5907;&#x53EF;&#x89C1;&#x65F6;&#x95F4;</span></span><br><span class="line">        startActivity(enable);</span><br><span class="line">        Intent searchIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ComminuteActivity.class);</span><br><span class="line">        startActivity(searchIntent);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure></p>
<h2 id="&#x641C;&#x7D22;&#x60F3;&#x8981;&#x901A;&#x4FE1;&#x7684;&#x8BBE;&#x5907;"><a href="#&#x641C;&#x7D22;&#x60F3;&#x8981;&#x901A;&#x4FE1;&#x7684;&#x8BBE;&#x5907;" class="headerlink" title="&#x641C;&#x7D22;&#x60F3;&#x8981;&#x901A;&#x4FE1;&#x7684;&#x8BBE;&#x5907;"></a>&#x641C;&#x7D22;&#x60F3;&#x8981;&#x901A;&#x4FE1;&#x7684;&#x8BBE;&#x5907;</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">BluetoothReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>{</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>{</span><br><span class="line">            String action = intent.getAction();</span><br><span class="line">            <span class="keyword">if</span> (BluetoothDevice.ACTION_FOUND.equals(action)) {</span><br><span class="line">                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);</span><br><span class="line">                <span class="keyword">if</span> (isLock(device)) {</span><br><span class="line">                    devices.add(device.getName());</span><br><span class="line">                }</span><br><span class="line">                deviceList.add(device);</span><br><span class="line">            }</span><br><span class="line">            showDevices();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isLock</span><span class="params">(BluetoothDevice device)</span> </span>{</span><br><span class="line">        <span class="keyword">boolean</span> isLockName = (device.getName()).equals(lockName);</span><br><span class="line">        <span class="keyword">boolean</span> isSingleDevice = devices.indexOf(device.getName()) == -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> isLockName &amp;&amp; isSingleDevice;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<p>&#x5E76;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">final</span> String message)</span> </span>{</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                BluetoothSocket tmp = <span class="keyword">null</span>;</span><br><span class="line">                Method method;</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    method = device.getClass().getMethod(<span class="string">&quot;createRfcommSocket&quot;</span>, <span class="keyword">new</span> Class[]{<span class="keyword">int</span>.class});</span><br><span class="line">                    tmp = (BluetoothSocket) method.invoke(device, <span class="number">1</span>);</span><br><span class="line">                } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                    setState(CONNECT_FAILED);</span><br><span class="line">                    Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                }</span><br><span class="line">                socket = tmp;</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    socket.connect();</span><br><span class="line">                    isConnect = <span class="keyword">true</span>;</span><br><span class="line">                } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                    setState(CONNECT_FAILED);</span><br><span class="line">                    Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x6B64;&#x524D;&#xFF0C;&#x8BB0;&#x5F97;&#x8C03;&#x7528;bluetoothAdapter.startDiscovery();&#x65B9;&#x6CD5;&#x3002;&#x4ED6;&#x4F1A;&#x5BF9;&#x5176;&#x4ED6;&#x84DD;&#x7259;&#x8BBE;&#x5907;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF0C;&#x6301;&#x7EED;12&#x79D2;&#xFF0C;&#x901A;&#x8FC7;cancelDiscovery()&#x53D6;&#x6D88;&#x3002;&#x5728;&#x641C;&#x7D22;&#x84DD;&#x7259;&#x8BBE;&#x5907;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x7CFB;&#x7EDF;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x9001;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x5E7F;&#x64AD;&#xFF1A;ACTION_DISCOVERY_START(&#x5F00;&#x59CB;&#x641C;&#x7D22;)&#xFF0C;ACTION_DISCOVERY_FINISHED(&#x641C;&#x7D22;&#x7ED3;&#x675F;)&#x548C;ACTION_FOUND(&#x627E;&#x5230;&#x8BBE;&#x5907;)&#x3002;ACTION_FOUND&#x8FD9;&#x4E2A;&#x624D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;Intent&#x4E2D;&#x5305;&#x542B;&#x4E24;&#x4E2A;extra fields:EXTRA_DEVICE&#x548C;EXTRA_CLASS&#xFF0C;&#x5305;&#x542B;&#x7684;&#x5206;&#x522B;&#x662F;BluetoothDevice&#x548C;BluetoothClass&#xFF0C;BluetoothDevice&#x4E2D;&#x7684;EXTRA_DEVICE&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x641C;&#x7D22;&#x5230;&#x7684;&#x8BBE;&#x5907;&#x5BF9;&#x8C61;&#x3002; &#x786E;&#x8BA4;&#x641C;&#x7D22;&#x5230;&#x8BBE;&#x5907;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;&#x5F97;&#x5230;&#x7684;BluetoothDevice&#x5BF9;&#x8C61;&#x4E2D;&#x83B7;&#x5F97;&#x8BBE;&#x5907;&#x7684;&#x540D;&#x79F0;&#x548C;&#x5730;&#x5740;&#x3002;</p>
<p>&#x8FDE;&#x63A5;&#x8BBE;&#x5907;&#x4E4B;&#x524D;&#x9700;&#x8981;uuid&#xFF0C;&#x7528;&#x6765;&#x914D;&#x5BF9;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;128&#x4F4D;&#x7684;&#x5B57;&#x7B26;&#x4E32;id&#xFF0C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x3002;</p>
<h2 id="&#x6CE8;&#x518C;&#x5E7F;&#x64AD;&#x4E0E;&#x64A4;&#x9500;"><a href="#&#x6CE8;&#x518C;&#x5E7F;&#x64AD;&#x4E0E;&#x64A4;&#x9500;" class="headerlink" title="&#x6CE8;&#x518C;&#x5E7F;&#x64AD;&#x4E0E;&#x64A4;&#x9500;"></a>&#x6CE8;&#x518C;&#x5E7F;&#x64AD;&#x4E0E;&#x64A4;&#x9500;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);</span><br><span class="line"> receiver = new BluetoothReceiver();</span><br><span class="line"> registerReceiver(receiver, filter);</span><br><span class="line"></span><br><span class="line"> //&#x64A4;&#x9500;</span><br><span class="line"> @Override</span><br><span class="line">    protected void onDestroy() {</span><br><span class="line">        unregisterReceiver(receiver);</span><br><span class="line">        super.onDestroy();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>
<h2 id="&#x8FDB;&#x884C;&#x901A;&#x4FE1;"><a href="#&#x8FDB;&#x884C;&#x901A;&#x4FE1;" class="headerlink" title="&#x8FDB;&#x884C;&#x901A;&#x4FE1;"></a>&#x8FDB;&#x884C;&#x901A;&#x4FE1;</h2><p>&#x5982;&#x679C;&#x94FE;&#x63A5;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x4E86;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isConnect) {</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        OutputStream outStream = socket.getOutputStream();</span><br><span class="line">                        outStream.write(getHexBytes(message));</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                        setState(WRITE_FAILED);</span><br><span class="line">                        Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        InputStream inputStream = socket.getInputStream();</span><br><span class="line">                        <span class="keyword">int</span> data;</span><br><span class="line">                        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">                            <span class="keyword">try</span> {</span><br><span class="line">                                data = inputStream.read();</span><br><span class="line">                                Message msg = handler.obtainMessage();</span><br><span class="line">                                msg.what = DATA;</span><br><span class="line">                                msg.arg1 = data;</span><br><span class="line">                                handler.sendMessage(msg);</span><br><span class="line">                            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                                setState(READ_FAILED);</span><br><span class="line">                                Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            }</span><br><span class="line">                        }</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                        setState(WRITE_FAILED);</span><br><span class="line">                        Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (socket != <span class="keyword">null</span>) {</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        socket.close();</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                        Log.e(<span class="string">&quot;TAG&quot;</span>, e.toString());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br></pre></td></tr></table></figure></p>
<p>&#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x5316;&#x4E3A;16&#x8FDB;&#x5236;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private byte[] getHexBytes(String message) {</span><br><span class="line">        int len = message.length() / 2;</span><br><span class="line">        char[] chars = message.toCharArray();</span><br><span class="line">        String[] hexStr = new String[len];</span><br><span class="line">        byte[] bytes = new byte[len];</span><br><span class="line">        for (int i = 0, j = 0; j &lt; len; i += 2, j++) {</span><br><span class="line">            hexStr[j] = &quot;&quot; + chars[i] + chars[i + 1];</span><br><span class="line">            bytes[j] = (byte) Integer.parseInt(hexStr[j], 16);</span><br><span class="line">        }</span><br><span class="line">        return bytes;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安卓事件传递机制]]></title>
      <url>http://blog.mrpann.com/2016/07/12/%E5%AE%89%E5%8D%93%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<h2 id="&#x7B80;&#x8FF0;"><a href="#&#x7B80;&#x8FF0;" class="headerlink" title="&#x7B80;&#x8FF0;"></a>&#x7B80;&#x8FF0;</h2><p>&#x5F53;&#x624B;&#x6307;&#x89E6;&#x6478;&#x5230;&#x5C4F;&#x5E55;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x6389;&#x7528;&#x76F8;&#x5E94;&#x89C6;&#x56FE;&#x7684;onTouchEvent&#xFF0C;&#x5E76;&#x4F20;&#x5165;&#x4E00;&#x7CFB;&#x5217;&#x7684;action&#x3002;</p>
<a id="more"></a>
<h2 id="dispatchTouchEvent&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;"><a href="#dispatchTouchEvent&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;" class="headerlink" title="dispatchTouchEvent&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;"></a>dispatchTouchEvent&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;</h2><p>&#x9996;&#x5148;&#xFF0C;&#x89E6;&#x53D1;activity&#x7684;dispatchTouchEvent&#xFF0C;&#x7136;&#x540E;&#x89E6;&#x53D1;activity&#x7684;onUserInteraction&#xFF0C;<br>&#x7D27;&#x63A5;&#x51FA;&#x53D1;layout&#x7684;dispatchTouchEvent&#xFF0C;&#x7136;&#x540E;&#x518D;&#x89E6;&#x53D1;layout&#x7684;onInterceptTouchEvent&#x4E8B;&#x4EF6;&#x3002;<br>&#x4E8E;&#x662F;&#x91CD;&#x5199;viewgroup&#x5FC5;&#x987B;&#x8C03;&#x7528;super.onInterceptTouchEvent();</p>
<h4 id="dispatchTouchEvent"><a href="#dispatchTouchEvent" class="headerlink" title="dispatchTouchEvent"></a>dispatchTouchEvent</h4><p>&#x6B64;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x521D;&#x6B65;&#x5904;&#x7406;&#x4E8B;&#x4EF6;&#xFF0C;&#x52A8;&#x4F5C;&#x7531;&#x6B64;&#x5206;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x8C03;&#x7528;super.onInterceptTouchEvent&#x3002;</p>
<h4 id="onInterceptTouchEvent"><a href="#onInterceptTouchEvent" class="headerlink" title="onInterceptTouchEvent"></a>onInterceptTouchEvent</h4><p>&#x82E5;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;true&#xFF0C;&#x4E8B;&#x4EF6;&#x4F1A;&#x4F20;&#x9012;&#x5230;&#x81EA;&#x5DF1;&#x7684;onTouchEvent();<br>&#x53CD;&#x4E4B;&#xFF0C;&#x4F20;&#x9012;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;view&#x7684;dispatchTouchEvent();</p>
<h4 id="onTouchEvent"><a href="#onTouchEvent" class="headerlink" title="onTouchEvent"></a>onTouchEvent</h4><p>&#x82E5;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;true&#xFF0C;&#x4E8B;&#x4EF6;&#x7531;&#x81EA;&#x5DF1;&#x5904;&#x7406;&#x6D88;&#x8017;&#xFF0C;&#x540E;&#x7EED;&#x52A8;&#x4F5C;&#x5E8F;&#x5217;&#x8BA9;&#x5176;&#x5904;&#x7406;&#x3002;<br>&#x82E5;&#x8FD4;&#x56DE;false&#xFF0C;&#x81EA;&#x5DF1;&#x4E0D;&#x6D88;&#x8017;&#x4E8B;&#x4EF6;&#xFF0C;&#x5411;&#x4E0A;&#x8FD4;&#x56DE;&#x8BA9;&#x5176;&#x4ED6;&#x7684;&#x7236;&#x7EA7;view&#x7684;onTouchEvent&#x63A5;&#x6536;&#x5904;&#x7406;</p>
<p>&#x5176;&#x5173;&#x7CFB;&#x4F2A;&#x4EE3;&#x7801;&#xFF0C;&#x82E5;&#x5F53;&#x524D;view&#x62E6;&#x622A;&#x4E8B;&#x4EF6;&#xFF0C;&#x4EA4;&#x7531;&#x81EA;&#x8EAB;onTouchEvent&#x53BB;&#x5904;&#x7406;&#xFF0C;&#x5426;&#x5219;&#x4E22;&#x7ED9;&#x5B50;view&#x7EE7;&#x7EED;&#x6D41;&#x7A0B;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>{ <span class="keyword">boolean</span> consume = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">if</span> (onInterceptTouchEvent(ev)) {</span><br><span class="line">consume = onTouchEvent(ev); } <span class="keyword">else</span> {</span><br><span class="line">        consume = child.dispatchTouchEvent(ev);</span><br><span class="line">    }</span><br><span class="line"><span class="keyword">return</span> consume;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h2 id="onTouchEvent&#x7684;&#x4F20;&#x9012;"><a href="#onTouchEvent&#x7684;&#x4F20;&#x9012;" class="headerlink" title="onTouchEvent&#x7684;&#x4F20;&#x9012;"></a>onTouchEvent&#x7684;&#x4F20;&#x9012;</h2><p>&#x5F53;&#x6709;&#x591A;&#x4E2A;&#x5C42;&#x7EA7;&#x7684;view&#x65F6;&#xFF0C;&#x7236;&#x5C42;&#x7EA7;&#x5141;&#x8BB8;&#x7684;&#x60C5;&#x51B5;&#xFF0C;action&#x4F1A;&#x4E00;&#x76F4;&#x5411;&#x4E0B;&#x4F20;&#x9012;&#x5230;&#x6700;&#x5E95;&#x5C42;&#x7684;view&#x3002;touch&#x4E8B;&#x4EF6;&#x6700;&#x5148;&#x8C03;&#x7528;&#x7684;&#x662F;&#x6700;&#x5E95;&#x5C42;view&#x7684;<br>onTouchEvent&#xFF0C;&#x5982;&#x679C;view&#x7684;onTouchEvent&#x63A5;&#x6536;&#x5230;&#x67D0;&#x4E2A;&#x89E6;&#x5C4F;&#x4E8B;&#x4EF6;&#x5E76;&#x4F5C;&#x51FA;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;true&#x6216;&#x8005;false&#xFF1B;&#x8FD4;&#x56DE;true<br>&#x4F1A;&#x544A;&#x8BC9;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x7684;view&#x9700;&#x8981;&#x5904;&#x7406;&#x8FD9;&#x6B21;&#x7684;&#x89E6;&#x6478;touch&#x4E8B;&#x4EF6;&#xFF0C;&#x4EE5;&#x540E;&#x7CFB;&#x7EDF;&#x6240;&#x53D1;&#x51FA;&#x7684;ACTION_MOVE&#xFF0C;ACTION_UP&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x76D1;&#x542C;&#x5E76;&#x63A5;&#x6536;&#xFF0C;&#x800C;&#x8FD9;&#x6B21;&#x7684;action<br>&#x4E8B;&#x4EF6;&#x5DF2;&#x7ECF;&#x88AB;&#x5904;&#x7406;&#x4E86;&#xFF0C;&#x7236;&#x7EA7;view&#x65E0;&#x6CD5;&#x89E6;&#x53D1;onTouchEvent&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E00;&#x4E2A;action&#x4E8B;&#x4EF6;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;onTouchEvent&#x8FD4;&#x56DE;true&#x3002;&#x53CD;&#x4E4B;&#xFF0C;&#x8FD4;&#x56DE;false&#x4FBF;&#x4F1A;<br>&#x901A;&#x77E5;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;view&#x5DF2;&#x7ECF;&#x5FFD;&#x7565;&#x4E86;&#x8FD9;&#x6B21;&#x7684;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#xFF0C;action&#x4E8B;&#x4EF6;&#x4F1A;&#x4F20;&#x5411;&#x7236;&#x7EA7;&#xFF0C;&#x8C03;&#x7528;&#x7236;&#x7EA7;view&#x7684;onTouchEvent&#xFF0C;&#x540C;&#x6837;&#x7684;&#x8FD9;&#x4E00;&#x6B21;touch&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x53D1;&#x51FA;&#x7684;&#x4EFB;&#x4F55;action<br>&#x8BE5;view&#x90FD;&#x4E0D;&#x4F1A;&#x63A5;&#x53D7;&#xFF0C;&#x77E5;&#x9053;&#x4E0B;&#x4E00;&#x6B21;&#x7684;touch&#x4E8B;&#x4EF6;&#x7684;action&#x518D;&#x6B21;&#x4F20;&#x8FDB;&#x6765;&#x3002;</p>
<h2 id="&#x7236;&#x7EA7;onInterceptTouchEvent&#x622A;&#x53D6;"><a href="#&#x7236;&#x7EA7;onInterceptTouchEvent&#x622A;&#x53D6;" class="headerlink" title="&#x7236;&#x7EA7;onInterceptTouchEvent&#x622A;&#x53D6;"></a>&#x7236;&#x7EA7;onInterceptTouchEvent&#x622A;&#x53D6;</h2><p>&#x5047;&#x8BBE;&#x4E0D;&#x6539;&#x53D8;&#x7236;&#x5C42;&#x7EA7;dispatch&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x5E95;&#x5C42;onTouchEvent&#x4E4B;&#x524D;&#x4F1A;&#x8C03;&#x7528;&#x7236;view&#x7684;onInterceptTouchEvent&#x65B9;&#x6CD5;&#x5224;&#x65AD;&#xFF0C;&#x6B64;&#x6B21;&#x662F;&#x5426;&#x8981;&#x622A;&#x53D6;touch&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x7684;action&#xFF1B;<br>&#x5982;&#x679C;onInterceptTouchEvent&#x8FD4;&#x56DE;&#x4E86;true&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x6B21;touch&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x52A8;&#x4F5C;&#x90FD;&#x4E0D;&#x4F1A;&#x518D;&#x5411;&#x6DF1;&#x5C42;&#x7684;view&#x4F20;&#x9012;&#xFF0C;&#x90FD;&#x53EA;&#x4F1A;&#x4F20;&#x7ED9;&#x7236;&#x5C42;&#x7684;onTouchEvent&#x3002;&#x5982;&#x679C;&#x8FD4;&#x56DE;false&#xFF0C;&#x90A3;&#x4E48;&#x672C;&#x6B21;action<br>&#x5C06;&#x53D1;&#x7ED9;&#x6DF1;&#x5C42;&#x7684;view&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E00;&#x6B21;action&#x90FD;&#x4F1A;&#x8BE2;&#x95EE;&#x7236;&#x5C42;&#x7684;onInterceptTouchEvent&#x9700;&#x4E0D;&#x9700;&#x8981;&#x622A;&#x53D6;&#x672C;&#x6B21;touch&#x4E8B;&#x4EF6;&#x3002;&#x53EA;&#x6709;viewgroup&#x624D;&#x6709;onInterceptTouchEvent&#x65B9;&#x6CD5;&#xFF0C;&#x666E;&#x901A;view<br>&#x4E00;&#x822C;&#x90FD;&#x662F;&#x4F4D;&#x4E8E;&#x6700;&#x6DF1;&#x5C42;&#x7684;view&#x3002;</p>
<p>tips&#xFF1A;&#x5BF9;&#x4E8E;&#x5E95;&#x5C42;view&#xFF0C;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x963B;&#x6B62;&#x7236;&#x5C42;&#x7684;view&#x622A;&#x53D6;touch&#x4E8B;&#x4EF6;&#xFF0C;&#x5C31;&#x662F;&#x8C03;&#x7528;getParent().requestDisallowInterceptTouchEvent(true);&#x65B9;&#x6CD5;&#x3002;</p>
<h2 id="&#x793A;&#x4F8B;"><a href="#&#x793A;&#x4F8B;" class="headerlink" title="&#x793A;&#x4F8B;"></a>&#x793A;&#x4F8B;</h2><h4 id="&#x5904;&#x7406;viewpager&#x4E0E;listview&#x7684;&#x51B2;&#x7A81;"><a href="#&#x5904;&#x7406;viewpager&#x4E0E;listview&#x7684;&#x51B2;&#x7A81;" class="headerlink" title="&#x5904;&#x7406;viewpager&#x4E0E;listview&#x7684;&#x51B2;&#x7A81;"></a>&#x5904;&#x7406;viewpager&#x4E0E;listview&#x7684;&#x51B2;&#x7A81;</h4><p>&#x8BB0;&#x5F55;&#x6C34;&#x5E73;&#x4E0E;&#x5782;&#x76F4;&#x65B9;&#x5411;&#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x66F4;&#x591A;&#x7684;&#x8BDD;&#x5C31;&#x8BA9;viewpager&#x5904;&#x7406;page&#x6ED1;&#x52A8;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">FixedViewPager</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span></span><br><span class="line"><span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>{</span><br><span class="line">    <span class="keyword">switch</span>(ev.getAction() &amp;</span><br><span class="line">MotionEvent.ACTION_MASK) {</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">            mX = ev.getX();</span><br><span class="line">            mY = ev.getY();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">            <span class="keyword">float</span> x = ev.getX();</span><br><span class="line">            <span class="keyword">float</span> y = ev.getY();</span><br><span class="line">            <span class="keyword">float</span> dX = x - mX;</span><br><span class="line">            <span class="keyword">float</span> dY = y - mY;</span><br><span class="line">            <span class="keyword">float</span> tmp = Math.abs(dX) /</span><br><span class="line">Math.abs(dY);</span><br><span class="line">            mX = x;</span><br><span class="line">            mY = y;</span><br><span class="line">            <span class="keyword">if</span> (tmp &gt; <span class="number">1</span>) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"><span class="keyword">super</span>.onInterceptTouchEvent(ev);</span><br><span class="line">} }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onInterceptTouchEvent(ev);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x5904;&#x7406;viewpager&#x4E0E;imagebanner&#x7684;&#x6EDA;&#x52A8;&#x51B2;&#x7A81;"><a href="#&#x5904;&#x7406;viewpager&#x4E0E;imagebanner&#x7684;&#x6EDA;&#x52A8;&#x51B2;&#x7A81;" class="headerlink" title="&#x5904;&#x7406;viewpager&#x4E0E;imagebanner&#x7684;&#x6EDA;&#x52A8;&#x51B2;&#x7A81;"></a>&#x5904;&#x7406;viewpager&#x4E0E;imagebanner&#x7684;&#x6EDA;&#x52A8;&#x51B2;&#x7A81;</h4><p>&#x8BB0;&#x5F55;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#x5728;imagebanner&#x7684;&#x6C34;&#x5E73;&#x504F;&#x79FB;&#x91CF;&#x5927;&#x96E8;&#x5782;&#x76F4;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x5C31;&#x8BA9;banner&#x6EDA;&#x52A8;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">FixedImageLoadBanner</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent</span><br><span class="line">ev)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> != mX || <span class="number">0</span> != mY) {</span><br><span class="line">        <span class="keyword">float</span> dY = ev.getRawY() - mY;</span><br><span class="line">        <span class="keyword">float</span> dX = ev.getRawX() - mX;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(dY) &gt; Math.abs(dX)) {</span><br><span class="line">requestDisallowInterceptTouchEvent(<span class="keyword">false</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">requestDisallowInterceptTouchEvent(<span class="keyword">true</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    mX = ev.getRawX();</span><br><span class="line">    mY = ev.getRawY();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(ev);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[mac下安装home-brew]]></title>
      <url>http://blog.mrpann.com/2016/07/08/mac%E4%B8%8B%E5%AE%89%E8%A3%85home-brew/</url>
      <content type="html"><![CDATA[<h2 id="&#x5B89;&#x88C5;home-brew"><a href="#&#x5B89;&#x88C5;home-brew" class="headerlink" title="&#x5B89;&#x88C5;home-brew"></a>&#x5B89;&#x88C5;home-brew</h2><p>&#x9996;&#x5148;&#x662F;&#x5B89;&#x88C5;home-brew&#xFF0C;&#x6253;&#x5F00;&#x7EC8;&#x7AEF;&#xFF0C;&#x8F93;&#x5165;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">&quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span></span><br></pre></td></tr></table></figure></p>
<p>&#x7136;&#x540E;&#x6309;&#x7167;&#x63D0;&#x793A;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;<br>&#x8F93;&#x5165;brew &#xFF0D;v&#x67E5;&#x770B;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x5DF2;&#x8868;&#x793A;&#x4F60;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x3002;<br><a id="more"></a></p>
<h2 id="&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;php"><a href="#&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;php" class="headerlink" title="&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;php"></a>&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;php</h2><p>&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5DF2;php5.5&#x4E3A;&#x4F8B;&#xFF1A;<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">	brew update #&#x66F4;&#x65B0;brew&#x53EF;&#x5B89;&#x88C5;&#x5305;&#xFF0C;&#x5EFA;&#x8BAE;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x4E00;&#x4E0B;</span><br><span class="line"></span><br><span class="line">	brew search php55 #&#x641C;&#x7D22;php5.5</span><br><span class="line"></span><br><span class="line">	brew tap josegonzalez/php #&#x5B89;&#x88C5;&#x6269;&#x5C55;&lt;gihhub_user/repo&gt;&#xA0;</span><br><span class="line"></span><br><span class="line">	brew tap #&#x67E5;&#x770B;&#x5B89;&#x88C5;&#x7684;&#x6269;&#x5C55;&#x5217;&#x8868;</span><br><span class="line"></span><br><span class="line">	brew install php55 #&#x5B89;&#x88C5;php5.5</span><br><span class="line"></span><br><span class="line">	brew remove php55 #&#x5378;&#x8F7D;php5.5</span><br><span class="line"></span><br><span class="line">	brew upgrade php55 #&#x5347;&#x7EA7;php5.5</span><br><span class="line"></span><br><span class="line">	brew options php55 #&#x67E5;&#x770B;php5.5&#x5B89;&#x88C5;&#x9009;&#x9879;</span><br><span class="line"></span><br><span class="line">	brew info php55 #&#x67E5;&#x770B;php5.5&#x76F8;&#x5173;&#x4FE1;&#x606F;</span><br><span class="line"></span><br><span class="line">	brew home php55 #&#x8BBF;&#x95EE;php5.5&#x5B98;&#x65B9;&#x7F51;&#x7AD9;</span><br><span class="line"></span><br><span class="line">	brew services list #&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x901A;&#x8FC7; brew &#x5B89;&#x88C5;&#x7684;&#x670D;&#x52A1;</span><br><span class="line"></span><br><span class="line">	brew services cleanup #&#x6E05;&#x9664;&#x5DF2;&#x5378;&#x8F7D;&#x65E0;&#x7528;&#x7684;&#x542F;&#x52A8;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line"></span><br><span class="line">	brew services restart php55 #&#x91CD;&#x542F;php-fpm</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p>&#x5BF9;&#x4E86;&#xFF0C;&#x4E00;&#x5B9A;&#x8BB0;&#x5F97;&#x6253;&#x5F00;&#x963F;&#x5E15;&#x5947;&#x548C;&#x5BF9;php&#x7684;&#x6269;&#x5C55;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apachectl start &#x5F00;&#x542F;&#x547D;&#x4EE4;</span><br><span class="line"></span><br><span class="line">sudo apachectl stop &#x5173;&#x95ED;&#x547D;&#x4EE4;</span><br><span class="line"></span><br><span class="line">sudo apachectl restart &#x91CD;&#x542F;&#x547D;&#x4EE4;</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8BBF;&#x95EE; <a href="http://localhost&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x201D;It" target="_blank" rel="external">http://localhost&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x201D;It</a> works!&#x201D;&#x5C31;&#x8868;&#x793A;&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x963F;&#x5E15;&#x5947;&#x542F;&#x7528;&#x4EE5;&#x540E;&#xFF0C;&#x5728;os x&#x4E2D;&#x6709;&#x4FE9;&#x76EE;&#x5F55;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD0;&#x884C;web&#x7A0B;&#x5E8F;&#x3002;</p>
<p>&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x6839;&#x76EE;&#x5F55;&#xFF1A;/Library/WebServer/Documents/</p>
<p>&#x7528;&#x6237;&#x7EA7;&#x7684;&#x6839;&#x76EE;&#x5F55;&#xFF1A;~/Sites &#x53EF;&#x80FD;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5EFA;&#x7ACB;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x542F;&#x7528;php&#xFF0C;&#x5F3A;&#x5927;&#x7684;os x&#x96C6;&#x6210;&#x4E86;php&#x7248;&#x672C;&#xFF0C;&#x7528;vi&#x6216;&#x8005;nano&#x6253;&#x5F00;httpd.conf&#x6587;&#x4EF6;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apache2/httpd.conf</span><br></pre></td></tr></table></figure></p>
<p>&#x5C06;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x524D;&#x5934;&#x7684;#&#x53BB;&#x6389;&#xFF0C;&#x4FDD;&#x5B58; &#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;&#x963F;&#x5E15;&#x5947;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule php5_module libexec/apache2/libphp5.so &#xFF08;php&#xFF09;</span><br></pre></td></tr></table></figure></p>
<p>&#x4FEE;&#x6539;php.ini,&#x5C06;mysql&#x6269;&#x5C55;&#x6253;&#x5F00;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;mysql.socket<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql.default_socket = /tmp/mysql.socket</span><br></pre></td></tr></table></figure></p>
<p>&#x5982;&#x82E5;&#x6CA1;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x5C31;&#x521B;&#x5EFA;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp&#xA0;&#xA0;&#xA0;/etc/php.ini.default&#xA0;&#xA0;&#xA0;/etc/php.ini</span><br></pre></td></tr></table></figure></p>
<h2 id="&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;mysql"><a href="#&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;mysql" class="headerlink" title="&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;mysql"></a>&#x5229;&#x7528;home-brew&#x5B89;&#x88C5;mysql</h2><p>&#x7136;&#x540E;&#x5F00;&#x59CB;&#x5B89;&#x88C5;mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br><span class="line">mysql&#x5F00;&#x673A;&#x542F;&#x52A8;</span><br><span class="line"></span><br><span class="line">ln&#xA0;-sfv&#xA0;/usr/local/opt/mysql/*.plist&#xA0;~/Library/LaunchAgents</span><br></pre></td></tr></table></figure></p>
<p>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5F00;&#x542F;MySQL&#x5B89;&#x5168;&#x673A;&#x5236;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/opt/mysql/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure></p>
<p>&#x5F00;&#x542F;mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql.server&#xA0;start</span><br></pre></td></tr></table></figure></p>
<p>&#x914D;&#x7F6E;&#x5BC6;&#x7801;&#x4FE1;&#x606F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select&#xA0;user,password,host&#xA0;from&#xA0;mysql.user;&#xA0;</span><br><span class="line">delete&#xA0;from&#xA0;mysql.user&#xA0;where&#xA0;user=&apos;&apos;;&#xA0;	&#xA0;</span><br><span class="line">   delete&#xA0;from&#xA0;mysql.user&#xA0;where&#xA0;host=&apos;::1&apos;;&#xA0;&#xA0;	</span><br><span class="line">&#xA0;   set&#xA0;password&#xA0;for&#xA0;root@localhost=password(&apos;123456&apos;);&#xA0;&#xA0;	</span><br><span class="line">&#xA0;   GRANT&#xA0;ALL&#xA0;PRIVILEGES&#xA0;ON&#xA0;*.*&#xA0;TO&#xA0;&apos;miaohr&apos;@&apos;%&apos;&#xA0;&#xA0;IDENTIFIED&#xA0;BY&#xA0;&apos;123456&apos;;&#xA0;&#xA0;</span><br><span class="line">&#xA0;   flush&#xA0;privileges;</span><br></pre></td></tr></table></figure></p>
<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#xFF0C;&#x5728;/usr/local/etc&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;my.conf&#xFF0C;&#x5982;&#x589E;&#x52A0;log<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]&#xA0;&#xA0;</span><br><span class="line">general-log&#xA0;&#xA0;</span><br><span class="line">general_log_file&#xA0;=&#xA0;/usr/local/var/log/mysqld.log</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[简单实现自己的类似UniversalImageLoader网络图片加载缓存框架]]></title>
      <url>http://blog.mrpann.com/2016/07/02/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E7%B1%BB%E4%BC%BCUniversalImageLoader%E7%BD%91%E7%BB%9C%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E7%BC%93%E5%AD%98%E6%A1%86%E6%9E%B6/</url>
      <content type="html"><![CDATA[<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#x90FD;&#x5728;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x6846;&#x67B6;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x4F1A;&#x7701;&#x4E0B;&#x4E0D;&#x5C11;&#x7684;&#x5F00;&#x53D1;&#x6210;&#x672C;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x4E00;&#x4E9B;&#x5982;universal-image-loader&#x4EE5;&#x53CA;&#x8C37;&#x6B4C;&#x5B98;&#x65B9;&#x7684;&#x56FE;&#x7247;&#x6846;&#x67B6;glide&#x6216;&#x8005;&#x76F8;&#x4F3C;&#x7684;picasso&#x90FD;&#x57FA;&#x672C;&#x4E0A;&#x80FD;&#x591F;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x7684;&#x9700;&#x6C42;&#x3002;<br>&#x672C;&#x7740;&#x5B66;&#x4E60;&#x7684;&#x6001;&#x5EA6;&#xFF0C;&#x5728;&#x53C2;&#x8003;&#x4E86;&#x82E5;&#x5E72;&#x6848;&#x4F8B;&#x4E4B;&#x540E;&#xFF0C;&#x7AD9;&#x7740;&#x64B8;&#x4E86;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;universal-image-loader&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x600E;&#x4E48;&#x8BC4;&#x4EF7;&#x5B83;&#x5462;&#xFF0C;&#x4E00;&#x53E5;&#x8BDD;&#xFF1A;&#x51D1;&#x5408;&#x51D1;&#x5408;&#x80FD;&#x7528;&#x5427;&#xFF5E;<br>&#x5DF2;&#x5E76;&#x5165;&#x6211;&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x5C0F;&#x5DE5;&#x5177;AnnUtils&#x7684;imageloader&#x6A21;&#x5757;&#xFF0C;&#x4F20;&#x9001;&#x95E8;&#xFF1A;<a href="https://github.com/wslongchen/annutils/tree/master/src/main/java/com/example/mrpan/annutils/ImageLoader" target="_blank" rel="external">github</a><br><a id="more"></a></p>
<h2 id="&#x539F;&#x7406;"><a href="#&#x539F;&#x7406;" class="headerlink" title="&#x539F;&#x7406;"></a>&#x539F;&#x7406;</h2><p>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7F13;&#x5B58;&#xFF0C;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1A;&#x6839;&#x636E;&#x76F8;&#x5173;url&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x65F6;&#xFF0C;&#x7B2C;&#x4E00;&#x5148;&#x4ECE;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;&#x8BE5;&#x56FE;&#x7247;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;&#x7F13;&#x5B58;&#xFF0C;&#x6700;&#x540E;&#x4ECE;&#x6307;&#x5B9A;&#x7684;url&#x4E2D;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;&#x3002;</p>
<h2 id="&#x4E3B;&#x8981;&#x4EE3;&#x7801;"><a href="#&#x4E3B;&#x8981;&#x4EE3;&#x7801;" class="headerlink" title="&#x4E3B;&#x8981;&#x4EE3;&#x7801;"></a>&#x4E3B;&#x8981;&#x4EE3;&#x7801;</h2><p>&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">(String url, ImageView imageView, <span class="keyword">int</span> requiredSize, OnImageLoaderListener listener)</span> </span>{</span><br><span class="line">        imageViews.put(imageView, url);</span><br><span class="line">        <span class="comment">// &#x5148;&#x4ECE;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E2D;&#x67E5;&#x627E;</span></span><br><span class="line">        Bitmap bitmap = memoryCache.get(url);</span><br><span class="line">        <span class="keyword">if</span> (bitmap != <span class="keyword">null</span>){</span><br><span class="line">            imageView.setImageBitmap(bitmap);</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != listener){</span><br><span class="line">                listener.onFinishedImageLoader(imageView, bitmap); <span class="comment">// &#x901A;&#x77E5;&#x5B8C;&#x6210;&#x52A0;&#x8F7D;</span></span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// &#x82E5;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x5219;&#x8BBE;&#x7F6E;&#x6210;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#xFF0C;&#x5E76;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#x52A0;&#x8F7D;&#x771F;&#x5B9E;&#x9700;&#x8981;&#x7684;&#x56FE;&#x7247;</span></span><br><span class="line">            imageView.setImageResource(config.getDefaultResId());</span><br><span class="line">            loadPhoto(url, imageView, requiredSize, listener);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure></p>
<p>&#x52A0;&#x8F7D;&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x4EE5;&#x53CA;&#x56DE;&#x8C03;&#x8FDB;&#x5EA6;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     * &#x6267;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x52A0;&#x8F7D;&#x56FE;&#x7247;</span><br><span class="line">     * <span class="doctag">@param</span> url</span><br><span class="line">     * <span class="doctag">@param</span> requiredSize</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Bitmap <span class="title">getBitmap</span><span class="params">(String url, <span class="keyword">int</span> requiredSize, PhotoToLoad photoToLoad)</span> </span>{</span><br><span class="line">        File f = fileCache.getFile(url);</span><br><span class="line">        <span class="comment">// &#x5148;&#x4ECE;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;</span></span><br><span class="line">        Bitmap b = decodeFile(f, requiredSize);</span><br><span class="line">        <span class="keyword">if</span> (b != <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> b;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x6700;&#x540E;&#x4ECE;&#x6307;&#x5B9A;&#x7684;url&#x4E2D;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Bitmap bitmap = <span class="keyword">null</span>;</span><br><span class="line">            URL imageUrl = <span class="keyword">new</span> URL(url);</span><br><span class="line">            HttpURLConnection conn = (HttpURLConnection) imageUrl</span><br><span class="line">                    .openConnection();</span><br><span class="line">            conn.setConnectTimeout(<span class="number">30000</span>);</span><br><span class="line">            conn.setReadTimeout(<span class="number">30000</span>);</span><br><span class="line">            conn.setInstanceFollowRedirects(<span class="keyword">true</span>);</span><br><span class="line">            InputStream is = conn.getInputStream();</span><br><span class="line">            OutputStream os = <span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line"><span class="comment">//            CopyStream(is, os, conn.getContentLength(), photoToLoad);</span></span><br><span class="line"></span><br><span class="line">            photoToLoad.totalSize = conn.getContentLength();</span><br><span class="line">            <span class="keyword">int</span> buffer_size = <span class="number">1024</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[buffer_size];</span><br><span class="line">            <span class="keyword">for</span> (; ; ) {</span><br><span class="line">                <span class="keyword">int</span> count = is.read(bytes, <span class="number">0</span>, buffer_size);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (count == -<span class="number">1</span>){</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                os.write(bytes, <span class="number">0</span>, count);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">null</span> != photoToLoad.onImageLoaderListener){ <span class="comment">// &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x76D1;&#x542C;&#xFF0C;&#x5219;&#x56DE;&#x8C03;</span></span><br><span class="line">                    Message msg = handler.obtainMessage();</span><br><span class="line">                    photoToLoad.currentSize += count;</span><br><span class="line">                    msg.arg1 = IMAGE_LOADER_PROCESS;</span><br><span class="line">                    msg.obj = photoToLoad;</span><br><span class="line">                    handler.sendMessage(msg);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            is.close();</span><br><span class="line">            os.close();</span><br><span class="line">            bitmap = decodeFile(f, requiredSize);</span><br><span class="line">            <span class="keyword">return</span> bitmap;</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) {</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure></p>
<p>&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6E90;&#x7801;</p>
<h2 id="&#x4F7F;&#x7528;&#x65B9;&#x5F0F;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x5F0F;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x5F0F;"></a>&#x4F7F;&#x7528;&#x65B9;&#x5F0F;</h2><h3 id="&#x914D;&#x7F6E;&#x521D;&#x59CB;&#x5316;"><a href="#&#x914D;&#x7F6E;&#x521D;&#x59CB;&#x5316;" class="headerlink" title="&#x914D;&#x7F6E;&#x521D;&#x59CB;&#x5316;"></a>&#x914D;&#x7F6E;&#x521D;&#x59CB;&#x5316;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AnnImageLoader.init(getApplicationContext(),</span><br><span class="line">     <span class="keyword">new</span> CacheConfig()</span><br><span class="line">     .setDefRequiredSize(<span class="number">600</span>) <span class="comment">// &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#xFF08;&#x8868;&#x793A;&#x5BBD;&#x9AD8;&#x4EFB;&#x4E00;&#x4E0D;&#x8D85;&#x8FC7;&#x8BE5;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;70px&#xFF09;</span></span><br><span class="line">     .setDefaultResId(R.drawable.ic_launcher) <span class="comment">// &#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x7684;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;0&#xFF0C;&#x5373;&#x7A7A;&#x767D;&#x56FE;&#x7247;&#xFF09;</span></span><br><span class="line">     .setBitmapConfig(Bitmap.Config.ARGB_8888) <span class="comment">// &#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#x4F4D;&#x56FE;&#x6A21;&#x5F0F;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;Bitmap.CacheConfig.ARGB_8888&#xFF09;</span></span><br><span class="line">     .setMemoryCachelimit(Runtime.getRuntime().maxMemory() / <span class="number">3</span>) <span class="comment">// &#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x5927;&#x5C0F;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;Runtime.getRuntime().maxMemory() / 4&#xFF09;</span></span><br><span class="line">     .setFileCachePath(Environment.getExternalStorageDirectory().toString() + <span class="string">&quot;/mycache&quot;</span>) <span class="comment">// &#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x4FDD;&#x5B58;&#x76EE;&#x5F55;</span></span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
<h3 id="&#x663E;&#x793A;&#x56FE;&#x7247;"><a href="#&#x663E;&#x793A;&#x56FE;&#x7247;" class="headerlink" title="&#x663E;&#x793A;&#x56FE;&#x7247;"></a>&#x663E;&#x793A;&#x56FE;&#x7247;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">AnnImageLoader.getInstances().displayImage(url,imageview, <span class="keyword">new</span> AnnImageLoader.OnImageLoaderListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressImageLoader</span><span class="params">(ImageView imageView, <span class="keyword">int</span> currentSize, <span class="keyword">int</span> totalSize)</span> </span>{</span><br><span class="line">                <span class="comment">//&#x8FDB;&#x5EA6;&#x6761;</span></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFinishedImageLoader</span><span class="params">(ImageView imageView, Bitmap bitmap)</span> </span>{</span><br><span class="line">                <span class="comment">//&#x52A0;&#x8F7D;&#x7ED3;&#x675F;</span></span><br><span class="line">            }</span><br><span class="line">        });</span><br></pre></td></tr></table></figure>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x5F0F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6709;&#x7F51;&#x7EDC;&#xFF0C;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#xFF0C;&#x6709;&#x6D89;&#x53CA;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x867D;&#x7136;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x7684;&#x4E0D;&#x8DB3;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x4E2D;&#x603B;&#x7ED3;&#x5230;&#x4E86;&#x8BB8;&#x591A;&#x81EA;&#x5DF1;&#x5E73;&#x5E38;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x5C31;&#x5F53;&#x4F5C;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x4E2A;&#x953B;&#x70BC;&#x5427;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[AsyncTask多线程]]></title>
      <url>http://blog.mrpann.com/2016/07/01/AsyncTask%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h2 id="AsyncTask"><a href="#AsyncTask" class="headerlink" title="AsyncTask"></a>AsyncTask</h2><p>tips&#xFF1A;asynctask&#x7684;&#x7EBF;&#x7A0B;&#x6C60;ThreadPoolExecutor&#x90FD;&#x662F;&#x8FDB;&#x7A0B;&#x8303;&#x56F4;&#x5185;&#x5171;&#x4EAB;&#x7684;&#xFF0C;&#x90FD;&#x662F;static&#x3002;&#x6240;&#x4EE5;&#x5B83;&#x63A7;&#x5236;&#x8FDB;&#x7A0B;&#x5185;&#x6240;&#x6709;&#x5B50;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7EBF;&#x7A0B;&#x6C60;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6570;&#x8D85;&#x8FC7;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x6700;&#x5927;&#x5BB9;&#x91CF;&#xFF0C;3.0&#x4EE5;&#x524D;&#x7684;&#x7248;&#x672C;&#x4F1A;&#x6302;&#x6389;&#xFF0C;3.0&#x4EE5;&#x540E;&#x4E32;&#x884C;&#x4E4B;&#x884C;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x63A8;&#x8350;&#x81EA;&#x5B9A;&#x4E49;&#x7EBF;&#x7A0B;&#x6C60;&#x914D;&#x5408;&#x5176;&#x4F7F;&#x7528;&#x3002;<br><a id="more"></a><br>&#x5173;&#x4E8E;&#x9ED8;&#x8BA4;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6C60;&#x6700;&#x591A;&#x6709;CPU_COUNT+1&#xFF0C;&#x6700;&#x591A;&#x6709;CPU_COUNT&#xFF0A;2+1&#x4E2A;&#xFF0C;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x961F;&#x5217;&#x6700;&#x5927;&#x7B49;&#x5F85;&#x6570;&#x4F4D;128&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x3002;AsyncTask&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5141;&#x8BB8;tasks&#x5E76;&#x884C;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x907F;&#x514D;&#x65B0;&#x6570;&#x636E;&#x5457;&#x8001;&#x6570;&#x636E;&#x8986;&#x76D6;&#xFF0C;&#x5982;volatile&#x53D8;&#x91CF;&#x3002;&#x4E32;&#x884C;&#x5219;&#x4F7F;&#x7528;SERIAL_EXECUTOR&#x3002;<br>&#x81EA;&#x5B9A;&#x4E49;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">executeOnExecutor(Executor exec, Params... params)    </span><br><span class="line">&#x81EA;&#x5B9A;&#x4E49;<span class="function">Executor</span><br><span class="line"><span class="title">execute</span><span class="params">(Params... params)</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> executeOnExecutor(sDefaultExecutor, params);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h3><p>&#x7EE7;&#x627F;AsyncTask<void,void,void>&#x7C7B;<br>&#x5B9E;&#x73B0;onPreExecute()&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982;&#x8FDB;&#x5EA6;&#x6761;&#x521D;&#x59CB;&#x4E4B;&#x7C7B;&#x7684;<br>&#x5B9E;&#x73B0;doInBackground(String&#x2026; params)&#x5904;&#x7406;&#x65B9;&#x6CD5;<br>&#x5982;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doInBackground(String... params){</span><br><span class="line">	URL url=new URL(params[0]);</span><br><span class="line">	HttpURLConnection con=(HttpURLConnection)url.getURLConnection();</span><br><span class="line">	InputStream in=con.getInputStream();	</span><br><span class="line">}</span><br></pre></td></tr></table></figure></void,void,void></p>
<p>&#x5B9E;&#x73B0;onPostExecute() &#x6267;&#x884C;</p>
<p>&#x6700;&#x540E;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;execute</p>
<h3 id="&#x751F;&#x547D;&#x5468;&#x671F;"><a href="#&#x751F;&#x547D;&#x5468;&#x671F;" class="headerlink" title="&#x751F;&#x547D;&#x5468;&#x671F;"></a>&#x751F;&#x547D;&#x5468;&#x671F;</h3><p>AsyncTask&#x4F1A;&#x4E00;&#x76F4;&#x6267;&#x884C;&#x76F4;&#x5230;doInBackground()&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x3002;&#x4E2D;&#x9014;&#x5982;&#x679C;cancel(boolean)&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5219;onCancelled(Result result)&#x65B9;&#x6CD5;&#x6267;&#x884C;&#xFF0C;&#x5426;&#x5219;&#x6267;&#x884C;onPostExecute(Result result)&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5728;&#x9500;&#x6BC1;&#x6D3B;&#x52A8;&#x524D;&#x8BB0;&#x5F97;&#x53D6;&#x6D88;&#x4EFB;&#x52A1;&#xFF0C;&#x4F7F;&#x7528;AsyncTask&#x65F6;&#x786E;&#x4FDD;AsyncTask&#x5DF2;&#x7ECF;&#x88AB;&#x6B63;&#x786E;&#x7684;&#x53D6;&#x6D88;&#x3002;</p>
<h3 id="&#x5185;&#x5B58;&#x6CC4;&#x6F0F;"><a href="#&#x5185;&#x5B58;&#x6CC4;&#x6F0F;" class="headerlink" title="&#x5185;&#x5B58;&#x6CC4;&#x6F0F;"></a>&#x5185;&#x5B58;&#x6CC4;&#x6F0F;</h3><p>AsyncTask&#x88AB;&#x751F;&#x547D;&#x4F4D;&#x6D3B;&#x52A8;&#x7684;&#x975E;&#x9759;&#x6001;&#x7684;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5219;AsyncTask&#x4F1A;&#x4FDD;&#x7559;&#x5BF9;&#x5176;&#x5F15;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x6D3B;&#x52A8;&#x9500;&#x6BC1;&#xFF0C;AsyncTask&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x8FD8;&#x5728;&#x6267;&#x884C;&#xFF0C;&#x5219;AsyncTask&#x4F1A;&#x5728;&#x5185;&#x5B58;&#x91CC;&#x4FDD;&#x7559;&#x6B64;&#x5F15;&#x7528;&#xFF0C;&#x5BFC;&#x81F4;&#x6D3B;&#x52A8;&#x65E0;&#x6CD5;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x5F15;&#x8D77;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3002;</p>
<h3 id="&#x7ED3;&#x679C;&#x4E22;&#x5931;"><a href="#&#x7ED3;&#x679C;&#x4E22;&#x5931;" class="headerlink" title="&#x7ED3;&#x679C;&#x4E22;&#x5931;"></a>&#x7ED3;&#x679C;&#x4E22;&#x5931;</h3><p>&#x5C4F;&#x5E55;&#x65CB;&#x8F6C;&#x6216;&#x8005;Activity&#x540E;&#x53F0;&#x88AB;&#x6740;&#x6B7B;&#x7B49;&#x5BFC;&#x81F4;Activity&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#xFF0C;&#x4E4B;&#x524D;&#x8FD0;&#x884C;&#x7684;AsyncTask&#x4F1A;&#x4FDD;&#x7559;&#x4E4B;&#x524D;Activity&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x6B64;&#x5F15;&#x7528;&#x5DF2;&#x65E0;&#x6548;&#xFF0C;&#x6240;&#x4EE5;&#x8C03;&#x7528;onPostExecute()&#x66F4;&#x65B0;&#x754C;&#x9762;&#x65E0;&#x6CD5;&#x751F;&#x6548;&#x3002;</p>
<h3 id="&#x5E76;&#x884C;&#x4E0E;&#x4E32;&#x884C;"><a href="#&#x5E76;&#x884C;&#x4E0E;&#x4E32;&#x884C;" class="headerlink" title="&#x5E76;&#x884C;&#x4E0E;&#x4E32;&#x884C;"></a>&#x5E76;&#x884C;&#x4E0E;&#x4E32;&#x884C;</h3><p>Android 1.6&#x4E4B;&#x524D;&#x4E32;&#x884C;&#x3002;&#x4E4B;&#x540E;&#x5230;2.3&#x65F6;&#x6539;&#x6210;&#x4E86;&#x5E76;&#x884C;&#x3002;2.3&#x4E4B;&#x540E;&#x652F;&#x6301;&#x4E32;&#x884C;&#x4E0E;&#x5E76;&#x884C;&#xFF0C;&#x9700;&#x8981;&#x4E32;&#x884C;&#x6267;&#x884C;&#x65F6;&#x76F4;&#x63A5;&#x6267;&#x884C;execute()&#xFF0C;&#x5E76;&#x884C;&#x5219;&#x8981;&#x6267;&#x884C;executeOnExecutor(Executor)&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF1A;Android 3.0&#x4E4B;&#x540E;&#xFF0C;&#x8C37;&#x6B4C;&#x5BF9;AsyncTask&#x7684;api&#x8FDB;&#x884C;&#x8C03;&#x6574;&#xFF0C;&#x6BCF;&#x6B21;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EBA;&#x7269;&#xFF0C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5728;&#x6267;&#x884C;&#x7B2C;&#x4E8C;&#x4E2A;&#x4EBA;&#x7269;&#x3002;&#x76F8;&#x5F53;&#x4E8E;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x6267;&#x884C;&#x63D0;&#x4EA4;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[dream接口访问文档]]></title>
      <url>http://blog.mrpann.com/2016/06/16/dream%E6%8E%A5%E5%8F%A3%E8%AE%BF%E9%97%AE%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<p>&#x63A5;&#x53E3;&#x8BBF;&#x95EE;<br>appKey:dream ,.<em>-app<br>&#x51FA;&#x4E8E;&#x63A5;&#x53E3;&#x7684;&#x5B89;&#x5168;&#x6027;&#x8003;&#x8651;&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x672C;&#x6587;&#x6863;&#x63A5;&#x53E3;&#x65F6;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x4F20;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;<br>1&#x3001; timestamp &#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x5373;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x6233;<br>2&#x3001; sign &#x7B7E;&#x540D; ,&#x6839;&#x636E;appKey&#x3001;timestamp&#x548C;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x540D;&#x5B57;&#x6309;&#x89C4;&#x5219;&#x751F;&#x6210;<br>&#x6CE8;&#x610F;&#xFF1A;&#x7528;&#x4F5C;&#x751F;&#x6210;sign&#x7684;timestamp&#x548C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7684;timestamp&#x5FC5;&#x987B;&#x4E00;&#x81F4;<br><a id="more"></a><br>sign&#x751F;&#x6210;&#x89C4;&#x5219;&#xFF1A;appKey+timestamp+actionName&#xFF08;&#x5F53;&#x524D;&#x63A5;&#x53E3;&#x540D;&#x79F0;&#xFF0C;&#x5168;&#x90E8;&#x8F6C;&#x6362;&#x6210;&#x5C0F;&#x5199;&#xFF09;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x540E;MD5 &#x52A0;&#x5BC6;<br>&#x4F8B;&#xFF1A;postUser&#x63A5;&#x53E3; &#xFF0C;appKey &#x4E3A; dream,.</em>-app&#xFF0C; timestamp&#x4E3A;123456789<br>&#x5219;sign &#x4E3A; md5(dream,.*-app123456789postuser)<br>&#x6700;&#x540E;&#x7684;&#x503C;&#x4E3A; 4d7393a35f972f3f15710bbf1a920746<br>&lt;!-more-&gt;</p>
<h3 id="&#x68A6;&#x60F3;"><a href="#&#x68A6;&#x60F3;" class="headerlink" title="&#x68A6;&#x60F3;"></a>&#x68A6;&#x60F3;</h3><h4 id="1-&#x53D1;&#x8868;&#x68A6;&#x60F3;"><a href="#1-&#x53D1;&#x8868;&#x68A6;&#x60F3;" class="headerlink" title="1.&#x53D1;&#x8868;&#x68A6;&#x60F3;"></a>1.&#x53D1;&#x8868;&#x68A6;&#x60F3;</h4><p>url:<a href="http://dream.mrpann.com/app.php?action=post&amp;type=dream" target="_blank" rel="external">http://dream.mrpann.com/app.php?action=post&amp;type=dream</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>author&#xFF0C;&#x68A6;&#x60F3;&#x4F5C;&#x8005;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>date&#xFF0C;&#x53D1;&#x8868;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>content&#xFF0C;&#x68A6;&#x60F3;&#x5185;&#x5BB9;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>title&#xFF0C;&#x6807;&#x9898;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>status&#xFF0C;&#x72B6;&#x6001;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>password&#xFF0C;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>guid&#xFF0C;&#x94FE;&#x63A5;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>type&#xFF0C;&#x7C7B;&#x578B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>commentstatus&#xFF0C;&#x8BC4;&#x8BBA;&#x72B6;&#x6001;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>commentcount&#xFF0C;&#x8BC4;&#x8BBA;&#x603B;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
<h4 id="2-&#x53D1;&#x8868;&#x68A6;&#x60F3;&#xFF08;&#x5E26;&#x56FE;&#x7247;&#xFF09;"><a href="#2-&#x53D1;&#x8868;&#x68A6;&#x60F3;&#xFF08;&#x5E26;&#x56FE;&#x7247;&#xFF09;" class="headerlink" title="2.&#x53D1;&#x8868;&#x68A6;&#x60F3;&#xFF08;&#x5E26;&#x56FE;&#x7247;&#xFF09;"></a>2.&#x53D1;&#x8868;&#x68A6;&#x60F3;&#xFF08;&#x5E26;&#x56FE;&#x7247;&#xFF09;</h4><p>url:<a href="http://dream.mrpann.com/allpost.php?action=postDreamImg" target="_blank" rel="external">http://dream.mrpann.com/allpost.php?action=postDreamImg</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>author&#xFF0C;&#x68A6;&#x60F3;&#x4F5C;&#x8005;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>date&#xFF0C;&#x53D1;&#x8868;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>content&#xFF0C;&#x68A6;&#x60F3;&#x5185;&#x5BB9;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>title&#xFF0C;&#x6807;&#x9898;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>status&#xFF0C;&#x72B6;&#x6001;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>password&#xFF0C;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>guid&#xFF0C;&#x94FE;&#x63A5;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>type&#xFF0C;&#x7C7B;&#x578B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>commentstatus&#xFF0C;&#x8BC4;&#x8BBA;&#x72B6;&#x6001;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>commentcount&#xFF0C;&#x8BC4;&#x8BBA;&#x603B;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>file0-file8&#xFF0C;&#x56FE;&#x7247;&#xFF0C;file&#x683C;&#x5F0F;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
<h4 id="3-&#x521B;&#x5EFA;&#x8BC4;&#x8BBA;"><a href="#3-&#x521B;&#x5EFA;&#x8BC4;&#x8BBA;" class="headerlink" title="3.&#x521B;&#x5EFA;&#x8BC4;&#x8BBA;"></a>3.&#x521B;&#x5EFA;&#x8BC4;&#x8BBA;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=comment&amp;type=postComment" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=comment&amp;type=postComment</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>author&#xFF0C;&#x68A6;&#x60F3;&#x4F5C;&#x8005;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>userid&#xFF0C;&#x8BC4;&#x8BBA;&#x8005;id&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>dreamid&#xFF0C;&#x68A6;&#x60F3;id&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>content&#xFF0C;&#x8BC4;&#x8BBA;&#x5185;&#x5BB9;,&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>time&#xFF0C;&#x8BC4;&#x8BBA;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
<h4 id="4-&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x68A6;&#x60F3;"><a href="#4-&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x68A6;&#x60F3;" class="headerlink" title="4.&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x68A6;&#x60F3;"></a>4.&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x68A6;&#x60F3;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=list&amp;type=dream&amp;page=1" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=list&amp;type=dream&amp;page=1</a><br>get&#x53C2;&#x6570;&#xFF1A;<br>page&#xFF0C;&#x9875;&#x6570;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x793A;&#x4F8B;&#xFF1A;{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;44&quot;,</span><br><span class="line">            &quot;post_author&quot;: {</span><br><span class="line">                &quot;ID&quot;: &quot;5&quot;,</span><br><span class="line">                &quot;user_login&quot;: &quot;longchen&quot;,</span><br><span class="line">                &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">                &quot;user_nickname&quot;: &quot;&#x6F58;&#x5B89;&quot;,</span><br><span class="line">                &quot;user_img&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_phone&quot;: &quot;15574968443&quot;,</span><br><span class="line">                &quot;user_email&quot;: &quot;wslongchen@qq.com&quot;,</span><br><span class="line">                &quot;user_url&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_registered&quot;: &quot;2016-04-09 14:44:08&quot;,</span><br><span class="line">                &quot;user_activation_key&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">                &quot;user_display_name&quot;: &quot;i am the king&quot;</span><br><span class="line">            },</span><br><span class="line">            &quot;post_date&quot;: &quot;2016-06-01 00:06:55&quot;,</span><br><span class="line">            &quot;post_content&quot;: &quot;&#x6211;&#x8BF4;&#x6240;&#x6709;&#x7684;&#x9152;&#xFF0C;&#x90FD;&#x4E0D;&#x5982;&#x4F60;&#x3002;\n @&#x5982;&#x5982;&quot;,</span><br><span class="line">            &quot;post_titile&quot;: &quot;none&quot;,</span><br><span class="line">            &quot;post_imgs&quot;: &quot;dream.mrpann.com/uploads/CR-ovrJjcbMgV.jpeg&quot;,</span><br><span class="line">            &quot;post_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_password&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_guid&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_type&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_count&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;metas&quot;: []</span><br><span class="line">        }</span><br><span class="line">     ]</span><br><span class="line"> }</span><br></pre></td></tr></table></figure></p>
<h4 id="5-&#x67E5;&#x8BE2;&#x67D0;&#x7528;&#x6237;&#x6240;&#x6709;&#x68A6;&#x60F3;"><a href="#5-&#x67E5;&#x8BE2;&#x67D0;&#x7528;&#x6237;&#x6240;&#x6709;&#x68A6;&#x60F3;" class="headerlink" title="5.&#x67E5;&#x8BE2;&#x67D0;&#x7528;&#x6237;&#x6240;&#x6709;&#x68A6;&#x60F3;"></a>5.&#x67E5;&#x8BE2;&#x67D0;&#x7528;&#x6237;&#x6240;&#x6709;&#x68A6;&#x60F3;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=list&amp;type=getDreamByAuthor&amp;id=2" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=list&amp;type=getDreamByAuthor&amp;id=2</a><br>get&#x53C2;&#x6570;&#xFF1A;<br>id&#xFF0C;&#x7528;&#x6237;id<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br>&#x793A;&#x4F8B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;44&quot;,</span><br><span class="line">            &quot;post_author&quot;: {</span><br><span class="line">                &quot;ID&quot;: &quot;5&quot;,</span><br><span class="line">                &quot;user_login&quot;: &quot;longchen&quot;,</span><br><span class="line">                &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">                &quot;user_nickname&quot;: &quot;&#x6F58;&#x5B89;&quot;,</span><br><span class="line">                &quot;user_img&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_phone&quot;: &quot;15574968443&quot;,</span><br><span class="line">                &quot;user_email&quot;: &quot;wslongchen@qq.com&quot;,</span><br><span class="line">                &quot;user_url&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_registered&quot;: &quot;2016-04-09 14:44:08&quot;,</span><br><span class="line">                &quot;user_activation_key&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">                &quot;user_display_name&quot;: &quot;i am the king&quot;</span><br><span class="line">            },</span><br><span class="line">            &quot;post_date&quot;: &quot;2016-06-01 00:06:55&quot;,</span><br><span class="line">            &quot;post_content&quot;: &quot;&#x6211;&#x8BF4;&#x6240;&#x6709;&#x7684;&#x9152;&#xFF0C;&#x90FD;&#x4E0D;&#x5982;&#x4F60;&#x3002;\n @&#x5982;&#x5982;&quot;,</span><br><span class="line">            &quot;post_titile&quot;: &quot;none&quot;,</span><br><span class="line">            &quot;post_imgs&quot;: &quot;dream.mrpann.com/uploads/CR-ovrJjcbMgV.jpeg&quot;,</span><br><span class="line">            &quot;post_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_password&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_guid&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_type&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_count&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;metas&quot;: []</span><br><span class="line">        }</span><br><span class="line">     ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="6-&#x83B7;&#x53D6;&#x968F;&#x673A;&#x68A6;&#x60F3;"><a href="#6-&#x83B7;&#x53D6;&#x968F;&#x673A;&#x68A6;&#x60F3;" class="headerlink" title="6.&#x83B7;&#x53D6;&#x968F;&#x673A;&#x68A6;&#x60F3;"></a>6.&#x83B7;&#x53D6;&#x968F;&#x673A;&#x68A6;&#x60F3;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=list&amp;type=getRandomDream" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=list&amp;type=getRandomDream</a><br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br>&#x793A;&#x4F8B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;41&quot;,</span><br><span class="line">            &quot;post_author&quot;: {</span><br><span class="line">                &quot;ID&quot;: &quot;5&quot;,</span><br><span class="line">                &quot;user_login&quot;: &quot;longchen&quot;,</span><br><span class="line">                &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">                &quot;user_nickname&quot;: &quot;&#x6F58;&#x5B89;&quot;,</span><br><span class="line">                &quot;user_img&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_phone&quot;: &quot;15574968443&quot;,</span><br><span class="line">                &quot;user_email&quot;: &quot;wslongchen@qq.com&quot;,</span><br><span class="line">                &quot;user_url&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_registered&quot;: &quot;2016-04-09 14:44:08&quot;,</span><br><span class="line">                &quot;user_activation_key&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">                &quot;user_display_name&quot;: &quot;i am the king&quot;</span><br><span class="line">            },</span><br><span class="line">            &quot;post_date&quot;: &quot;2016-05-31 23:56:23&quot;,</span><br><span class="line">            &quot;post_content&quot;: &quot;&#x6211;&#x8BF4;&#x6240;&#x6709;&#x7684;&#x9152;&#xFF0C;&#x90FD;&#x4E0D;&#x5982;&#x4F60;&#x3002;&quot;,</span><br><span class="line">            &quot;post_titile&quot;: &quot;none&quot;,</span><br><span class="line">            &quot;post_imgs&quot;: null,</span><br><span class="line">            &quot;post_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_password&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_guid&quot;: &quot;null&quot;,</span><br><span class="line">            &quot;post_type&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;post_comment_count&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;metas&quot;: [</span><br><span class="line">                {</span><br><span class="line">                    &quot;dpmeta_id&quot;: &quot;9&quot;,</span><br><span class="line">                    &quot;post_id&quot;: &quot;41&quot;,</span><br><span class="line">                    &quot;meta_key&quot;: &quot;hot_info&quot;,</span><br><span class="line">                    &quot;meta_value&quot;: &quot;1&quot;</span><br><span class="line">                },</span><br><span class="line">                {</span><br><span class="line">                    &quot;dpmeta_id&quot;: &quot;10&quot;,</span><br><span class="line">                    &quot;post_id&quot;: &quot;41&quot;,</span><br><span class="line">                    &quot;meta_key&quot;: &quot;device_info&quot;,</span><br><span class="line">                    &quot;meta_value&quot;: &quot;htc&quot;</span><br><span class="line">                },</span><br><span class="line">                {</span><br><span class="line">                    &quot;dpmeta_id&quot;: &quot;11&quot;,</span><br><span class="line">                    &quot;post_id&quot;: &quot;41&quot;,</span><br><span class="line">                    &quot;meta_key&quot;: &quot;location&quot;,</span><br><span class="line">                    &quot;meta_value&quot;: &quot;{\&quot;addr\&quot;:\&quot;&#x4E2D;&#x56FD;&#x6E56;&#x5357;&#x7701;&#x5F20;&#x5BB6;&#x754C;&#x5E02;&#x6C38;&#x5B9A;&#x533A;&#x5B50;&#x5348;&#x8DEF;\&quot;,\&quot;latitude\&quot;:\&quot;29.143375\&quot;,\&quot;lontitude\&quot;:\&quot;110.468211\&quot;}&quot;</span><br><span class="line">                }</span><br><span class="line">            ]</span><br><span class="line">        }</span><br><span class="line">     ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="7-&#x83B7;&#x53D6;&#x67D0;&#x6761;&#x68A6;&#x60F3;&#x8BC4;&#x8BBA;"><a href="#7-&#x83B7;&#x53D6;&#x67D0;&#x6761;&#x68A6;&#x60F3;&#x8BC4;&#x8BBA;" class="headerlink" title="7.&#x83B7;&#x53D6;&#x67D0;&#x6761;&#x68A6;&#x60F3;&#x8BC4;&#x8BBA;"></a>7.&#x83B7;&#x53D6;&#x67D0;&#x6761;&#x68A6;&#x60F3;&#x8BC4;&#x8BBA;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=comment&amp;type=getComment&amp;id=" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=comment&amp;type=getComment&amp;id=</a><br>get&#x53C2;&#x6570;&#xFF1A;<br>id&#xFF0C;&#x68A6;&#x60F3;id<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x793A;&#x4F8B;&#xFF1A;</span><br><span class="line">{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;2&quot;,</span><br><span class="line">            &quot;post_id&quot;: &quot;20&quot;,</span><br><span class="line">            &quot;comment_user_id&quot;: {</span><br><span class="line">                &quot;ID&quot;: &quot;5&quot;,</span><br><span class="line">                &quot;user_login&quot;: &quot;longchen&quot;,</span><br><span class="line">                &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">                &quot;user_nickname&quot;: &quot;&#x6F58;&#x5B89;&quot;,</span><br><span class="line">                &quot;user_img&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_phone&quot;: &quot;15574968443&quot;,</span><br><span class="line">                &quot;user_email&quot;: &quot;wslongchen@qq.com&quot;,</span><br><span class="line">                &quot;user_url&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_registered&quot;: &quot;2016-04-09 14:44:08&quot;,</span><br><span class="line">                &quot;user_activation_key&quot;: &quot;&quot;,</span><br><span class="line">                &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">                &quot;user_display_name&quot;: &quot;i am the king&quot;</span><br><span class="line">            },</span><br><span class="line">            &quot;comment_content&quot;: &quot;sounds good~&quot;,</span><br><span class="line">            &quot;comment_time&quot;: &quot;2016-05-09 17:59:26&quot;</span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="8-&#x5220;&#x9664;&#x4E00;&#x6761;&#x68A6;&#x60F3;"><a href="#8-&#x5220;&#x9664;&#x4E00;&#x6761;&#x68A6;&#x60F3;" class="headerlink" title="8.&#x5220;&#x9664;&#x4E00;&#x6761;&#x68A6;&#x60F3;"></a>8.&#x5220;&#x9664;&#x4E00;&#x6761;&#x68A6;&#x60F3;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=comment&amp;type=getComment&amp;id=" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=comment&amp;type=getComment&amp;id=</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>id&#xFF0C;&#x68A6;&#x60F3;id<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
<h3 id="&#x7528;&#x6237;"><a href="#&#x7528;&#x6237;" class="headerlink" title="&#x7528;&#x6237;"></a>&#x7528;&#x6237;</h3><h4 id="1-&#x6CE8;&#x518C;&#x7528;&#x6237;"><a href="#1-&#x6CE8;&#x518C;&#x7528;&#x6237;" class="headerlink" title="1.&#x6CE8;&#x518C;&#x7528;&#x6237;"></a>1.&#x6CE8;&#x518C;&#x7528;&#x6237;</h4><p>url:<a href="http://dream.mrpann.com/app.php?action=post&amp;type=user" target="_blank" rel="external">http://dream.mrpann.com/app.php?action=post&amp;type=user</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>name&#xFF0C;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>pass&#xFF0C;&#x5BC6;&#x7801;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>nickname&#xFF0C;&#x6635;&#x79F0;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>img&#xFF0C;&#x5934;&#x50CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>phone&#xFF0C;&#x7535;&#x8BDD;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>email&#xFF0C;&#x90AE;&#x7BB1;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>url&#xFF0C;&#x4E2A;&#x4EBA;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x7A7A;<br>registeredate&#xFF0C;&#x6CE8;&#x518C;&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>activation key&#xFF0C;&#x6FC0;&#x6D3B;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>status&#xFF0C;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0<br>displayname&#xFF0C;&#x7B7E;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
<h4 id="2-&#x7528;&#x6237;&#x767B;&#x9646;"><a href="#2-&#x7528;&#x6237;&#x767B;&#x9646;" class="headerlink" title="2.&#x7528;&#x6237;&#x767B;&#x9646;"></a>2.&#x7528;&#x6237;&#x767B;&#x9646;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=list&amp;type=loginUser&amp;name=xx&amp;password=xx" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=list&amp;type=loginUser&amp;name=xx&amp;password=xx</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>name&#xFF0C;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>password&#xFF0C;&#x5BC6;&#x7801;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x793A;&#x4F8B;&#xFF1A;</span><br><span class="line">{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;1&quot;,</span><br><span class="line">            &quot;user_login&quot;: &quot;wslongchen&quot;,</span><br><span class="line">            &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">            &quot;user_nickname&quot;: &quot;panan&quot;,</span><br><span class="line">            &quot;user_img&quot;: &quot;dream.mrpann.com/uploads/CR-iWwvmNwLjR.jpg&quot;,</span><br><span class="line">            &quot;user_phone&quot;: &quot;15574968433&quot;,</span><br><span class="line">            &quot;user_email&quot;: &quot;wslongchen@vip.qq.com&quot;,</span><br><span class="line">            &quot;user_url&quot;: null,</span><br><span class="line">            &quot;user_registered&quot;: &quot;2016-10-10 00:00:00&quot;,</span><br><span class="line">            &quot;user_activation_key&quot;: null,</span><br><span class="line">            &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;user_display_name&quot;: &quot;&#x6211;&#x8FD9;&#x8F88;&#x5B50;&#x6700;&#x7231;&#x7684;&#x4E00;&#x4E2A;&#x4EBA;&#x5979;&#x6709;&#x4E00;&#x4E2A;&#x597D;&#x542C;&#x7684;&#x540D;&#x5B57;&#x53EB;&#x505A;&#x7530;&#x5982;&#x7537;&#x3002;&quot;</span><br><span class="line">        }</span><br><span class="line">    ],</span><br><span class="line">    &quot;meta&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;dumeta_id&quot;: &quot;2&quot;,</span><br><span class="line">            &quot;user_id&quot;: &quot;1&quot;,</span><br><span class="line">            &quot;meta_key&quot;: &quot;headimg&quot;,</span><br><span class="line">            &quot;meta_value&quot;: &quot;dream.mrpann.com/uploads/CR-tzBIkrwKtI.jpeg&quot;</span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="3-&#x67E5;&#x8BE2;&#x7528;&#x6237;"><a href="#3-&#x67E5;&#x8BE2;&#x7528;&#x6237;" class="headerlink" title="3.&#x67E5;&#x8BE2;&#x7528;&#x6237;"></a>3.&#x67E5;&#x8BE2;&#x7528;&#x6237;</h4><p>url:<a href="http://dream.mrpann.com/index.php?action=list&amp;type=getUserByID&amp;id=1" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=list&amp;type=getUserByID&amp;id=1</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>id&#xFF0C;&#x7528;&#x6237;id&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br>&#x793A;&#x4F8B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    &quot;ret&quot;: 0,</span><br><span class="line">    &quot;post&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;ID&quot;: &quot;1&quot;,</span><br><span class="line">            &quot;user_login&quot;: &quot;wslongchen&quot;,</span><br><span class="line">            &quot;user_pass&quot;: &quot;662e0103accf08eecbefc3d51302d182&quot;,</span><br><span class="line">            &quot;user_nickname&quot;: &quot;panan&quot;,</span><br><span class="line">            &quot;user_img&quot;: &quot;dream.mrpann.com/uploads/CR-iWwvmNwLjR.jpg&quot;,</span><br><span class="line">            &quot;user_phone&quot;: &quot;15574968433&quot;,</span><br><span class="line">            &quot;user_email&quot;: &quot;wslongchen@vip.qq.com&quot;,</span><br><span class="line">            &quot;user_url&quot;: null,</span><br><span class="line">            &quot;user_registered&quot;: &quot;2016-10-10 00:00:00&quot;,</span><br><span class="line">            &quot;user_activation_key&quot;: null,</span><br><span class="line">            &quot;user_status&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;user_display_name&quot;: &quot;&#x6211;&#x8FD9;&#x8F88;&#x5B50;&#x6700;&#x7231;&#x7684;&#x4E00;&#x4E2A;&#x4EBA;&#x5979;&#x6709;&#x4E00;&#x4E2A;&#x597D;&#x542C;&#x7684;&#x540D;&#x5B57;&#x53EB;&#x505A;&#x7530;&#x5982;&#x7537;&#x3002;&quot;</span><br><span class="line">        }</span><br><span class="line">    ],</span><br><span class="line">    &quot;meta&quot;: [</span><br><span class="line">        {</span><br><span class="line">            &quot;dumeta_id&quot;: &quot;2&quot;,</span><br><span class="line">            &quot;user_id&quot;: &quot;1&quot;,</span><br><span class="line">            &quot;meta_key&quot;: &quot;headimg&quot;,</span><br><span class="line">            &quot;meta_value&quot;: &quot;dream.mrpann.com/uploads/CR-tzBIkrwKtI.jpeg&quot;</span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>4.&#x66F4;&#x6539;&#x4E2A;&#x6027;&#x7B7E;&#x540D;<br>url:<a href="http://dream.mrpann.com/index.php?action=update&amp;type=sign" target="_blank" rel="external">http://dream.mrpann.com/index.php?action=update&amp;type=sign</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>sign&#xFF0C;&#x7B7E;&#x540D;&#x5185;&#x5BB9;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>id&#xFF0C;&#x7528;&#x6237;id&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;<br>5.&#x66F4;&#x6539;&#x7528;&#x6237;&#x5934;&#x50CF;<br>url:<a href="http://dream.mrpann.com/allpost.php?action=updateUserImg" target="_blank" rel="external">http://dream.mrpann.com/allpost.php?action=updateUserImg</a><br>&#x8F93;&#x5165;&#x53C2;&#x6570;&#xFF1A;<br>id&#xFF0C;&#x7528;&#x6237;id&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>file0&#xFF0C;&#x56FE;&#x50CF;&#x6587;&#x4EF6;&#xFF0C;file&#x683C;&#x5F0F;&#xFF0C;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;<br>&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#xFF1A;<br>ret 0&#x4E3A;&#x6210;&#x529F;&#xFF0C;1&#x4E3A;&#x5931;&#x8D25;<br>post &#x63D0;&#x793A;&#x5185;&#x5BB9;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安卓图片高斯模糊(通过jni方式实现)]]></title>
      <url>http://blog.mrpann.com/2016/06/15/%E5%AE%89%E5%8D%93%E5%9B%BE%E7%89%87%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A-%E9%80%9A%E8%BF%87jni%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<h1 id="&#x5B89;&#x5353;&#x56FE;&#x7247;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;-&#x901A;&#x8FC7;jni&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;"><a href="#&#x5B89;&#x5353;&#x56FE;&#x7247;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;-&#x901A;&#x8FC7;jni&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;" class="headerlink" title="&#x5B89;&#x5353;&#x56FE;&#x7247;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;(&#x901A;&#x8FC7;jni&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;)"></a>&#x5B89;&#x5353;&#x56FE;&#x7247;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;(&#x901A;&#x8FC7;jni&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;)</h1><hr>
<p>&#x5728;&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x4E2D;&#x5F88;&#x591A;&#x5730;&#x65B9;&#x7528;&#x5230;&#x4E86;&#x56FE;&#x7247;&#x6A21;&#x7CCA;&#xFF0C;&#x4F46;&#x662F;&#x5F80;&#x5F80;&#x4F7F;&#x7528;&#x975E;navie&#x5C42;&#x7684;&#x4EE3;&#x7801;&#x901F;&#x5EA6;&#x603B;&#x662F;&#x4E0D;&#x5C3D;&#x4EBA;&#x610F;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x56FE;&#x7247;&#x7A0D;&#x5FAE;&#x5927;&#x4E00;&#x70B9;&#x6216;&#x8005;&#x4E0D;&#x5927;&#x7ED8;&#x5236;&#x65F6;&#x95F4;&#x90FD;&#x57FA;&#x672C;&#x4E0A;&#x5927;&#x4E8E;16ms&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x4F1A;&#x7ED9;&#x4EBA;&#x4E00;&#x79CD;&#x201C;&#x5361;&#x987F;&#x201D;&#x7684;&#x611F;&#x89C9;&#x3002;&#x6240;&#x4EE5;&#x7279;&#x5730;&#x53BB;&#x7F51;&#x4E0A;&#x627E;&#x4E86;&#x4E2A;c&#x8279;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x901A;&#x8FC7;jni&#x8C03;&#x7528;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x4E0E;&#x5B89;&#x5353;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x4E00;&#x4E0B;&#xFF0C;&#x867D;&#x8BF4;&#x5728;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x8FC7;&#x540E;&#x597D;&#x50CF;&#x4E24;&#x8005;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x663E;&#x8457;&#x4E0D;&#x540C;&#x3002;<br><a id="more"></a><br>&#x6211;&#x7684;&#x73AF;&#x5883;&#x662F;android studio&#xFF0C;Mac os 10.11<br>&#x914D;&#x7F6E;&#x597D;ndk&#x73AF;&#x5883;&#x540E;&#xFF0C;&#x522B;&#x5FD8;&#x8BB0;&#x5728;gradle.properties&#x672B;&#x52A0;&#x4E0A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.useDeprecatedNdk=true</span><br></pre></td></tr></table></figure></p>
<p>&#x9996;&#x5148;&#x5728;&#x7C7B;&#x91CC;&#x9762;&#x5199;&#x597D;navie&#x65B9;&#x6CD5;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&#x539F;&#x59CB;&#x7684;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA; &#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">initCBlur1</span><span class="params">(<span class="keyword">int</span>[] pix, <span class="keyword">int</span> w ,<span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x5229;&#x7528;&#x5747;&#x503C;&#x6A21;&#x7CCA;&#x8FDB;&#x884C;&#x62DF;&#x5408; &#x9AD8;&#x65AF;&#x6A21;&#x7CCA;</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">initCBlur2</span><span class="params">(<span class="keyword">int</span>[] pix, <span class="keyword">int</span> w ,<span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x65B9;&#x6CD5;&#x540D;&#x4F1A;&#x7206;&#x7EA2;&#xFF0C;&#x4E0D;&#x8981;&#x7BA1;&#x5B83;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x5728;.so&#x6587;&#x4EF6;&#x4E2D;&#x5339;&#x914D;&#x4E0D;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x3002;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x6253;&#x5F00;terminal&#xFF0C;cd&#x5230;&#x9879;&#x76EE;jni&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x8F93;&#x5165;&#x4E00;&#x4E0B;&#x8BED;&#x53E5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javah com.example.mrpan.gaosimohu.BitmapUtils</span><br></pre></td></tr></table></figure></p>
<p>bitmaoutils&#x662F;navie&#x65B9;&#x6CD5;&#x6240;&#x5728;&#x7684;&#x6587;&#x4EF6;&#x3002;<br>&#x63A5;&#x7740;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5728;jni&#x76EE;&#x5F55;&#x4E0B;&#x591A;&#x4E86;&#x4E00;&#x4E2A;.h&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x662F;&#x5B83;&#x6307;&#x5F15;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x4E66;&#x5199;c/c++&#x65B9;&#x6CD5;&#x7684;&#x5934;&#x6587;&#x4EF6;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5F53;&#x4F5C;&#x662F;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x6587;&#x4EF6;&#xFF0C;<br>&#x8D34;&#x4E0A;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;jni.h&gt;</span><br><span class="line">/* Header for class com_example_mrpan_gaosimohu_BitmapUtils */</span><br><span class="line"></span><br><span class="line">#ifndef _Included_com_example_mrpan_gaosimohu_BitmapUtils</span><br><span class="line">#define _Included_com_example_mrpan_gaosimohu_BitmapUtils</span><br><span class="line">#ifdef __cplusplus</span><br><span class="line">extern &quot;C&quot; {</span><br><span class="line">#endif</span><br><span class="line">/*</span><br><span class="line"> * Class:     com_example_mrpan_gaosimohu_BitmapUtils</span><br><span class="line"> * Method:    initCBlur1</span><br><span class="line"> * Signature: ([IIII)V</span><br><span class="line"> */</span><br><span class="line">JNIEXPORT void JNICALL Java_com_example_mrpan_gaosimohu_BitmapUtils_initCBlur1</span><br><span class="line">  (JNIEnv *, jobject, jintArray, jint, jint, jint);</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Class:     com_example_mrpan_gaosimohu_BitmapUtils</span><br><span class="line"> * Method:    initCBlur2</span><br><span class="line"> * Signature: ([IIII)V</span><br><span class="line"> */</span><br><span class="line">JNIEXPORT void JNICALL Java_com_example_mrpan_gaosimohu_BitmapUtils_initCBlur2</span><br><span class="line">  (JNIEnv *, jobject, jintArray, jint, jint, jint);</span><br><span class="line"></span><br><span class="line">#ifdef __cplusplus</span><br><span class="line">}</span><br><span class="line">#endif</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure></p>
<p>&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x540D;&#x5FC5;&#x987B;&#x8981;&#x548C;c&#x8279;&#x91CC;&#x9762;&#x7533;&#x660E;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x4E00;&#x81F4;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x65E0;&#x6CD5;&#x6548;&#x3002;<br>&#x5728;jni&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;c&#x8279;&#x6E90;&#x6587;&#x4EF6;&#xFF0C;blur.cpp&#x3002;<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by &#x6F58;&#x5B89; on 16/6/15.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;jni.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;android/log.h&gt;</span></span></span><br><span class="line"><span class="comment">//#include &quot;../../../../../android-ndk-r10d/platforms/android-21/arch-arm/usr/include/malloc.h&quot;</span></span><br><span class="line"><span class="comment">//#include &quot;../../../../../android-ndk-r10d/platforms/android-21/arch-arm/usr/include/string.h&quot;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  LOG_TAG    <span class="string">&quot;myblur&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.1415926</span></span><br><span class="line"><span class="comment">/*jstring Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env, jobject thiz )</span><br><span class="line">{</span><br><span class="line">    return (*env)-&gt;NewStringUTF(env, &quot;Hello from JNI !  Compiled with ABI&quot;);</span><br><span class="line">}*/</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> {</span><br><span class="line"><span class="comment">//LOGD(&quot;jni %d:  %lf&quot;, i, amplitude[i]);</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gaussBlur1</span><span class="params">(<span class="keyword">int</span>* pix, <span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> radius)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">float</span> sigma =  <span class="number">1.0</span> * radius / <span class="number">2.57</span>;	<span class="comment">//2.57 * sigam&#x534A;&#x5F84;&#x4E4B;&#x540E;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x8D21;&#x732E; &#x6240;&#x4EE5;&#x53D6;sigma&#x4E3A; r / 2.57</span></span><br><span class="line">    <span class="keyword">float</span> deno  =  <span class="number">1.0</span> / (sigma * sqrt(<span class="number">2.0</span> * PI));</span><br><span class="line">    <span class="keyword">float</span> nume  = <span class="number">-1.0</span> / (<span class="number">2.0</span> * sigma * sigma);</span><br><span class="line">    <span class="comment">//&#x9AD8;&#x65AF;&#x5206;&#x5E03;&#x4EA7;&#x751F;&#x7684;&#x6570;&#x7EC4;</span></span><br><span class="line">    <span class="keyword">float</span>* gaussMatrix = (float*)<span class="built_in">malloc</span>(sizeof(float)* (radius + radius + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">float</span> gaussSum = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, x = -radius; x &lt;= radius; ++x, ++i)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">float</span> g = deno * <span class="built_in">exp</span>(<span class="number">1.0</span> * nume * x * x);</span><br><span class="line">        gaussMatrix[i] = g;</span><br><span class="line">        gaussSum += g;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x5F52;1&#x8BDD;</span></span><br><span class="line">    <span class="keyword">int</span> len = radius + radius + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</span><br><span class="line">        gaussMatrix[i] /= gaussSum;</span><br><span class="line">    <span class="comment">//&#x4E34;&#x65F6;&#x5B58;&#x50A8; &#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;</span></span><br><span class="line">    <span class="keyword">int</span>* rowData  = (int*)<span class="built_in">malloc</span>(w * sizeof(int));</span><br><span class="line">    <span class="keyword">int</span>* listData = (int*)<span class="built_in">malloc</span>(h * sizeof(int));</span><br><span class="line">    <span class="comment">//x&#x65B9;&#x5411;&#x7684;&#x6A21;&#x7CCA;</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; h; ++y)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//&#x62F7;&#x8D1D;&#x4E00;&#x884C;&#x6570;&#x636E;</span></span><br><span class="line">        <span class="built_in">memcpy</span>(rowData, pix + y * w, <span class="keyword">sizeof</span>(int) * w);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; w; ++x)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">float</span> r = <span class="number">0</span>, g = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">            gaussSum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = -radius; i &lt;= radius; ++i)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">int</span> k = x + i;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> &lt;= k &amp;&amp; k &lt;= w)</span><br><span class="line">                {</span><br><span class="line">                    <span class="comment">//&#x5F97;&#x5230;&#x50CF;&#x7D20;&#x70B9;&#x7684;rgb&#x503C;</span></span><br><span class="line">                    <span class="keyword">int</span> color = rowData[k];</span><br><span class="line">                    <span class="keyword">int</span> cr = (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">                    <span class="keyword">int</span> cg = (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">                    <span class="keyword">int</span> cb = (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">                    r += cr * gaussMatrix[i + radius];</span><br><span class="line">                    g += cg * gaussMatrix[i + radius];</span><br><span class="line">                    b += cb * gaussMatrix[i + radius];</span><br><span class="line">                    gaussSum += gaussMatrix[i + radius];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> cr = (int)(r / gaussSum);</span><br><span class="line">            <span class="keyword">int</span> cg = (int)(g / gaussSum);</span><br><span class="line">            <span class="keyword">int</span> cb = (int)(b / gaussSum);</span><br><span class="line">            pix[y * w + x] = cr &lt;&lt; <span class="number">16</span> | cg &lt;&lt; <span class="number">8</span> | cb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; w; ++x)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">//&#x62F7;&#x8D1D; &#x4E00;&#x5217; &#x6570;&#x636E;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; h; ++y)</span><br><span class="line">            listData[y] = pix[y * w + x];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; h; ++y)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">float</span> r = <span class="number">0</span>, g = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">            gaussSum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = -radius; j &lt;= radius; ++j)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">int</span> k = y + j;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> &lt;= k &amp;&amp; k &lt;= h)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">int</span> color = listData[k];</span><br><span class="line">                    <span class="keyword">int</span> cr = (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">                    <span class="keyword">int</span> cg = (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">                    <span class="keyword">int</span> cb = (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">                    r += cr * gaussMatrix[j + radius];</span><br><span class="line">                    g += cg * gaussMatrix[j + radius];</span><br><span class="line">                    b += cb * gaussMatrix[j + radius];</span><br><span class="line">                    gaussSum += gaussMatrix[j + radius];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> cr = (int)(r / gaussSum);</span><br><span class="line">            <span class="keyword">int</span> cg = (int)(g / gaussSum);</span><br><span class="line">            <span class="keyword">int</span> cb = (int)(b / gaussSum);</span><br><span class="line">            pix[y * w + x] = cr &lt;&lt; <span class="number">16</span> | cg &lt;&lt; <span class="number">8</span> | cb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//&#x6E05;&#x7406;&#x5185;&#x5B58;</span></span><br><span class="line">    <span class="built_in">free</span>(gaussMatrix);</span><br><span class="line">    <span class="built_in">free</span>(rowData);</span><br><span class="line">    <span class="built_in">free</span>(listData);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//&#x5229;&#x7528;3&#x4E2A;&#x5747;&#x503C;&#x6A21;&#x7CCA; &#x62DF;&#x5408; &#x9AD8;&#x65AF;&#x6A21;&#x7CCA;</span></span><br><span class="line"><span class="comment">//&#x53C2;&#x8003;&#xFF1A;http://blog.ivank.net/fastest-gaussian-blur.html</span></span><br><span class="line"><span class="comment">//&#x6A2A;&#x5411;&#x7684;&#x5747;&#x503C;&#x6A21;&#x7CCA; srcPix&#xFF1A;&#x539F;&#x59CB;&#x7684;&#x50CF;&#x7D20;&#x503C; destPix&#x5C06;&#x5904;&#x7406;&#x8FC7;&#x7684;&#x50CF;&#x7D20;&#x503C;&#x653E;&#x5165;&#x5230; destPix&#x4E2D;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">boxBlurH</span><span class="params">(<span class="keyword">int</span>* srcPix, <span class="keyword">int</span>* destPix, <span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> radius)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="comment">//&#x7528;&#x4E8E;&#x7D22;&#x5F15;</span></span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    <span class="comment">//r g b&#x5728;&#x904D;&#x5386;&#x662F; &#x7D2F;&#x52A0;&#x7684;&#x8272;&#x5F69;&#x901A;&#x9053;&#x7684;&#x603B;&#x548C;</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>, r = <span class="number">0</span>, g = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> ta, tr, tg, tb;	<span class="comment">//&#x4E34;&#x65F6;&#x53D8;&#x91CF;</span></span><br><span class="line">    <span class="comment">//&#x4E34;&#x65F6;&#x53D8;&#x91CF;</span></span><br><span class="line">    <span class="keyword">int</span> color;</span><br><span class="line">    <span class="keyword">int</span> preColor;</span><br><span class="line">    <span class="comment">//&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x6743;&#x503C; 1 / num</span></span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">float</span> iarr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; h; ++i)</span><br><span class="line">    {</span><br><span class="line">        r = <span class="number">0</span>;</span><br><span class="line">        g = <span class="number">0</span>;</span><br><span class="line">        b = <span class="number">0</span>;</span><br><span class="line">        index = i * w;</span><br><span class="line">        num = radius;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; radius; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//&#x7D2F;&#x52A0;0,radius-1&#x7684;&#x8272;&#x5F69;&#x7684;&#x603B;&#x548C;</span></span><br><span class="line">            color = srcPix[index + j];</span><br><span class="line">            <span class="comment">//a += (color &amp; 0xff000000) &gt;&gt; 24;</span></span><br><span class="line">            r += (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g += (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b += (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//&#x771F;&#x6B63;&#x5F00;&#x59CB;&#x8BA1;&#x7B97;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= radius; ++j)</span><br><span class="line">        {</span><br><span class="line">            num++;</span><br><span class="line">            iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">            color = srcPix[index + j + radius];</span><br><span class="line">            <span class="comment">//a += (color &amp; 0xff000000) &gt;&gt; 24;</span></span><br><span class="line">            r += (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g += (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b += (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            <span class="comment">//ta = (int)(1.0 * a / num);</span></span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line">            destPix[index + j] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = radius + <span class="number">1</span>; j &lt; w - radius; ++j)</span><br><span class="line">        {</span><br><span class="line">            preColor = srcPix[index + j - <span class="number">1</span> - radius];</span><br><span class="line">            color = srcPix[index + j + radius];</span><br><span class="line">            <span class="comment">//a += (color &amp; 0xff000000) &gt;&gt; 24 - (preColor &amp; 0xff000000) &gt;&gt; 24;</span></span><br><span class="line">            r = r + ((color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>) - ((preColor &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>);</span><br><span class="line">            g = g + ((color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>)  - ((preColor &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>);</span><br><span class="line">            b = b +  (color &amp; <span class="number">0x000000ff</span>)        -  (preColor &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            <span class="comment">//ta = (int)(1.0 * a / num);</span></span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line">            destPix[index + j] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = w - radius; j &lt; w; ++j)</span><br><span class="line">        {</span><br><span class="line">            num--;</span><br><span class="line">            iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">            preColor = srcPix[index + j - <span class="number">1</span> - radius];</span><br><span class="line">            <span class="comment">//a -= (preColor &amp; 0xff000000) &gt;&gt; 24;</span></span><br><span class="line">            r -= (preColor &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g -= (preColor &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b -= (preColor &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            <span class="comment">//ta = (int)(1.0 * a / num);</span></span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line">            <span class="comment">//destPix[index + j] = (ta &lt;&lt; 24 | tr &lt;&lt; 16 | tg &lt;&lt; 8 | tb);</span></span><br><span class="line">            destPix[index + j] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x5217;&#x7684;&#x5747;&#x503C;&#x6A21;&#x7CCA; srcPix&#xFF1A;&#x539F;&#x59CB;&#x7684;&#x50CF;&#x7D20;&#x503C; destPix&#x5C06;&#x5904;&#x7406;&#x8FC7;&#x7684;&#x50CF;&#x7D20;&#x503C;&#x653E;&#x5165;&#x5230; destPix&#x4E2D;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">boxBlurV</span><span class="params">(<span class="keyword">int</span>* srcPix, <span class="keyword">int</span>* destPix, <span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> radius)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="comment">//r g b&#x5728;&#x904D;&#x5386;&#x662F; &#x7D2F;&#x52A0;&#x7684;&#x8272;&#x5F69;&#x901A;&#x9053;&#x7684;&#x603B;&#x548C;</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>, r = <span class="number">0</span>, g = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> ta, tr, tg, tb;	<span class="comment">//&#x4E34;&#x65F6;&#x53D8;&#x91CF;</span></span><br><span class="line">    <span class="comment">//&#x4E34;&#x65F6;&#x53D8;&#x91CF;</span></span><br><span class="line">    <span class="keyword">int</span> color;</span><br><span class="line">    <span class="keyword">int</span> preColor;</span><br><span class="line">    <span class="comment">//&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x6743;&#x503C; 1 / num</span></span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">float</span> iarr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w; ++i)</span><br><span class="line">    {</span><br><span class="line">        r = <span class="number">0</span>;</span><br><span class="line">        g = <span class="number">0</span>;</span><br><span class="line">        b = <span class="number">0</span>;</span><br><span class="line">        num = radius;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; radius; ++j)</span><br><span class="line">        {</span><br><span class="line">            color = srcPix[j*w + i];</span><br><span class="line">            r += (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g += (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b += (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= radius; ++j)</span><br><span class="line">        {</span><br><span class="line">            num++;</span><br><span class="line">            iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">            color = srcPix[(j + radius) * w + i];</span><br><span class="line">            r += (color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g += (color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b += (color &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line">            destPix[j*w + i] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = radius + <span class="number">1</span>; j &lt; h - radius; ++j)</span><br><span class="line">        {</span><br><span class="line">            preColor = srcPix[(j - radius - <span class="number">1</span>) * w + i];</span><br><span class="line">            color = srcPix[(j + radius) * w + i];</span><br><span class="line">            r = r + ((color &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>) - ((preColor &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>);</span><br><span class="line">            g = g + ((color &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>)  - ((preColor &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>);</span><br><span class="line">            b = b + (color &amp; <span class="number">0x000000ff</span>)       - (preColor &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line">            destPix[j*w + i] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = h - radius; j &lt; h; ++j)</span><br><span class="line">        {</span><br><span class="line">            num--;</span><br><span class="line">            iarr = <span class="number">1.0</span> / (<span class="number">1.0</span> * num);</span><br><span class="line">            preColor = srcPix[(j - radius - <span class="number">1</span>) * w + i];</span><br><span class="line">            r -= (preColor &amp; <span class="number">0x00ff0000</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">            g -= (preColor &amp; <span class="number">0x0000ff00</span>) &gt;&gt; <span class="number">8</span>;</span><br><span class="line">            b -= (preColor &amp; <span class="number">0x000000ff</span>);</span><br><span class="line">            tr = (int)(r * iarr);</span><br><span class="line">            tg = (int)(g * iarr);</span><br><span class="line">            tb = (int)(b * iarr);</span><br><span class="line"></span><br><span class="line">            destPix[j*w + i] = tr &lt;&lt; <span class="number">16</span> | tg &lt;&lt; <span class="number">8</span> | tb | <span class="number">0xff000000</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">boxBlur</span><span class="params">(<span class="keyword">int</span>* srcPix, <span class="keyword">int</span>* destPix, <span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">if</span> (r &lt; <span class="number">0</span>)</span><br><span class="line">    {</span><br><span class="line">        LOGD(<span class="string">&quot;boxBlur r &lt; 0: %d&quot;</span>, r);</span><br><span class="line">        return;</span><br><span class="line">    }</span><br><span class="line">    boxBlurH(srcPix, destPix, w, h, r);</span><br><span class="line">    boxBlurV(destPix, srcPix, w, h, r);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x9886;&#x7528;n &#x4E2A; box &#x62DF;&#x5408; sigma&#x7684;&#x9AD8;&#x65AF;&#x51FD;&#x6570;</span></span><br><span class="line"><span class="comment">//&#x53C2;&#x8003;&#xFF1A;http://www.csse.uwa.edu.au/~pk/research/pkpapers/FastGaussianSmoothing.pdf</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">boxesForGauss</span><span class="params">(<span class="keyword">float</span> sigma, <span class="keyword">int</span>* size, <span class="keyword">int</span> n)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">float</span> wIdeal = <span class="built_in">sqrt</span>(<span class="number">12.0</span> * sigma * sigma / n + <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">int</span> wl = <span class="built_in">floor</span>(wIdeal);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> == wl % <span class="number">2</span>)</span><br><span class="line">        wl--;</span><br><span class="line">    <span class="keyword">int</span> wu = wl + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">float</span> mIdeal = (<span class="number">12.0</span> * sigma * sigma - n * wl * wl - <span class="number">4</span> * n * wl - <span class="number">3</span> * n) / (<span class="number">-4</span> * wl - <span class="number">4</span>);</span><br><span class="line">    <span class="keyword">int</span> m = round(mIdeal);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        size[i] = (i &lt; m ? wl : wu);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gaussBlur2</span><span class="params">(<span class="keyword">int</span>* pix, <span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">float</span> sigma = <span class="number">1.0</span> * r / <span class="number">2.57</span>;	<span class="comment">//2.57 *sigam&#x534A;&#x5F84;&#x4E4B;&#x540E;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x8D21;&#x732E; &#x6240;&#x4EE5;&#x53D6;sigma&#x4E3A; r / 2.57</span></span><br><span class="line">    <span class="keyword">int</span> boxSize = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span>* boxR = (int*)<span class="built_in">malloc</span>(sizeof(int) * boxSize);	<span class="comment">//&#x9700;&#x8981;&#x7684;&#x4E2A;&#x6570;</span></span><br><span class="line">    <span class="comment">//&#x8BA1;&#x7B97;&#x62DF;&#x5408;&#x7684;&#x534A;&#x5F84;</span></span><br><span class="line">    boxesForGauss(sigma, boxR, boxSize);</span><br><span class="line">    <span class="keyword">int</span>* tempPix = (int*)<span class="built_in">malloc</span>(sizeof(int) * w * h);</span><br><span class="line">    boxBlur(pix, tempPix, w, h, (boxR[<span class="number">0</span>] - <span class="number">1</span>) / <span class="number">2</span>);</span><br><span class="line">    boxBlur(pix, tempPix, w, h, (boxR[<span class="number">1</span>] - <span class="number">1</span>) / <span class="number">2</span>);</span><br><span class="line">    boxBlur(pix, tempPix, w, h, (boxR[<span class="number">2</span>] - <span class="number">1</span>) / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//&#x6E05;&#x7406;&#x5185;&#x5B58;</span></span><br><span class="line">    <span class="built_in">free</span>(boxR);</span><br><span class="line">    <span class="built_in">free</span>(tempPix);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Java_com_example_mrpan_gaosimohu_BitmapUtils_initCBlur1</span><span class="params">(JNIEnv* env,jobject obj,jintArray pix,jint w,jint h,jint r)</span></span><br><span class="line"></span>{</span><br><span class="line">    gaussBlur1(env-&gt;GetIntArrayElements(pix, NULL), w, h, r);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Java_com_example_mrpan_gaosimohu_BitmapUtils_initCBlur2</span><span class="params">(JNIEnv* env,jobject obj,jintArray pix,jint w,jint h,jint r)</span></span><br><span class="line"></span>{</span><br><span class="line">    gaussBlur2(env-&gt;GetIntArrayElements(pix, NULL), w, h, r);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6267;&#x884C;android.mk&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x4FBF;&#x6211;&#x4EEC;&#x751F;&#x6210;.so&#x6587;&#x4EF6;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_PATH := $(call my-dir)</span><br><span class="line">include $(CLEAR_VARS)</span><br><span class="line">LOCAL_MODULE    := myBlur</span><br><span class="line">LOCAL_SRC_FILES := myBlur.cpp</span><br><span class="line">LOCAL_LDLIBS += -lc -lm -llog</span><br><span class="line">include $(BUILD_SHARED_LIBRARY)</span><br></pre></td></tr></table></figure></p>
<p>&#x70B9;&#x5F00;&#x7EC8;&#x7AEF;&#x6267;&#x884C;<code>ndk-build</code>&#x547D;&#x4EE4;&#x3002;<br>&#x5982;&#x82E5;&#x6CA1;&#x6709;&#x51FA;&#x9519;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x76EE;&#x5F55;&#x4E0B;&#x591A;&#x4E86;obj&#x4EE5;&#x53CA;libs&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6253;&#x5F00;&#x5C31;&#x80FD;&#x770B;&#x5230;.so&#x6587;&#x4EF6;&#x4E86;&#x3002;<br>&#x5F53;&#x4E2D;&#x5982;&#x679C;&#x51FA;&#x9519;&#xFF0C;&#x63D0;&#x793A;c++&#x6E90;&#x6587;&#x4EF6;&#x4E2D;&#x7206;&#x7EA2;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x5728;jni&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF0C;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;Application.mk<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#APP_STL:=stlport_static</span><br><span class="line">APP_STL := gnustl_static</span><br><span class="line">APP_STL :=stlport_static</span><br></pre></td></tr></table></figure></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;navie&#x65B9;&#x6CD5;&#x4E0D;&#x7206;&#x7EA2;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x80FD;&#x7F16;&#x5199;&#x76F8;&#x5E94;&#x7684;&#x6A21;&#x7CCA;&#x4EE3;&#x7801;&#x4E86;&#x3002;bitmaputils<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by mrpan on 16/6/15.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BitmapUtils</span> </span>{</span><br><span class="line">    <span class="comment">//&#x5206;&#x522B;&#x5728;x&#x8F74; &#x548C; y&#x8F74;&#x65B9;&#x5411;&#x4E0A;&#x8FDB;&#x884C;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">gaussBlur1</span><span class="params">(Bitmap bitmap, <span class="keyword">int</span> radius)</span></span><br><span class="line">    </span>{</span><br><span class="line">        <span class="keyword">int</span> w = bitmap.getWidth();</span><br><span class="line">        <span class="keyword">int</span> h = bitmap.getHeight();</span><br><span class="line">        <span class="comment">//&#x751F;&#x6210;&#x4E00;&#x5F20;&#x65B0;&#x7684;&#x56FE;&#x7247;</span></span><br><span class="line">        Bitmap outBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);</span><br><span class="line">        <span class="comment">//&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#x539F;&#x59CB;&#x56FE;&#x7247;&#x7684;&#x50CF;&#x7D20; &#x503C;</span></span><br><span class="line">        <span class="keyword">int</span>[] pix = <span class="keyword">new</span> <span class="keyword">int</span>[w * h];</span><br><span class="line">        <span class="comment">//&#x5C06;&#x56FE;&#x7247;&#x50CF;&#x7D20;&#x503C;&#x5199;&#x5165;&#x6570;&#x7EC4;</span></span><br><span class="line">        bitmap.getPixels(pix, <span class="number">0</span>, w, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">        <span class="comment">//&#x8FDB;&#x884C;&#x6A21;&#x7CCA;</span></span><br><span class="line">        initCBlur1(pix, w, h, radius);</span><br><span class="line">        <span class="comment">//&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; &#x56FE;&#x7247;</span></span><br><span class="line">        outBitmap.setPixels(pix, <span class="number">0</span>, w, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">        <span class="comment">//&#x8FD4;&#x56DE;&#x7ED3;&#x679C;</span></span><br><span class="line">        <span class="keyword">return</span> outBitmap;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x5229;&#x7528;&#x5747;&#x503C;&#x6A21;&#x7CCA; &#x903C;&#x8FD1; &#x9AD8;&#x65AF;&#x6A21;&#x7CCA;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">gaussBlur2</span><span class="params">(Bitmap bitmap, <span class="keyword">int</span> radius)</span></span><br><span class="line">    </span>{</span><br><span class="line">        <span class="keyword">int</span> w = bitmap.getWidth();</span><br><span class="line">        <span class="keyword">int</span> h = bitmap.getHeight();</span><br><span class="line">        <span class="comment">//&#x751F;&#x6210;&#x4E00;&#x5F20;&#x65B0;&#x7684;&#x56FE;&#x7247;</span></span><br><span class="line">        Bitmap outBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);</span><br><span class="line">        <span class="comment">//&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#x539F;&#x59CB;&#x56FE;&#x7247;&#x7684;&#x50CF;&#x7D20; &#x503C;</span></span><br><span class="line">        <span class="keyword">int</span>[] pix = <span class="keyword">new</span> <span class="keyword">int</span>[w * h];</span><br><span class="line">        <span class="comment">//&#x5C06;&#x56FE;&#x7247;&#x50CF;&#x7D20;&#x503C;&#x5199;&#x5165;&#x6570;&#x7EC4;</span></span><br><span class="line">        bitmap.getPixels(pix, <span class="number">0</span>, w, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">        <span class="comment">//&#x8FDB;&#x884C;&#x6A21;&#x7CCA;</span></span><br><span class="line">        initCBlur2(pix, w, h, radius);</span><br><span class="line">        <span class="comment">//&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; &#x56FE;&#x7247;</span></span><br><span class="line">        outBitmap.setPixels(pix, <span class="number">0</span>, w, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">        <span class="comment">//&#x8FD4;&#x56DE;&#x7ED3;&#x679C;</span></span><br><span class="line">        <span class="keyword">return</span> outBitmap;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x539F;&#x59CB;&#x7684;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA; &#x65B9;&#x6CD5;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">initCBlur1</span><span class="params">(<span class="keyword">int</span>[] pix, <span class="keyword">int</span> w ,<span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x5229;&#x7528;&#x5747;&#x503C;&#x6A21;&#x7CCA;&#x8FDB;&#x884C;&#x62DF;&#x5408; &#x9AD8;&#x65AF;&#x6A21;&#x7CCA;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">initCBlur2</span><span class="params">(<span class="keyword">int</span>[] pix, <span class="keyword">int</span> w ,<span class="keyword">int</span> h, <span class="keyword">int</span> r)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x52A0;&#x8F7D;native&#x6A21;&#x5757;</span></span><br><span class="line">    <span class="keyword">static</span></span><br><span class="line">    {</span><br><span class="line">        System.loadLibrary(<span class="string">&quot;myBlur&quot;</span>);</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x5927;&#x529F;&#x544A;&#x6210;&#x4E86;&#x3002;&#x8BB0;&#x5F97;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x538B;&#x7F29;&#x51E0;&#x904D;&#x56FE;&#x7247;&#xFF0C;&#x4E0D;&#x7136;&#x8FD8;&#x662F;&#x4F1A;&#x51FA;&#x73B0;anr&#x7684;&#x1F602;&#x3002;<br>&#x9644;&#x4E0A;&#x4EE3;&#x7801;<a href="https://github.com/wslongchen/BlurSimple" target="_blank" rel="external">https://github.com/wslongchen/BlurSimple</a><br><img src="/2016/06/15/&#x5B89;&#x5353;&#x56FE;&#x7247;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;-&#x901A;&#x8FC7;jni&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;/demo.jpg" alt="&#x793A;&#x4F8B;"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安卓http封装类]]></title>
      <url>http://blog.mrpann.com/2016/06/15/%E5%AE%89%E5%8D%93http%E5%B0%81%E8%A3%85%E7%B1%BB/</url>
      <content type="html"><![CDATA[<h2 id="&#x5B89;&#x5353;http&#x5C01;&#x88C5;&#x7C7B;"><a href="#&#x5B89;&#x5353;http&#x5C01;&#x88C5;&#x7C7B;" class="headerlink" title="&#x5B89;&#x5353;http&#x5C01;&#x88C5;&#x7C7B;"></a>&#x5B89;&#x5353;http&#x5C01;&#x88C5;&#x7C7B;</h2><p>&#x81EA;&#x5DF1;&#x5199;&#x7684;&#x4E00;&#x4E2A;http&#x5C01;&#x88C5;&#x7C7B;<br><a id="more"></a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by mrpan on 15/12/3.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpHelper</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NULL_INPUTSTREAM = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_FAIL = -<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> URL_Exception = -<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IO_Exception = -<span class="number">4</span>;</span><br><span class="line">    <span class="comment">// &#x65E0;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x6743;&#x9650;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> Con_Permission = -<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">&quot;HttpGetClient&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HttpHelper mHttpGetClient = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ExecutorService threadPool = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E;</span></span><br><span class="line">    MySharePreference appPreference = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HttpHelper</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> size = Runtime.getRuntime().availableProcessors();</span><br><span class="line">        threadPool = Executors.newFixedThreadPool(size);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != MyApplication.getInstance())</span><br><span class="line">            appPreference = <span class="keyword">new</span> MySharePreference(MyApplication.getInstance());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> HttpHelper <span class="title">getInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mHttpGetClient) {</span><br><span class="line">            mHttpGetClient = <span class="keyword">new</span> HttpHelper();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> mHttpGetClient;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">asyHttpGetRequest</span><span class="params">(String url, HttpResponseCallBack httpCallBack)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != appPreference) {</span><br><span class="line">            <span class="keyword">int</span> permission = appPreference.getInt(Config.TYPE_CONN, <span class="number">0</span>);</span><br><span class="line">            Network netUtils =<span class="keyword">new</span> Network(MyApplication.getInstance());</span><br><span class="line">            Network.NetWorkState state = netUtils.getConnectState();</span><br><span class="line">            <span class="keyword">if</span> (state.equals(Network.NetWorkState.MOBILE)) {</span><br><span class="line">                <span class="keyword">if</span> (permission == Config.TYPE_ALL) {</span><br><span class="line">                    threadPool.execute(getGetHttpThread(url, httpCallBack));</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (permission == Config.TYPE_WIFI) {</span><br><span class="line">                    httpCallBack.onFailure(<span class="number">0</span>, Con_Permission,</span><br><span class="line">                            <span class="string">&quot;&#x8BF7;&#x5728;&#x8BBE;&#x7F6E;&#x4E2D;&#x6253;&#x5F00;MOBILE&#x8FDE;&#x63A5; &quot;</span>);</span><br><span class="line">                    MyLog.i(TAG, <span class="string">&quot;&#x672A;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x4E86;&#x7F51;&#x7EDC;&#x9650;&#x5236;&quot;</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x672A;&#x77E5;&#x7F51;&#x7EDC;</span></span><br><span class="line">                <span class="keyword">else</span> {</span><br><span class="line">                    threadPool.execute(getGetHttpThread(url, httpCallBack));</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                threadPool.execute(getGetHttpThread(url, httpCallBack));</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            threadPool.execute(getGetHttpThread(url, httpCallBack));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">asyHttpPostRequest</span><span class="params">(String url,Map&lt;String,String&gt; params,List&lt;String&gt; files, HttpResponseCallBack httpCallBack)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != appPreference) {</span><br><span class="line">            <span class="keyword">int</span> permission = appPreference.getInt(Config.TYPE_CONN, <span class="number">0</span>);</span><br><span class="line">            Network netUtils =<span class="keyword">new</span> Network(MyApplication.getInstance());</span><br><span class="line">            Network.NetWorkState state = netUtils.getConnectState();</span><br><span class="line">            <span class="keyword">if</span> (state.equals(Network.NetWorkState.MOBILE)) {</span><br><span class="line">                <span class="keyword">if</span> (permission == Config.TYPE_ALL) {</span><br><span class="line">                    threadPool.execute(getPostHttpThread(url, params,files, httpCallBack));</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (permission == Config.TYPE_WIFI) {</span><br><span class="line">                    httpCallBack.onFailure(<span class="number">0</span>, Con_Permission,</span><br><span class="line">                            <span class="string">&quot;&#x8BF7;&#x5728;&#x8BBE;&#x7F6E;&#x4E2D;&#x6253;&#x5F00;MOBILE&#x8FDE;&#x63A5; &quot;</span>);</span><br><span class="line">                    MyLog.i(TAG, <span class="string">&quot;&#x672A;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x4E86;&#x7F51;&#x7EDC;&#x9650;&#x5236;&quot;</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x672A;&#x77E5;&#x7F51;&#x7EDC;</span></span><br><span class="line">                <span class="keyword">else</span> {</span><br><span class="line">                    threadPool.execute(getPostHttpThread(url, params,files, httpCallBack));</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                threadPool.execute(getPostHttpThread(url,params, files, httpCallBack));</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            threadPool.execute(getPostHttpThread(url, params,files, httpCallBack));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">asyHttpPostRequest</span><span class="params">(String url,List&lt;NameValuePair&gt; params, HttpResponseCallBack httpCallBack)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != appPreference) {</span><br><span class="line">            <span class="keyword">int</span> permission = appPreference.getInt(Config.TYPE_CONN, <span class="number">0</span>);</span><br><span class="line">            Network netUtils =<span class="keyword">new</span> Network(MyApplication.getInstance());</span><br><span class="line">            Network.NetWorkState state = netUtils.getConnectState();</span><br><span class="line">            <span class="keyword">if</span> (state.equals(Network.NetWorkState.MOBILE)) {</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (permission == Config.TYPE_ALL) {</span><br><span class="line">                    threadPool.execute(getPostHttpThread(url, params, httpCallBack));</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (permission == Config.TYPE_WIFI) {</span><br><span class="line">                    httpCallBack.onFailure(<span class="number">0</span>, Con_Permission,</span><br><span class="line">                            <span class="string">&quot;&#x8BF7;&#x5728;&#x8BBE;&#x7F6E;&#x4E2D;&#x6253;&#x5F00;MOBILE&#x8FDE;&#x63A5; &quot;</span>);</span><br><span class="line">                    MyLog.i(TAG, <span class="string">&quot;&#x672A;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x4E86;&#x7F51;&#x7EDC;&#x9650;&#x5236;&quot;</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x672A;&#x77E5;&#x7F51;&#x7EDC;</span></span><br><span class="line">                <span class="keyword">else</span> {</span><br><span class="line">                    threadPool.execute(getPostHttpThread(url, params, httpCallBack));</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                threadPool.execute(getPostHttpThread(url, params, httpCallBack));</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            threadPool.execute(getPostHttpThread(url, params, httpCallBack));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Runnable <span class="title">getGetHttpThread</span><span class="params">(<span class="keyword">final</span> String urlStr,</span><br><span class="line">                                      <span class="keyword">final</span> HttpResponseCallBack httpCallBack)</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="keyword">int</span> responseCode = -<span class="number">1</span>;</span><br><span class="line">            InputStream inputStream = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">            HttpURLConnection conn = <span class="keyword">null</span>;</span><br><span class="line">            URL url = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    url = <span class="keyword">new</span> URL(urlStr);</span><br><span class="line">                    conn = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    conn.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">                    conn.setConnectTimeout(<span class="number">30000</span>);</span><br><span class="line">                    conn.setReadTimeout(<span class="number">30000</span>);</span><br><span class="line">                    conn.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setDoOutput(<span class="keyword">false</span>);</span><br><span class="line">                    conn.setUseCaches(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;User-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0&quot;</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">                    conn.connect();</span><br><span class="line">                    <span class="comment">// outputStream = conn.getOutputStream();</span></span><br><span class="line">                    <span class="comment">// outputStream.write(params.toString().getBytes());</span></span><br><span class="line">                    responseCode = conn.getResponseCode();</span><br><span class="line">                    <span class="keyword">if</span> (responseCode == <span class="number">200</span>) {</span><br><span class="line">                        inputStream = conn.getInputStream();</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != inputStream) {</span><br><span class="line">                            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</span><br><span class="line">                                    inputStream, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                            StringBuilder strBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                            <span class="comment">// int i = 0;</span></span><br><span class="line">                            <span class="comment">// char[] buf = new char[1024];</span></span><br><span class="line">                            <span class="comment">// while ((i = reader.read(buf)) != -1) {</span></span><br><span class="line">                            <span class="comment">// strBuilder.append(buf, 0, i);</span></span><br><span class="line">                            <span class="comment">// }</span></span><br><span class="line"></span><br><span class="line">                            String line = <span class="keyword">null</span>;</span><br><span class="line">                            <span class="keyword">while</span> (<span class="keyword">null</span> != (line = reader.readLine()))</span><br><span class="line">                                strBuilder.append(line);</span><br><span class="line"></span><br><span class="line">                            httpCallBack.onSuccess(urlStr,</span><br><span class="line">                                    strBuilder.toString());</span><br><span class="line">                        } <span class="keyword">else</span> {</span><br><span class="line">                            httpCallBack.onFailure(responseCode,</span><br><span class="line">                                    NULL_INPUTSTREAM, <span class="string">&quot;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                            MyLog.i(TAG, <span class="string">&quot;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                        }</span><br><span class="line"></span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        httpCallBack.onFailure(responseCode, REQUEST_FAIL,</span><br><span class="line">                                <span class="string">&quot;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                } <span class="keyword">catch</span> (MalformedURLException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, URL_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, IO_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">finally</span> {</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != reader)</span><br><span class="line">                            reader.close();</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != inputStream)</span><br><span class="line">                            inputStream.close();</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != conn)</span><br><span class="line">                    conn.disconnect();</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Runnable <span class="title">getPostHttpThread</span><span class="params">(<span class="keyword">final</span> String adress_Http, <span class="keyword">final</span> String path, <span class="keyword">final</span> HttpResponseCallBack httpCallBack)</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="keyword">int</span> responseCode = -<span class="number">1</span>;</span><br><span class="line">            OutputStream outtStream = <span class="keyword">null</span>;</span><br><span class="line">            String returnLine = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">            HttpURLConnection conn = <span class="keyword">null</span>;</span><br><span class="line">            URL url = <span class="keyword">null</span>;</span><br><span class="line">            String end = <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">            String twoHyphens = <span class="string">&quot;--&quot;</span>;</span><br><span class="line">            String boundary = <span class="string">&quot;******&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    url= <span class="keyword">new</span> URL(adress_Http);</span><br><span class="line">                    conn = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    conn.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setRequestMethod(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">                    conn.setUseCaches(<span class="keyword">false</span>);</span><br><span class="line">                    conn.setInstanceFollowRedirects(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;multipart/form-data;boundary=&quot;</span> + boundary);</span><br><span class="line">                    conn.connect();</span><br><span class="line">                    DataOutputStream out = <span class="keyword">new</span> DataOutputStream(conn</span><br><span class="line">                            .getOutputStream());</span><br><span class="line">                    out.writeBytes(twoHyphens + boundary + end);</span><br><span class="line">                    out.writeBytes(<span class="string">&quot;Content-Disposition: form-data; name=\&quot;uploadfile\&quot;; filename=\&quot;&quot;</span></span><br><span class="line">                            + path.substring(path.lastIndexOf(<span class="string">&quot;/&quot;</span>) + <span class="number">1</span>) + <span class="string">&quot;\&quot;&quot;</span> + end);</span><br><span class="line">                    out.writeBytes(end);</span><br><span class="line">                    FileInputStream fis = <span class="keyword">new</span> FileInputStream(path);</span><br><span class="line">                    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8192</span>]; <span class="comment">// 8k</span></span><br><span class="line">                    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">                    <span class="comment">// &#x8BFB;&#x53D6;&#x6587;&#x4EF6;</span></span><br><span class="line">                    <span class="keyword">while</span> ((count = fis.read(buffer)) != -<span class="number">1</span>) {</span><br><span class="line">                        out.write(buffer, <span class="number">0</span>, count);</span><br><span class="line">                    }</span><br><span class="line">                    fis.close();</span><br><span class="line">                    out.writeBytes(end);</span><br><span class="line">                    out.writeBytes(twoHyphens + boundary + twoHyphens + end);</span><br><span class="line">                    out.flush();</span><br><span class="line">                    responseCode=conn.getResponseCode();</span><br><span class="line">                    <span class="keyword">if</span> (responseCode == <span class="number">200</span>) {</span><br><span class="line">                        reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(conn.getInputStream(), <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                        String line = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) {</span><br><span class="line">                            <span class="comment">// line = new String(line.getBytes(), &quot;utf-8&quot;);</span></span><br><span class="line">                            returnLine += line;</span><br><span class="line">                        }</span><br><span class="line"></span><br><span class="line">                        httpCallBack.onSuccess(adress_Http,</span><br><span class="line">                                returnLine);</span><br><span class="line"></span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        httpCallBack.onFailure(responseCode, REQUEST_FAIL,</span><br><span class="line">                                <span class="string">&quot;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                } <span class="keyword">catch</span> (MalformedURLException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, URL_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, IO_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">finally</span> {</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != reader)</span><br><span class="line">                            reader.close();</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != outtStream)</span><br><span class="line">                        {</span><br><span class="line">                            outtStream.flush();</span><br><span class="line">                            outtStream.close();</span><br><span class="line">                        }</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != conn)</span><br><span class="line">                    conn.disconnect();</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Runnable <span class="title">getPostHttpThread</span><span class="params">(<span class="keyword">final</span> String adress_Http, <span class="keyword">final</span> List&lt;NameValuePair&gt; params, <span class="keyword">final</span> HttpResponseCallBack httpCallBack)</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="keyword">int</span> responseCode = -<span class="number">1</span>;</span><br><span class="line">            URL url = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                <span class="keyword">try</span>{</span><br><span class="line"></span><br><span class="line">                    HttpPost httpRequest =<span class="keyword">new</span> HttpPost(adress_Http);</span><br><span class="line">                    <span class="comment">//&#x53D1;&#x51FA;HTTP request</span></span><br><span class="line">                   <span class="comment">// HttpEntity s=;</span></span><br><span class="line">                    httpRequest.setEntity(<span class="keyword">new</span> UrlEncodedFormEntity(params, HTTP.UTF_8));</span><br><span class="line">                    httpRequest.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded; charset=utf-8&quot;</span>);</span><br><span class="line">                    <span class="comment">//&#x53D6;&#x5F97;HTTP response</span></span><br><span class="line">                    HttpResponse httpResponse=<span class="keyword">new</span> DefaultHttpClient().execute(httpRequest);</span><br><span class="line">                    <span class="comment">//&#x82E5;&#x72B6;&#x6001;&#x7801;&#x4E3A;200 ok</span></span><br><span class="line">                    <span class="keyword">if</span>(httpResponse.getStatusLine().getStatusCode()==<span class="number">200</span>){</span><br><span class="line">                        <span class="comment">//&#x53D6;&#x51FA;&#x56DE;&#x5E94;&#x5B57;&#x4E32;</span></span><br><span class="line">                        <span class="comment">//String strResult= EntityUtils.toString(httpResponse.getEntity());</span></span><br><span class="line">                        String strResult = EntityUtils.toString(httpResponse.getEntity(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">                        httpCallBack.onSuccess(adress_Http,</span><br><span class="line">                                URLDecoder.decode(strResult, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        httpCallBack.onFailure(responseCode, REQUEST_FAIL,</span><br><span class="line">                                <span class="string">&quot;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                    }</span><br><span class="line">                }<span class="keyword">catch</span>(ClientProtocolException e){</span><br><span class="line">                    httpCallBack.onFailure(responseCode, URL_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">catch</span> (UnsupportedEncodingException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, URL_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, IO_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Runnable <span class="title">getPostHttpThread</span><span class="params">(<span class="keyword">final</span> String adress_Http,<span class="keyword">final</span> Map&lt;String,String&gt; map, <span class="keyword">final</span> List&lt;String&gt; files, <span class="keyword">final</span> HttpResponseCallBack httpCallBack)</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Runnable() {</span><br><span class="line">            <span class="keyword">int</span> responseCode = -<span class="number">1</span>;</span><br><span class="line">            OutputStream outtStream = <span class="keyword">null</span>;</span><br><span class="line">            String returnLine = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">            HttpURLConnection conn = <span class="keyword">null</span>;</span><br><span class="line">            URL url = <span class="keyword">null</span>;</span><br><span class="line">            String end = <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">            String twoHyphens = <span class="string">&quot;--&quot;</span>;</span><br><span class="line">            String boundary = <span class="string">&quot;******&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    String dataStr=<span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (map != <span class="keyword">null</span> &amp;&amp; map.size() != <span class="number">0</span> &amp;&amp; !map.isEmpty()) {</span><br><span class="line">                        StringBuffer sb = <span class="keyword">new</span> StringBuffer( );</span><br><span class="line">                        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {</span><br><span class="line">                            <span class="comment">// &#x5982;&#x679C;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x4E2D;&#x6709;&#x4E2D;&#x6587;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;URLEncoder&#x7F16;&#x7801; gbk/utf8</span></span><br><span class="line">                            sb.append(entry.getKey()).append(<span class="string">&quot;=&quot;</span>).append(URLEncoder.encode(entry.getValue(), <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                            sb.append(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">                        }</span><br><span class="line">                        sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">                        dataStr=sb.toString();</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//                    if (map != null &amp;&amp; !map.isEmpty()) {</span></span><br><span class="line"><span class="comment">//                        StringBuffer sb = new StringBuffer( );</span></span><br><span class="line"><span class="comment">//                        for (Map.Entry&lt;String, String&gt; entry : map.entrySet())</span></span><br><span class="line"><span class="comment">//                            sb.append(&quot;&amp;&quot;).append(entry.getKey()).append(&quot;=&quot;).append(URLEncoder.encode(entry.getValue(), &quot;utf-8&quot;));</span></span><br><span class="line"><span class="comment">//                        dataStr=sb.toString().substring(1);</span></span><br><span class="line"><span class="comment">//                    }</span></span><br><span class="line">                    url= <span class="keyword">new</span> URL(adress_Http+<span class="string">&quot;&amp;&quot;</span>+dataStr);</span><br><span class="line">                    conn = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    conn.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setRequestMethod(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">                    conn.setUseCaches(<span class="keyword">false</span>);</span><br><span class="line">                    conn.setInstanceFollowRedirects(<span class="keyword">true</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line">                    conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;multipart/form-data;boundary=&quot;</span> + boundary);</span><br><span class="line">                    <span class="comment">//conn.connect();</span></span><br><span class="line">                    DataOutputStream out = <span class="keyword">new</span> DataOutputStream(conn</span><br><span class="line">                            .getOutputStream());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;files.size();i++){</span><br><span class="line">                        String name=files.get(i);</span><br><span class="line">                        String path=name.substring(name.lastIndexOf(<span class="string">&quot;/&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">                        out.writeBytes(twoHyphens + boundary + end);</span><br><span class="line">                        out.writeBytes(<span class="string">&quot;Content-Disposition: form-data; name=\&quot;file&quot;</span>+i+<span class="string">&quot;\&quot;; filename=\&quot;&quot;</span></span><br><span class="line">                                + path + <span class="string">&quot;\&quot;&quot;</span> + end);</span><br><span class="line">                        out.writeBytes(end);</span><br><span class="line">                        FileInputStream fis = <span class="keyword">new</span> FileInputStream(name);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">// 8k</span></span><br><span class="line">                        <span class="keyword">int</span> length = -<span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">while</span> ((length = fis.read(buffer)) != -<span class="number">1</span>) {</span><br><span class="line">                            out.write(buffer, <span class="number">0</span>, length);</span><br><span class="line">                        }</span><br><span class="line">                        out.writeBytes(end);</span><br><span class="line">                        fis.close();</span><br><span class="line"></span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                    out.writeBytes(twoHyphens + boundary + twoHyphens + end);</span><br><span class="line">                    out.flush();</span><br><span class="line">                    responseCode=conn.getResponseCode();</span><br><span class="line">                    <span class="keyword">if</span> (responseCode == <span class="number">200</span>) {</span><br><span class="line">                        reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(conn.getInputStream(), <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                        String line = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) {</span><br><span class="line">                            <span class="comment">// line = new String(line.getBytes(), &quot;utf-8&quot;);</span></span><br><span class="line">                            returnLine += line;</span><br><span class="line">                        }</span><br><span class="line"></span><br><span class="line">                        httpCallBack.onSuccess(adress_Http,</span><br><span class="line">                                returnLine);</span><br><span class="line"></span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        httpCallBack.onFailure(responseCode, REQUEST_FAIL,</span><br><span class="line">                                <span class="string">&quot;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">                } <span class="keyword">catch</span> (MalformedURLException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, URL_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                    httpCallBack.onFailure(responseCode, IO_Exception,</span><br><span class="line">                            e.getMessage());</span><br><span class="line">                    MyLog.i(TAG, e.toString());</span><br><span class="line">                } <span class="keyword">finally</span> {</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != reader)</span><br><span class="line">                            reader.close();</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">try</span> {</span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">null</span> != outtStream)</span><br><span class="line">                        {</span><br><span class="line">                            outtStream.flush();</span><br><span class="line">                            outtStream.close();</span><br><span class="line">                        }</span><br><span class="line">                    } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">                        MyLog.i(TAG, ex.toString());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != conn)</span><br><span class="line">                    conn.disconnect();</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by mrpan on 15/12/4.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HttpResponseCallBack</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String url, String result)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(<span class="keyword">int</span> httpResponseCode, <span class="keyword">int</span> errCode, String err)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;HttpHelper.getInstance().asyHttpGetRequest(url,HttpResponseCallBack);</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安卓的Fragment ]]></title>
      <url>http://blog.mrpann.com/2016/06/15/%E5%AE%89%E5%8D%93%E7%9A%84Fragment/</url>
      <content type="html"><![CDATA[<h2 id="AndroidFragment"><a href="#AndroidFragment" class="headerlink" title="AndroidFragment"></a>AndroidFragment</h2><h4 id="&#x751F;&#x547D;&#x5468;&#x671F;"><a href="#&#x751F;&#x547D;&#x5468;&#x671F;" class="headerlink" title="&#x751F;&#x547D;&#x5468;&#x671F;"></a>&#x751F;&#x547D;&#x5468;&#x671F;</h4><p>&gt;</p>
<ul>
<li>onAttach()</li>
<li>onCreate()</li>
<li>onCreateView()</li>
<li>onActivityCreated()</li>
<li>onViewStateRestored()</li>
<li>onStart()</li>
<li>onResume()</li>
<li>onPause()</li>
<li>onStop()</li>
<li>onDestroyView()</li>
<li>onDestroy()</li>
<li>onDetach()<a id="more"></a>
<h5 id="&#x6570;&#x636E;&#x4F20;&#x8F93;"><a href="#&#x6570;&#x636E;&#x4F20;&#x8F93;" class="headerlink" title="&#x6570;&#x636E;&#x4F20;&#x8F93;"></a>&#x6570;&#x636E;&#x4F20;&#x8F93;</h5></li>
</ul>
<ol>
<li>&#x901A;&#x8FC7;setArguments(bundle)&#x4E0E;getArguments()&#x8FDB;&#x884C;&#x6570;&#x636E;&#x4F20;&#x8F93;</li>
<li>&#x901A;&#x8FC7;get&#x3001;set&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#xFF08;&#x63A8;&#x8350;&#xFF09;</li>
</ol>
<h5 id="&#x7BA1;&#x7406;"><a href="#&#x7BA1;&#x7406;" class="headerlink" title="&#x7BA1;&#x7406;"></a>&#x7BA1;&#x7406;</h5><p>fragment&#x901A;&#x8FC7;fragmentmanager&#x7BA1;&#x7406;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android view绘画机制]]></title>
      <url>http://blog.mrpann.com/2016/06/14/Android-view%E7%BB%98%E7%94%BB%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<p>&#x6807;&#x7B7E;&#xFF08;&#x7A7A;&#x683C;&#x5206;&#x9694;&#xFF09;&#xFF1A; android view &#x7ED8;&#x753B;&#x673A;&#x5236;</p>
<hr>
<h5 id="View&#x7684;&#x7ED8;&#x5236;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;"><a href="#View&#x7684;&#x7ED8;&#x5236;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;" class="headerlink" title="View&#x7684;&#x7ED8;&#x5236;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;:"></a>View&#x7684;&#x7ED8;&#x5236;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;:</h5><ul>
<li>onMeasure()</li>
<li>onLayout()</li>
<li>onDraw()<a id="more"></a>
<blockquote>
<h6 id="onMeaure"><a href="#onMeaure" class="headerlink" title="onMeaure()"></a><code>onMeaure()</code></h6><p>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;<code>view</code>&#x7684;&#x5927;&#x5C0F;</p>
<h6 id="onLayout"><a href="#onLayout" class="headerlink" title="onLayout()"></a><code>onLayout()</code></h6><p>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x786E;&#x5B9A;view&#x5728;<code>ContentView</code>&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;</p>
<h6 id="onDraw"><a href="#onDraw" class="headerlink" title="onDraw()"></a><code>onDraw()</code></h6><p>&#x4E3B;&#x8981;&#x662F;&#x7ED8;&#x5236;<code>view</code></p>
</blockquote>
</li>
</ul>
<p><strong>tips:</strong> &#x8C03;&#x7528;<code>invalidate()</code>&#x65B9;&#x6CD5;&#x53EA;&#x4F1A;&#x6267;&#x884C;<code>onDraw()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x7684;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x548C;&#x4F4D;&#x7F6E;&#x5747;&#x672A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x53EA;&#x6709;&#x8C03;&#x7528;<code>requestLayout()</code>&#x5F3A;&#x5236;&#x6267;&#x884C;view&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x4E0A;&#x9762;&#x7684;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x8BE6;&#x60C5;&#x53EF;&#x53C2;&#x8003;github&#x4E0A;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#xFF1A;<br><a href="https://github.com/wslongchen/AnnProgress" target="_blank" rel="external">https://github.com/wslongchen/AnnProgress</a><br><img src="/2016/06/14/Android-view&#x7ED8;&#x753B;&#x673A;&#x5236;/demo.png" alt="&#x81EA;&#x5B9A;&#x4E49;&#x8FDB;&#x5EA6;&#x6761;view"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安卓sqlite本地数据库存储]]></title>
      <url>http://blog.mrpann.com/2016/06/14/%E5%AE%89%E5%8D%93sqlite%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8/</url>
      <content type="html"><![CDATA[<h2 id="sqite&#x6570;&#x636E;&#x5E93;"><a href="#sqite&#x6570;&#x636E;&#x5E93;" class="headerlink" title="sqite&#x6570;&#x636E;&#x5E93;"></a>sqite&#x6570;&#x636E;&#x5E93;</h2><hr>
<p>&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x5728;&#x5199;&#x4E00;&#x4E9B;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x9700;&#x8981;&#x7528;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E94;&#x7528;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#x4E2D;&#x6570;&#x636E;&#x5E93;&#x5360;&#x636E;&#x4E86;&#x4E3E;&#x8DB3;&#x8F7B;&#x91CD;&#x7684;&#x5730;&#x4F4D;&#x3002;&#x53BB;&#x5E74;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x505A;&#x4E86;&#x4E00;&#x6B3E;&#x5185;&#x5BB9;&#x7BA1;&#x7406;&#x7C7B;&#x7684;&#x672C;&#x5730;app&#xFF0C;<br>&#x7531;&#x4E8E;&#x6570;&#x636E;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8FDB;&#x884C;&#x4F20;&#x8F93;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x5B58;&#x5728;&#x672C;&#x5730;&#x3002;&#x5B89;&#x5353;&#x4E2D;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x4E00;&#x6B3E;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5F88;&#x591A;&#x5E94;&#x7528;&#x6216;&#x8005;&#x5C0F;&#x7F51;&#x7AD9;&#x90FD;&#x662F;&#x7528;&#x7684;sqlite&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x7279;&#x610F;&#x6574;&#x7406;&#x4E00;&#x4E0B;&#xFF0C;<br>&#x65B9;&#x4FBF;&#x81EA;&#x5DF1;&#x4EE5;&#x540E;&#x77E5;&#x8BC6;&#x7684;&#x56DE;&#x987E;&#x4E5F;&#x4E3A;&#x8BB8;&#x591A;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;&#x5230;sqlite&#x7684;&#x4EBA;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x53C2;&#x8003;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5F53;&#x521D;&#x5B66;&#x6821;&#x8BFE;&#x7A0B;&#x539F;&#x56E0;&#xFF0C;&#x63A5;&#x89E6;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x8F83;&#x591A;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x822C;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x8BB0;&#x4F4F;&#x57FA;&#x672C;&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x8BED;&#x53E5;&#x5C31;&#x5DF2;&#x7ECF;&#x591F;&#x7528;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x6DF1;&#x5165;&#x7684;&#x4E86;&#x89E3;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x6162;&#x6162;&#x7684;&#x53BB;&#x4F53;&#x4F1A;&#x3002;&#x5728;&#x6211;&#x770B;&#x6765;&#xFF0C;&#x7B80;&#x5355;&#x7684;<br>sql&#x8BED;&#x53E5;&#x4E5F;&#x662F;&#x5F88;&#x8BB2;&#x7A76;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x91CF;&#x4E00;&#x5927;&#xFF0C;&#x6267;&#x884C;&#x7684;&#x901F;&#x5EA6;&#x5C31;&#x5F88;&#x91CD;&#x8981;&#x4E86;&#xFF0C;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9664;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x7684;&#x8BBE;&#x8BA1;&#x4E4B;&#x5916;&#xFF0C;sql&#x8BED;&#x53E5;&#x7684;&#x7F16;&#x5199;&#x5360;&#x636E;&#x4E86;&#x5F88;&#x5927;&#x4E00;&#x90E8;&#x5206;&#x3002;<br><a id="more"></a><br>&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x8D34;&#x51FA;sqlite&#x7684;&#x57FA;&#x672C;&#x8BED;&#x6CD5;&#xFF1A;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.&#x91C7;&#x7528;&#x81EA;&#x5E26;&#x65B9;&#x6CD5;</span><br><span class="line">sqlite&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;<span class="keyword">insert</span>&#x3001;<span class="keyword">query</span>&#x3001;<span class="keyword">delete</span>&#x3001;<span class="keyword">update</span>&#x65B9;&#x6CD5;</span><br><span class="line">SQLiteDatabase db&#xFF1B;   </span><br><span class="line">ContentValues <span class="keyword">values</span> = <span class="keyword">new</span> ContentValues();</span><br><span class="line">&#x589E;&#xFF1A;db.insert(&#x8868;&#x540D;, &#x53C2;&#x6570;, values);</span><br><span class="line">&#x5220;&#xFF1A;db.delete(&#x8868;&#x540D;, &#x6761;&#x4EF6;, &#x53C2;&#x6570;,...);</span><br><span class="line">&#x6539;&#xFF1A;db.update(&#x8868;&#x540D;, values,...);</span><br><span class="line">&#x67E5;&#xFF1A;db.query(&#x8868;&#x540D;, &#x6761;&#x4EF6;,&#x53C2;&#x6570;,...);</span><br><span class="line"></span><br><span class="line">2.&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x8BED;&#x53E5;</span><br><span class="line">String sql=&quot;<span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> <span class="keyword">name</span>=?<span class="string">&quot;;</span><br><span class="line">String[] args;</span><br><span class="line">Cursor cursor = db.rawQuery(sql, args);</span></span><br></pre></td></tr></table></figure></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x518D;&#x8D34;&#x51FA;&#x4E00;&#x4E2A;sqlite&#x5E2E;&#x52A9;&#x7C7B;&#xFF0C;&#x91C7;&#x7528;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7F16;&#x5199;&#xFF0C;&#x89C4;&#x8303;sqlite&#x7C7B;&#x7684;&#x4F7F;&#x7528;&#x3002;&#x4EB2;&#x6D4B;&#x53EF;&#x7528;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by mrpan on 16/5/11.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBHelper</span> <span class="keyword">extends</span> <span class="title">SQLiteOpenHelper</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DB_NAME = <span class="string">&quot;xx&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DB_VERSION = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DBHelper mInstance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DBHelper</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, DB_NAME, <span class="keyword">null</span>, DB_VERSION);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DBHelper</span><span class="params">(Context context, <span class="keyword">int</span> version)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context, DB_NAME, <span class="keyword">null</span>, version);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> DBHelper <span class="title">getInstance</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (mInstance == <span class="keyword">null</span>) {</span><br><span class="line">            mInstance = <span class="keyword">new</span> DBHelper(context);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> mInstance;</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span> </span>{</span><br><span class="line">        <span class="comment">//&#x505A;&#x4E00;&#x4E9B;&#x5EFA;&#x8868;&#x64CD;&#x4F5C;</span></span><br><span class="line">        String sql=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        db.execSQL(sql);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>{</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</span><br><span class="line">&#x5728;&#x4E1A;&#x52A1;&#x7C7B;&#x91CC;&#x9762;&#xFF0C;SQLiteDatabase=DBHelper.getInstance(context).getWritableDatabase();</span><br><span class="line">&#x518D;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x8BED;&#x53E5;&#x64CD;&#x4F5C;&#x3002;</span><br></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[梦想app]]></title>
      <url>http://blog.mrpann.com/2016/06/12/%E6%A2%A6%E6%83%B3app/</url>
      <content type="html"><![CDATA[<h1 id="DreamTogether"><a href="#DreamTogether" class="headerlink" title="DreamTogether"></a>DreamTogether</h1><h4 id="&#x5C0F;&#x5C0F;&#x7684;&#x6211;&#x6709;&#x5927;&#x5927;&#x7684;&#x68A6;&#x60F3;&#x3002;"><a href="#&#x5C0F;&#x5C0F;&#x7684;&#x6211;&#x6709;&#x5927;&#x5927;&#x7684;&#x68A6;&#x60F3;&#x3002;" class="headerlink" title="&#x5C0F;&#x5C0F;&#x7684;&#x6211;&#x6709;&#x5927;&#x5927;&#x7684;&#x68A6;&#x60F3;&#x3002;"></a>&#x5C0F;&#x5C0F;&#x7684;&#x6211;&#x6709;&#x5927;&#x5927;&#x7684;&#x68A6;&#x60F3;&#x3002;</h4><h6 id="code-by-&#x6F58;&#x5B89;-www-mrpann-com"><a href="#code-by-&#x6F58;&#x5B89;-www-mrpann-com" class="headerlink" title="code by : &#x6F58;&#x5B89;(www.mrpann.com)"></a>code by : &#x6F58;&#x5B89;(www.mrpann.com)</h6><hr>
<pre><code>                   _ooOoo_
                  o8888888o
                  88&quot; . &quot;88
                  (| -_- |)
                   O\ = /O
               ____/`---&apos;\____
             .   &apos; \\| |// `.
              / \\||| : |||// \
            / _||||| -:- |||||- \
              | | \\\ - /// | |
            | \_| &apos;&apos;\---/&apos;&apos; | |
             \ .-\__ `-` ___/-. /
          ___`. .&apos; /--.--\ `. . __
       .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.
      | | : `- \`.;`\ _ /`;.`/ - ` : | |
        \ \ `-. \_ __\ /__ _/ .-` / /
======`-.____`-.___\_____/___.-`____.-&apos;======
                   `=---=&apos;

.............................................
         &#x4F5B;&#x7956;&#x4FDD;&#x4F51;             &#x6C38;&#x65E0;BUG
</code></pre><hr>
<h4 id="&#x9879;&#x76EE;&#x7B80;&#x4ECB;"><a href="#&#x9879;&#x76EE;&#x7B80;&#x4ECB;" class="headerlink" title="&#x9879;&#x76EE;&#x7B80;&#x4ECB;"></a>&#x9879;&#x76EE;&#x7B80;&#x4ECB;</h4><ul>
<li>&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x68A6;&#x60F3;&#xFF0C;&#x6216;&#x5927;&#x6216;&#x5C0F;&#x3002;</li>
<li>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x60C5;&#x6000;app&#x3002;</li>
<li>&#x4E00;&#x7FA4;&#x8FFD;&#x68A6;&#x6587;&#x9752;&#x7684;&#x81EA;&#x7559;&#x5730;&#x3002;</li>
</ul>
<hr>
<a id="more"></a>
<h4 id="&#x9879;&#x76EE;&#x4ECB;&#x7ECD;"><a href="#&#x9879;&#x76EE;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x9879;&#x76EE;&#x4ECB;&#x7ECD;"></a>&#x9879;&#x76EE;&#x4ECB;&#x7ECD;</h4><h5 id="PHP&#x670D;&#x52A1;&#x7AEF;"><a href="#PHP&#x670D;&#x52A1;&#x7AEF;" class="headerlink" title="PHP&#x670D;&#x52A1;&#x7AEF;"></a>PHP&#x670D;&#x52A1;&#x7AEF;</h5><ul>
<li>&#x91C7;&#x7528;mvc&#x6A21;&#x5F0F;&#x8BBE;&#x8BA1;&#x540E;&#x6BB5;&#x63A5;&#x53E3;,&#x7531;&#x4E8E;&#x6682;&#x65F6;&#x53EA;&#x63D0;&#x4F9B;&#x63A5;&#x53E3;&#x4F9B;&#x5B89;&#x5353;&#x7AEF;&#x8BBF;&#x95EE;,&#x6682;&#x65F6;&#x7F3A;&#x5C11;v&#x5C42;&#x3002;</li>
<li>&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#xFF1A;&#x68A6;&#x60F3;&#x548C;&#x7528;&#x6237;&#x4E24;&#x5F20;&#x8868;&#xFF0C;&#x4EE5;&#x53CA;&#x4E24;&#x5F20;&#x6269;&#x5C55;&#x8868;&#x3002;&#x81EA;&#x7531;&#x5EA6;&#x589E;&#x9AD8;&#xFF0C;&#x65B9;&#x4FBF;&#x4EE5;&#x540E;&#x589E;&#x52A0;&#x4FE1;&#x606F;&#x3002;</li>
<li></li>
</ul>
<h5 id="ANDROID&#x5E94;&#x7528;&#x7AEF;"><a href="#ANDROID&#x5E94;&#x7528;&#x7AEF;" class="headerlink" title="ANDROID&#x5E94;&#x7528;&#x7AEF;"></a>ANDROID&#x5E94;&#x7528;&#x7AEF;</h5><ul>
<li>&#x5B8C;&#x6210;&#x4E86;&#x9996;&#x9875;&#x663E;&#x793A;&#x6240;&#x6709;&#x68A6;&#x60F3;&#x3001;&#x7528;&#x6237;&#x7684;&#x767B;&#x5F55;(&#x6CE8;&#x518C;)&#x3001;&#x53D1;&#x8868;&#x68A6;&#x60F3;(&#x6682;&#x65F6;&#x53EA;&#x652F;&#x6301;&#x6587;&#x5B57;)&#x3001;&#x663E;&#x793A;&#x7528;&#x6237;&#x53D1;&#x8868;&#x68A6;&#x60F3;&#x7684;&#x65F6;&#x95F4;&#x7EBF;&#x3002;</li>
<li>&#x672A;&#x5B8C;&#x5F85;&#x7EED;</li>
</ul>
<h6 id="&#x529F;&#x80FD;&#x65E5;&#x5FD7;&#xFF1A;"><a href="#&#x529F;&#x80FD;&#x65E5;&#x5FD7;&#xFF1A;" class="headerlink" title="&#x529F;&#x80FD;&#x65E5;&#x5FD7;&#xFF1A;"></a>&#x529F;&#x80FD;&#x65E5;&#x5FD7;&#xFF1A;</h6><ul>
<li>&#x57FA;&#x672C;&#x6846;&#x67B6;&#x642D;&#x5EFA;&#xFF0C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6A21;&#x5757;,&#x7F13;&#x5B58;&#x6A21;&#x5757;   3.27</li>
<li>&#x7528;&#x6237;&#x6CE8;&#x518C;&#x767B;&#x5F55;   3.29</li>
<li>&#x53D1;&#x8868;&#x68A6;&#x60F3;       3.30</li>
<li>&#x56FE;&#x7247;&#x4E0A;&#x4F20;       4.8<br>+</li>
</ul>
<hr>
<h5 id="&#x4E3B;&#x8981;&#x6280;&#x672F;&#x529F;&#x80FD;&#x622A;&#x56FE;"><a href="#&#x4E3B;&#x8981;&#x6280;&#x672F;&#x529F;&#x80FD;&#x622A;&#x56FE;" class="headerlink" title="&#x4E3B;&#x8981;&#x6280;&#x672F;&#x529F;&#x80FD;&#x622A;&#x56FE;"></a>&#x4E3B;&#x8981;&#x6280;&#x672F;&#x529F;&#x80FD;&#x622A;&#x56FE;</h5><ul>
<li>&#x9996;&#x9875;&#x91C7;&#x7528;&#x81EA;&#x5B9A;&#x4E49;recyleview&#x4E0E;cardview,&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x52A0;&#x8F7D;&#x52A8;&#x753B;&#x3002;&#x672C;&#x5E94;&#x7528;&#x6240;&#x6709;&#x6570;&#x636E;&#x5747;&#x89E3;&#x6790;&#x81EA;php&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;json&#x3002;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#x4EE5;&#x53CA;&#x7F13;&#x5B58;&#x7B49;&#x5747;&#x91C7;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x6846;&#x67B6;imageloader&#x5B9E;&#x73B0;&#xFF0C;&#x5C01;&#x88C5;&#x4E86;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x540E;&#x6765;&#x611F;&#x89C9;&#x5197;&#x4F59;&#x4FBF;&#x5220;&#x6389;&#x4E86;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-121443.png" width="260px" height="480px"></li>
<li>&#x70B9;&#x51FB;&#x4E00;&#x6761;&#x68A6;&#x60F3;&#x8FDB;&#x5165;&#x8BE6;&#x60C5;&#x754C;&#x9762;&#x3002;&#x672C;&#x754C;&#x9762;&#x91C7;&#x7528;&#x4E86;&#x81EA;&#x5B9A;&#x4E49;listview&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;&#x4EFF;ios&#x4E0B;&#x62C9;&#x6C34;&#x6EF4;&#x52A8;&#x753B;&#x3002;&#x8BC4;&#x8BBA;&#x53EF;&#x4EE5;&#x63D2;&#x5165;&#x8868;&#x60C5;&#xFF0C;&#x5177;&#x4F53;&#x662F;&#x7528;SpannableStringBuilder&#x5B9E;&#x73B0;&#x56FE;&#x6587;&#x6DF7;&#x6392;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Html.fromHtml&#x8FDB;&#x884C;&#x3002;&#x53E6;&#x5916;&#x5B9E;&#x73B0;&#x8868;&#x60C5;&#x4EE5;&#x53CA;gif&#x52A8;&#x753B;&#x5177;&#x4F53;&#x53EF;&#x89C1;&#x6E90;&#x4EE3;&#x7801;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-155845.png" width="260px" height="480px"></li>
<li>&#x70B9;&#x51FB;&#x9996;&#x9875;&#x53F3;&#x4E0A;&#x89D2;&#x56FE;&#x6807;&#x8FDB;&#x5165;&#x4EFF;&#x652F;&#x4ED8;&#x5B9D;&#x54BB;&#x4E00;&#x54BB;&#x754C;&#x9762;&#xFF0C;&#x6C34;&#x6CE2;&#x7EB9;&#x6548;&#x679C;&#x901A;&#x8FC7;&#x81EA;&#x5DF1;&#x7ED8;&#x5236;&#x70B9;&#x51FB;&#x6548;&#x679C;imageview&#x63A7;&#x4EF6;&#x5B9E;&#x73B0;&#x3002;&#x70B9;&#x51FB;&#x4E4B;&#x540E;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7B49;&#x6982;&#x7387;&#x968F;&#x673A;&#x7B97;&#x6CD5;&#x4EE5;&#x67D0;&#x4E00;&#x7279;&#x5B9A;&#x7684;&#x6982;&#x7387;&#x54BB;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x968F;&#x673A;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x68A6;&#x60F3;&#x3002;&#x53E6;&#x5916;&#x70B9;&#x51FB;&#x6309;&#x94AE;&#x58F0;&#x97F3;&#x901A;&#x8FC7;SoundPool&#x7B80;&#x5355;&#x64AD;&#x653E;&#x653E;&#x5728;&#x8D44;&#x6E90;&#x6587;&#x4EF6;raw&#x4E0B;&#x7684;&#x97F3;&#x9891;&#x8D44;&#x6E90;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-155415.png" width="260px" height="480px"></li>
<li>&#x54BB;&#x4E00;&#x54BB;&#x54BB;&#x5230;&#x7684;&#x68A6;&#x60F3;&#x901A;&#x8FC7;ViewPager&#x5C55;&#x793A;&#xFF0C;&#x5E76;&#x5F15;&#x7528;facebook&#x5F00;&#x6E90;&#x52A8;&#x753B;jar&#x5305;nineoldandroids-2.4.0.jar&#x8FDB;&#x884C;&#x5207;&#x6362;&#x52A8;&#x753B;&#x6548;&#x679C;&#x652F;&#x6301;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-155703.png" width="260px" height="480px"></li>
<li>&#x5C0F;&#x8BB0;&#x754C;&#x9762;&#x4EFF;one is all&#x7684;&#x5C0F;&#x8BB0;&#x529F;&#x80FD;&#xFF0C;&#x5BF9;&#x7CBE;&#x9009;&#x4E2D;&#x7684;&#x68A6;&#x60F3;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x5185;&#x5BB9;&#x548C;&#x56FE;&#x7247;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x5206;&#x4EAB;&#xFF0C;&#x5206;&#x4EAB;&#x529F;&#x80FD;&#x6682;&#x65F6;&#x53EA;&#x652F;&#x6301;qq&#x3001;qq&#x7A7A;&#x95F4;&#x3001;&#x5FAE;&#x4FE1;&#x3001;&#x5FAE;&#x4FE1;&#x670B;&#x53CB;&#x5708;&#x4EE5;&#x53CA;&#x817E;&#x8BAF;&#x5FAE;&#x535A;&#x3002;&#x624B;&#x52A8;&#x96C6;&#x6210;&#x4E86;&#x5206;&#x4EAB;&#x6A21;&#x5757;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5206;&#x4EAB;&#x5E73;&#x53F0;&#x3002;&#x53E6;&#x5916;&#x5929;&#x6C14;&#x6E29;&#x5EA6;&#x63A5;&#x53E3;&#x7528;&#x7684;&#x4E2D;&#x56FD;&#x5929;&#x6C14;&#x7F51;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x767E;&#x5EA6;&#x5730;&#x56FE;lbs&#x670D;&#x52A1;&#x3002;&#x53E6;&#x5916;&#x6B64;&#x754C;&#x9762;&#x6D89;&#x53CA;&#x4E86;&#x5C06;view&#x754C;&#x9762;&#x8F6C;&#x6362;&#x4E3A;bitmap&#x4EE5;&#x53CA;bitmap&#x8F6C;&#x6587;&#x4EF6;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x89C1;&#x6E90;&#x4EE3;&#x7801;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-155906.png" width="260px" height="480px"></li>
<li>&#x4E2A;&#x4EBA;&#x4E2D;&#x5FC3;&#x754C;&#x9762;&#x83DC;&#x5355;&#x91C7;&#x7528;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#xFF0C;&#x540E;&#x671F;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x7F51;&#x7EDC;&#x6DFB;&#x52A0;&#x3002;&#x4E2A;&#x4EBA;&#x80CC;&#x666F;&#x91C7;&#x7528;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;&#x6548;&#x679C;&#xFF0C;&#x7531;&#x4E8E;&#x73B0;&#x6709;java&#x6A21;&#x7CCA;&#x6548;&#x679C;&#x6E32;&#x67D3;&#x8F83;&#x6162;&#xFF0C;&#x9020;&#x6210;&#x754C;&#x9762;&#x957F;&#x65F6;&#x95F4;&#x5361;&#x987F;&#xFF0C;&#x6539;&#x4E3A;jni&#x6A21;&#x5F0F;&#x8C03;&#x7528;c/c++&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6A21;&#x7CCA;&#x6548;&#x679C;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x540E;&#x5728;&#x8FDB;&#x884C;&#x6A21;&#x7CCA;&#xFF0C;&#x4E24;&#x8005;&#x65F6;&#x95F4;&#x4E00;&#x6837;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-155940.png" width="260px" height="480px"></li>
<li>&#x6211;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x529F;&#x80FD;&#xFF0C;&#x754C;&#x9762;&#x4EFF;qq&#x4E8C;&#x7EF4;&#x7801;&#x3002;&#x5229;&#x7528;google&#x4E8C;&#x7EF4;&#x7801;&#x652F;&#x6301;zxing&#x7684;core&#x5305;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x751F;&#x6210;&#x4EE5;&#x53CA;&#x4EFF;&#x5FAE;&#x4FE1;&#x7684;&#x626B;&#x4E00;&#x626B;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;&#x7279;&#x8272;&#x4E8C;&#x7EF4;&#x7801;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E8C;&#x7EF4;&#x7801;&#x6837;&#x5F0F;&#x7684;&#x66F4;&#x6539;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-141433.png" width="260px" height="480px"><br><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-151958.png" width="260px" height="480px"></li>
<li>&#x6211;&#x7684;&#x68A6;&#x60F3;&#x5386;&#x7A0B;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-160007.png" width="260px" height="480px"></li>
<li>&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#xFF0C;&#x901A;&#x8BAF;&#x6A21;&#x5757;&#x91C7;&#x7528;asmark.jar&#x57FA;&#x4E8E;xmpp&#x534F;&#x8BAE;&#x5B8C;&#x6210;&#x3002;&#x6CE8;&#x518C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4E0E;&#x4EFB;&#x610F;&#x53D1;&#x8868;&#x68A6;&#x60F3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x8FDB;&#x884C;&#x804A;&#x5929;&#xFF0C;&#x652F;&#x6301;&#x8BED;&#x97F3;&#xFF0C;&#x6587;&#x4EF6;&#xFF0C;&#x6587;&#x5B57;&#xFF0C;&#x56FE;&#x7247;&#x3002;&#x5E76;&#x4E14;&#x57FA;&#x4E8E;&#x6B64;&#x6A21;&#x5757;&#x5B9E;&#x73B0;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5E94;&#x7528;&#x63A8;&#x9001;&#x529F;&#x80FD;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-160037.png" width="260px" height="480px"></li>
<li>&#x7CFB;&#x7EDF;&#x754C;&#x9762;&#x3002;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x62E8;&#x53F7;&#xFF0C;&#x5173;&#x4E8E;&#x754C;&#x9762;&#x91C7;&#x7528;&#x52A0;&#x8F7D;h5&#x9875;&#x9762;&#x663E;&#x793A;&#x3002;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/Screenshot_20160612-161602.png" width="260px" height="480px"></li>
<li>&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5468;&#x56F4;&#x4EBA;&#x4EEC;&#x53D1;&#x8868;&#x7684;&#x68A6;&#x60F3;&#x3002;</li>
<li></li>
</ul>
<p><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/81CAEFCE1FBE5F47E6959227F896FA0D.png" width="260px" height="480px"></p>
<ul>
<li>&#x53D1;&#x8868;&#x68A6;&#x60F3;</li>
<li><img src="https://raw.githubusercontent.com/wslongchen/DreamTogether/master/&#x622A;&#x56FE;/7937F69EEBE3177C7CBD281C3727E1B3.png" width="260px" height="480px"></li>
</ul>
<hr>
<h6 id="&#x66F4;&#x65B0;&#x4E8E;2016-04-10"><a href="#&#x66F4;&#x65B0;&#x4E8E;2016-04-10" class="headerlink" title="&#x66F4;&#x65B0;&#x4E8E;2016/04/10"></a>&#x66F4;&#x65B0;&#x4E8E;2016/04/10</h6><p>&#xA9; 2016 MrPan</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-04-2]]></title>
      <url>http://blog.mrpann.com/2016/04/23/2016-04-232/</url>
      <content type="html"><![CDATA[<h3 id="&#x68A6;&#x60F3;php&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x8BA1;"><a href="#&#x68A6;&#x60F3;php&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x8BA1;" class="headerlink" title="&#x68A6;&#x60F3;php&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x8BA1;"></a>&#x68A6;&#x60F3;php&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x8BA1;</h3><p></p><p><br>&#xA0;&#xA0;&#xA0;&#xA0;&#x4E3A;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x4E2A;&#x60C5;&#x6000;app&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x62FE;php&#x3002;&#x7136;&#x540E;&#x5728;dash&#x91CC;&#x9762;&#x626B;&#x4E86;&#x626B;&#x5B83;&#x7684;&#x5927;&#x6982;&#x3002;&#x7136;&#x540E;&#x4E0D;&#x5F97;&#x4E0D;&#x5410;&#x69FD;&#x4E00;&#x53E5;&#x201C;php&#x5927;&#x6CD5;&#x597D;&#x201D;&#x3002;<br></p><br><a id="more"></a><p></p>
<h5 id="&#x524D;&#x671F;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;"><a href="#&#x524D;&#x671F;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;" class="headerlink" title="&#x524D;&#x671F;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;"></a>&#x524D;&#x671F;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;</h5><p>&#x4E00;&#x5F00;&#x59CB;&#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x539F;&#x672C;&#x60F3;&#x5F04;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x8868;&#xFF0C;&#x5185;&#x5BB9;&#x8868;&#xFF0C;&#x4EE5;&#x53CA;&#x5185;&#x5BB9;&#x8868;&#x7684;&#x9644;&#x9F20;&#x6807;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;&#x9644;&#x5E26;&#x7684;&#x8BC4;&#x8BBA;&#x8868;&#x3002;</p>
<p><pre><br>&#x4E3B;&#x8868;:dream_wordcircle<br><code><br>ID int auto_increment<br>wordcircle_author int<br>wordcircle_date datetime<br>wordcircle_content longtext<br>wordcircle_titile text<br>wordcircle_status varchar(20)<br>wordcircle_password varchar(20)<br>wordcircle_guid varchar(255)<br>wordcircle_type int<br>wordcircle_comment_status varchar(20)<br>wordcircle_comment_count int<br></code><br>&#x4E3B;&#x8868;&#x9644;&#x5C5E;&#x8868;&#xFF1A;dream_wordcircle_data<br><code><br>ID int auto<br>img &#x2026;<br>area &#x2026;<br>love_name &#x2026;<br></code><br>&#x7528;&#x6237;&#x8868;:dream_users<br><code><br>ID int auto_increment<br>user_login varchar(60)<br>user_pass varchar(64)<br>user_nickname varchar(50)<br>user_email varchar(100)<br>user_url varchar(100)<br>user_registered datetime<br>user_activation_key varchar(60)<br>user_status int<br>user_display_name varchar(250)<br></code><br>&#x8BC4;&#x8BBA;&#x8868;&#xFF1A;dream_comments<br><code><br>comment_ID int<br>comment_wordcircle_ID int<br>comment_author int<br>comment_date<br></code><br></pre><br>&#x540E;&#x6765;&#x53D1;&#x73B0;&#x5176;&#x5B9E;&#x81EA;&#x5DF1;&#x8111;&#x888B;&#x62BD;&#x98CE;&#x4E86;&#x3002;&#x60F3;&#x6A21;&#x4EFF;wordpress&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E8E;&#x662F;&#x53C8;&#x6539;&#x6210;&#x4E86;<br>&#x8FD9;&#x6837;&#xFF1A;</p>
<p><pre><br><code><br>CREATE TABLE IF NOT EXISTS dream_posts (<br>                ID INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br>                post_author INT(11) NOT NULL,<br>                post_date DATETIME NOT NULL,<br>                post_content LONGTEXT NOT NULL,<br>                post_titile text NOT NULL,<br>                post_imgs varchar(255),<br>                post_status VARCHAR(20) NOT NULL,<br>                post_password VARCHAR(20) NOT NULL,<br>                post_guid VARCHAR(255),<br>                post_type INT(11) NOT NULL,<br>                post_comment_status VARCHAR(20) NOT NULL,<br>                post_comment_count INT(11)<br>                );<br>                CREATE TABLE IF NOT EXISTS dream_posts_meta(<br>                dpmeta_id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br>                post_id INT(11),<br>                meta_key varchar(255),<br>                meta_value longtext);<br>                CREATE TABLE IF NOT EXISTS dream_users (<br>                ID INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br>                user_login varchar(60) NOT NULL,<br>                user_pass varchar(64) NOT NULL,<br>                user_nickname varchar(50) NOT NULL,<br>                user_img varchar(100),<br>                user_phone varchar(100) NOT NULL,<br>                user_email varchar(100) NOT NULL,<br>                user_url VARCHAR(100),<br>                user_registered datetime NOT NULL,<br>                user_activation_key varchar(60),<br>                user_status INT(11) NOT NULL,<br>                user_display_name varchar(250)<br>                )<br>                CREATE TABLE IF NOT EXISTS dream_users_meta(<br>                dumeta_id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br>                user_id INT(6) NOT NULL,<br>                meta_key varchar(255) NOT NULL,<br>                meta_value longtext NOT NULL<br>                )<br>                CREATE TABLE IF NOT EXISTS dream_feedback(<br>                id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,<br>                time varchar(200) NOT NULL,<br>                content varchar(500) NOT NULL,<br>                name varchar(20) DEFAULT NULL,<br>                contact varchar(20) DEFAULT NULL<br>                )<br></code><br></pre><br>&#x8FD9;&#x662F;&#x6700;&#x540E;&#x7684;sql&#x8BED;&#x53E5;&#xFF0C;&#x5DEE;&#x4E0D;&#x591A;&#x4E5F;&#x80FD;&#x5B8C;&#x6210;&#x57FA;&#x672C;&#x7684;&#x529F;&#x80FD;&#x4E86;&#x3002;</p>
<p>More info: <a href="http://mrpann.com" target="_blank" rel="external">mrpan</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[手动整理的一个轻量级安卓sqlite数据库框架]]></title>
      <url>http://blog.mrpann.com/2016/01/02/%E6%89%8B%E5%8A%A8%E6%95%B4%E7%90%86%E7%9A%84%E4%B8%80%E4%B8%AA%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%AE%89%E5%8D%93sqlite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A1%86%E6%9E%B6/</url>
      <content type="html"><![CDATA[<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>&#x867D;&#x7136;&#x4E00;&#x76F4;&#x9119;&#x89C6;java web&#xFF0C;&#x4E00;&#x76F4;&#x4EE5;&#x60C5;&#x6000;&#x6765;&#x8511;&#x89C6;java&#x5F00;&#x53D1;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5F97;&#x4E0D;&#x627F;&#x8BA4;&#x5229;&#x7528;java&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x7684;&#x786E;&#x80FD;&#x5FEB;&#x901F;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x8BB8;&#x591A;&#x4E1C;&#x897F;&#x3002;<br>&#x76F8;&#x4FE1;&#x641E;&#x8FC7;java web&#x5F00;&#x53D1;&#x7684;&#x90FD;&#x63A5;&#x89E6;&#x8FC7;ssh&#xFF0C;&#x6211;&#x5BF9;&#x5176;&#x4E2D;&#x7684;hibernate&#x5370;&#x8C61;&#x6BD4;&#x8F83;&#x6DF1;&#x523B;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x5F53;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x6BD4;&#x8F83;&#x591A;&#x5427;&#xFF0C;&#x6240;&#x4EE5;&#x89C9;&#x5F97;hibernate&#x8FD8;&#x662F;&#x86EE;&#x597D;&#x7528;&#x7684;&#x3002;&#x4E8E;&#x662F;<br>&#x5C31;&#x60F3;&#x7740;&#x6539;&#x4E00;&#x6539;&#xFF0C;&#x5728;&#x5B89;&#x5353;sqlite&#x4E2D;&#x4E5F;&#x80FD;&#x90A3;&#x6837;&#x65B9;&#x4FBF;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x867D;&#x7136;&#x5B89;&#x5353;sqllite&#x7684;API&#x5DF2;&#x7ECF;&#x5C01;&#x88C5;&#x7684;&#x5F88;&#x597D;&#x7528;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5E74;&#x8F7B;&#x4EBA;&#x561B;&#xFF0C;&#x603B;&#x662F;&#x60F3;&#x6CD5;&#x591A;&#x3002;<br><a id="more"></a></p>
<h2 id="&#x539F;&#x7406;"><a href="#&#x539F;&#x7406;" class="headerlink" title="&#x539F;&#x7406;"></a>&#x539F;&#x7406;</h2><p>&#x6574;&#x4E2A;&#x539F;&#x7406;&#x5C31;&#x662F;&#xFF0C;&#x901A;&#x8FC7;&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6765;&#x5B8C;&#x6210;&#x5B9E;&#x4F53;&#x4E0E;&#x6570;&#x636E;&#x8868;&#x4E4B;&#x95F4;&#x7684;&#x6620;&#x5C04;&#x3002;&#x6B64;&#x8FC7;&#x7A0B;&#x6D89;&#x53CA;&#x53CD;&#x5C04;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x5EFA;&#x8BAE;&#x7AE5;&#x978B;&#x4EEC;&#x81EA;&#x884C;&#x8111;&#x8865;&#x4E00;&#x4E0B;&#x3002;&#x7136;&#x540E;&#x5C31;&#x662F;&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x5C3D;&#x91CF;&#x7EE7;&#x627F;&#x4E86;hibernate&#x7684;&#x98CE;&#x683C;&#x3002;</p>
<h2 id="&#x4EE3;&#x7801;"><a href="#&#x4EE3;&#x7801;" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801;</h2><p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6E90;&#x7801;&#xFF0C;&#x8FD9;&#x91CC;&#x8D34;&#x51FA;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x4EFF;SQLiteOpenHelper&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x4EFB;&#x610F;&#x76EE;&#x5F55;&#x7684;sqlite&#x6570;&#x636E;&#x7684;&#x5E2E;&#x52A9;&#x7C7B;AnnSQLiteOpenHelper&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnSQLiteOpenHelper</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = AnnSQLiteOpenHelper.class.getSimpleName();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String mName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String mPath;<span class="comment">//&#x6587;&#x4EF6;&#x5939;&#x8DEF;&#x5F84;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SQLiteDatabase.CursorFactory mFactory;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> mNewVersion;</span><br><span class="line">    <span class="keyword">private</span> SQLiteDatabase mDatabase = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsInitializing = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DatabaseErrorHandler mErrorHandler;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnnSQLiteOpenHelper</span><span class="params">(Context context,String path, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>(context,path, name, factory, version, <span class="keyword">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnnSQLiteOpenHelper</span><span class="params">(Context context, String path, String name, SQLiteDatabase.CursorFactory factory, <span class="keyword">int</span> version, DatabaseErrorHandler mErrorHandler)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.mErrorHandler = mErrorHandler;</span><br><span class="line">        <span class="keyword">if</span> (version &lt; <span class="number">1</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Version must be &gt;= 1, was &quot;</span> + version);</span><br><span class="line">        mContext = context;</span><br><span class="line">        mPath=path;</span><br><span class="line">        mName = name;</span><br><span class="line">        mFactory = factory;</span><br><span class="line">        mNewVersion = version;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> SQLiteDatabase <span class="title">getWritableDatabase</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (mDatabase != <span class="keyword">null</span> &amp;&amp; mDatabase.isOpen() &amp;&amp; !mDatabase.isReadOnly()) {</span><br><span class="line">            <span class="keyword">return</span> mDatabase;  <span class="comment">// The database is already open for business</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (mIsInitializing) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;getWritableDatabase called recursively&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">boolean</span> success = <span class="keyword">false</span>;</span><br><span class="line">        SQLiteDatabase db = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            mIsInitializing = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (mName == <span class="keyword">null</span>) {</span><br><span class="line">                db = SQLiteDatabase.create(<span class="keyword">null</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                String path = getDatabasePath(mPath,mName).getPath();</span><br><span class="line">                db = SQLiteDatabase.openOrCreateDatabase(path,mFactory);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> version = db.getVersion();</span><br><span class="line">            <span class="keyword">if</span> (version != mNewVersion) {</span><br><span class="line">                db.beginTransaction();</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    <span class="keyword">if</span> (version == <span class="number">0</span>) {</span><br><span class="line">                        onCreate(db);</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        onUpgrade(db, version, mNewVersion);</span><br><span class="line">                    }</span><br><span class="line">                    db.setVersion(mNewVersion);</span><br><span class="line">                    db.setTransactionSuccessful();</span><br><span class="line">                } <span class="keyword">finally</span> {</span><br><span class="line">                    db.endTransaction();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            onOpen(db);</span><br><span class="line">            success = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">return</span> db;</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            mIsInitializing = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (success) {</span><br><span class="line">                <span class="keyword">if</span> (mDatabase != <span class="keyword">null</span>) {</span><br><span class="line">                    <span class="keyword">try</span> { mDatabase.close(); } <span class="keyword">catch</span> (Exception e) { }</span><br><span class="line">                }</span><br><span class="line">                mDatabase = db;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">if</span> (db != <span class="keyword">null</span>) db.close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> SQLiteDatabase <span class="title">getReadableDatabase</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (mDatabase != <span class="keyword">null</span> &amp;&amp; mDatabase.isOpen()) {</span><br><span class="line">            <span class="keyword">return</span> mDatabase;  <span class="comment">// The database is already open for business</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (mIsInitializing) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;getReadableDatabase called recursively&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="keyword">return</span> getWritableDatabase();</span><br><span class="line">        } <span class="keyword">catch</span> (SQLiteException e) {</span><br><span class="line">            <span class="keyword">if</span> (mName == <span class="keyword">null</span>) <span class="keyword">throw</span> e;  <span class="comment">// Can&apos;t open a temp database read-only!</span></span><br><span class="line">            AnnLog.e(TAG, <span class="string">&quot;Couldn&apos;t open &quot;</span> + mName + <span class="string">&quot; for writing (will try read-only):&quot;</span>, e);</span><br><span class="line">        }</span><br><span class="line">        SQLiteDatabase db = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            mIsInitializing = <span class="keyword">true</span>;</span><br><span class="line">            String path = getDatabasePath(mPath,mName).getPath();</span><br><span class="line">            db = SQLiteDatabase.openDatabase(path, mFactory, SQLiteDatabase.OPEN_READWRITE);</span><br><span class="line">            <span class="keyword">if</span> (db.getVersion() != mNewVersion) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> SQLiteException(<span class="string">&quot;Can&apos;t upgrade read-only database from version &quot;</span> +</span><br><span class="line">                        db.getVersion() + <span class="string">&quot; to &quot;</span> + mNewVersion + <span class="string">&quot;: &quot;</span> + path);</span><br><span class="line">            }</span><br><span class="line">            onOpen(db);</span><br><span class="line">            AnnLog.w(TAG, <span class="string">&quot;Opened &quot;</span> + mName + <span class="string">&quot; in read-only mode&quot;</span>);</span><br><span class="line">            mDatabase = db;</span><br><span class="line">            <span class="keyword">return</span> mDatabase;</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            mIsInitializing = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (db != <span class="keyword">null</span> &amp;&amp; db != mDatabase) db.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (mIsInitializing) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;Closed during initialization&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (mDatabase != <span class="keyword">null</span> &amp;&amp; mDatabase.isOpen()) {</span><br><span class="line">            mDatabase.close();</span><br><span class="line">            mDatabase = <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(SQLiteDatabase db)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDowngrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span> </span>{</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> SQLiteException(<span class="string">&quot;Can&apos;t downgrade database from version &quot;</span> +</span><br><span class="line">                oldVersion + <span class="string">&quot; to &quot;</span> + newVersion);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onUpgrade</span><span class="params">(SQLiteDatabase db, <span class="keyword">int</span> oldVersion, <span class="keyword">int</span> newVersion)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(SQLiteDatabase db)</span> </span>{}</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> File <span class="title">getDatabasePath</span><span class="params">(String dbpath,String dbName)</span></span><br><span class="line">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (dbpath==<span class="keyword">null</span>) {</span><br><span class="line">            dbpath=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        }</span><br><span class="line">        File path = <span class="keyword">new</span> File(Environment.getExternalStorageDirectory(),dbpath);<span class="comment">//&#x521B;&#x5EFA;&#x76EE;&#x5F55;</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(path.getPath(),dbName);<span class="comment">// &#x521B;&#x5EFA;&#x6587;&#x4EF6;</span></span><br><span class="line">        <span class="keyword">if</span> (!path.exists()) {<span class="comment">// &#x76EE;&#x5F55;&#x5B58;&#x5728;&#x8FD4;&#x56DE;false</span></span><br><span class="line">            path.mkdirs();<span class="comment">// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (!f.exists()) {<span class="comment">// &#x6587;&#x4EF6;&#x5B58;&#x5728;&#x8FD4;&#x56DE;false</span></span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                f.createNewFile();<span class="comment">//&#x521B;&#x5EFA;&#x6587;&#x4EF6;</span></span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h2 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h2><p>&#x5728;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x624B;&#x52A8;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;&#xFF0C;&#x5982;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Table</span>(name = <span class="string">&quot;t_teacher&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>{</span><br><span class="line">	<span class="meta">@Column</span>(name = <span class="string">&quot;title&quot;</span>)</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Teacher [&quot;</span> + <span class="keyword">super</span>.toString() + <span class="string">&quot;,title=&quot;</span> + title + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x7EE7;&#x627F;BaseDaoImpl<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherDaoImpl</span> <span class="keyword">extends</span> <span class="title">BaseDaoImpl</span>&lt;<span class="title">Teacher</span>&gt; </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TeacherDaoImpl</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">		<span class="keyword">super</span>(<span class="keyword">new</span> DBHelper(context),Teacher.class);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5EFA;&#x597D;&#x5E2E;&#x52A9;&#x7C7B;DBHelper<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBHelper</span> <span class="keyword">extends</span> <span class="title">AnnDBHelper</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DBNAME = <span class="string">&quot;xx.db&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DBVERSION = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DBPATH= Environment.getExternalStorageState()+ <span class="string">&quot;/Ann/DataBases/&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Class&lt;?&gt;[] clazz = { Teacher.class};</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DBHelper</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">		<span class="keyword">super</span>(context,DBPATH, DBNAME, <span class="keyword">null</span>, DBVERSION, clazz);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4F7F;&#x7528;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TeacherDaoImpl teacherDao = <span class="keyword">new</span> TeacherDaoImpl(MainActivity.<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">Teacher teacher = <span class="keyword">new</span> Teacher();</span><br><span class="line">        teacher.setName(<span class="string">&quot;Ann&quot;</span>);</span><br><span class="line">        teacher.setAge(<span class="number">50</span>);</span><br><span class="line">        teacher.setTitle(<span class="string">&quot;leader&quot;</span>);</span><br><span class="line"><span class="comment">//&#x589E;</span></span><br><span class="line">Long teacherId = teacherDao.insert(teacher);</span><br><span class="line"><span class="comment">//&#x6539;</span></span><br><span class="line">teacherDao.update(teacher);</span><br><span class="line"><span class="comment">//&#x5220;</span></span><br><span class="line">teacherDao.delete(teacher);</span><br><span class="line"><span class="comment">//&#x67E5;</span></span><br><span class="line">Teacher t=teacherDao.get(teacherId);</span><br><span class="line"><span class="comment">//&#x6267;&#x884C;sql&#x8BED;&#x53E5;</span></span><br><span class="line">teacherDao.execSql(<span class="string">&quot;insert into t_teacher(name,age) values(&apos;jack&apos;,50)&quot;</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x67E5;&#x770B;&#x4E86;&#x8BB8;&#x591A;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x4E2D;&#x9014;&#x4E5F;&#x51FA;&#x73B0;&#x4E86;&#x8BB8;&#x8BB8;&#x591A;&#x591A;&#x7684;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x6700;&#x540E;&#x8FD8;&#x597D;&#x81F3;&#x5C11;&#x8FD9;&#x4E2A;&#x80FD;&#x8DD1;&#x8D77;&#x6765;&#xFF0C;&#x5C31;&#x5F53;&#x81EA;&#x5DF1;&#x6574;&#x7406;&#x4E86;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x6240;&#x5B66;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x9700;&#x8981;&#x53BB;&#x5B66;&#x4E60;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x54CE;&#xFF0C;&#x64B8;&#x4EE3;&#x7801;&#x4E4B;&#x8DEF;&#x6781;&#x5176;&#x8270;&#x8F9B;&#x554A;&#xFF5E;&#xFF5E;<br>&#x6E90;&#x7801;&#x5730;&#x5740;:<a href="https://github.com/wslongchen/annutils/tree/master/src/main/java/com/example/mrpan/annutils/db" target="_blank" rel="external">github</a></p>
]]></content>
    </entry>
    
  
  
</search>
